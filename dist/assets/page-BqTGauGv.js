import{r as n,j as s,L as u,l as j,i as N,F as w}from"./index-NQ7_5lrg.js";import{u as y}from"./useQuery-vCOzwg6x.js";import{F as b}from"./FindItem-CICTZRRb.js";import{j as C}from"./index-CEzudzDZ.js";import"./provider.store-CHeK68qn.js";const v=()=>{const[a,o]=n.useState([]),[x,c]=n.useState(!1),{isPending:g,error:d,data:i}=y({queryKey:["teams"],queryFn:async()=>{try{const r=(await N.collection(w.MATCHING).get()).docs.map(l=>({...l.data(),id:l.id}));return r||[]}catch(e){return console.log(e),alert(e.message),[]}}}),[p,m]=n.useState(i??[]);return n.useEffect(()=>{if(i&&a.length>0){const e=[];for(const t of i)for(const r of t.targets)a.find(f=>f===r)&&(e.find(h=>h.id===t.id)||e.push(t));console.log(e),m(e)}else m(i??[])},[i,a]),g?s.jsx(u,{message:"등록된 팀 찾기 공고를 불러오고 있습니다..."}):d||!i?s.jsx(u,{message:`Error: ${d.message}`,iconClassName:"text-red-500"}):s.jsxs("div",{className:"max-w-300 mx-auto p-5 lg:px-0",children:[x&&s.jsx("div",{className:"fixed top-0 left-0 w-full h-screen justify-center items-center flex bg-black/50",children:s.jsxs("ul",{className:"max-w-75 wrap gap-2.5 border p-5 rounded-2xl bg-white border-border shadow-md",children:[C.map(e=>{const t=a.find(r=>r===e);return s.jsx("li",{children:s.jsx("button",{onClick:()=>o(r=>t?r.filter(l=>l!==e):[...r,e]),className:t?"primary":"",children:e})},e)}),s.jsx("li",{children:s.jsx("button",{className:"primary",onClick:()=>c(!1),children:"선택 완료"})})]})}),s.jsxs("div",{className:"w-full overflow-x-auto mb-5 flex gap-x-2.5",children:[a.length>0&&s.jsx("ul",{className:"wrap gap-2.5",children:a.map(e=>s.jsx("li",{children:s.jsx("button",{onClick:()=>o(t=>t.filter(r=>r!==e)),children:e})},e))}),s.jsxs("button",{className:"primary gap-x-2.5",onClick:()=>c(!0),children:["직군 선택 ",s.jsx(j,{className:"text-xl"})]})]}),s.jsx("ul",{className:"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:p.map((e,t)=>s.jsx("li",{children:s.jsx(b,{item:e,index:t})},e.id))})]})};export{v as default};
