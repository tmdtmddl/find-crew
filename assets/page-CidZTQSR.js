import{r as c,j as e,A as X,a as Z,G as ee,b as V,u as te,c as ne,d as se,L as re,t as W,e as le}from"./index-Bs4g6r69.js";import{j as H}from"./index-CEzudzDZ.js";import{u as I}from"./useTextInput-Cl3OHoDr.js";import{u as $}from"./useSelect-Rm0HkCHZ.js";import{e as ae}from"./validator-iAbv46Dp.js";import{s as oe}from"./provider.store-DE4c5zcz.js";const ie={descs:[],length:{start:{year:0,month:0},end:"현재까지"},name:""},K=({onCancel:a,onChange:y,payload:i})=>{const[n,m]=c.useState(i??ie),[u,T]=c.useState(""),[r,f]=c.useState(!!(i&&i.length.end!=="현재까지")),k=I(),w=I(),j=$(),Y=$(),A=$(),v=$(),C=$(),h=c.useMemo(()=>n.name.length===0?"회사 이름을 입력해주세요.":null,[n.name]),x=c.useMemo(()=>u.length===0&&n.descs.length===0?"경력을 입력해주세요.":null,[u,n.descs]),N=c.useMemo(()=>O(n.length.start.year)?null:"경력 시작 년도를 확인해주세요.",[n.length.start.year]),M=c.useMemo(()=>L(n.length.start.month)?null:"경력 시작 월을 확인해주세요.",[n.length.start.month]),S=c.useMemo(()=>typeof n.length.end=="string"||O(n.length.end.year)?null:"경력 종료 년도를 확인해주세요.",[n.length.end]),E=c.useMemo(()=>typeof n.length.end=="string"||L(n.length.end.month)?null:"경력 종료 월을 확인해주세요.",[n.length.end]),D=c.useCallback(()=>{if(h)return alert(h),k.focus();if(N)return alert(N),j.showPicker();if(M)return alert(M),Y.showPicker();if(S)return alert(S),v.showPicker();if(E)return alert(E),C.showPicker();if(x)return alert(x),w.focus();if(i){const s=()=>{let t=!1;for(const d of i.descs)if(!n.descs.find(P=>P===d)){t=!0;break}return t};if(i.name===n.name&&i.length.start.year===n.length.start.year&&i.length.start.month===n.length.start.month&&i.length.end==="현재까지"&&n.length.end==="현재까지"||typeof i.length.end!="string"&&typeof n.length.end!="string"&&i.length.end.year===n.length.end.year&&i.length.end.month===n.length.end.month&&!s())return alert("변경사항이 없습니다.")}y(n),a()},[h,x,N,M,S,E,k,w,j,Y,v,C,y,a,n,i]);return e.jsxs("div",{className:"col gap-y-2.5 max-w-100 mx-auto w-full",children:[e.jsx(k.Component,{value:n.name,onChangeText:s=>m(t=>({...t,name:s})),label:"회사 이름",placeholder:"DW 아카데미",message:h,onSubmitEditing:()=>{if(h)return alert(h),k.focus()},props:{onKeyDown:({key:s})=>{s==="Enter"&&D()}}}),e.jsxs("div",{className:"row gap-x-2.5",children:[e.jsxs("div",{className:"row gap-x-1",children:[e.jsx(j.Component,{data:U,label:"시작년도",onChangeSelect:s=>{m(t=>({...t,length:{...t.length,start:{...t.length.start,year:Number(s)}}})),Y.showPicker()},value:n.length.start.year}),e.jsx(Y.Component,{data:B,label:"시작월",onChangeSelect:s=>{m(t=>({...t,length:{...t.length,start:{...t.length.start,month:Number(s)}}}))},value:n.length.start.month})]}),e.jsx("div",{className:"row gap-x-1 items-end",children:r?e.jsxs(e.Fragment,{children:[e.jsx(v.Component,{data:U,label:"종료년도",onChangeSelect:s=>{m(t=>({...t,length:{...t.length,end:typeof t.length.end=="string"?t.length.end:{...t.length.end,year:Number(s)}}})),C.showPicker()},value:typeof n.length.end=="string"?0:n.length.end.year}),e.jsx(C.Component,{data:B,label:"종료월",onChangeSelect:s=>{m(t=>({...t,length:{...t.length,end:typeof t.length.end=="string"?t.length.end:{...t.length.end,month:Number(s)}}})),w.focus()},value:typeof n.length.end=="string"?0:n.length.end.month}),e.jsx("button",{className:"border border-border",onClick:()=>{f(!1),m(s=>({...s,length:{...s.length,end:"현재까지"}})),w.focus()},type:"button",children:"현재까지"})]}):e.jsx(A.Component,{label:"종료시기",data:["현재까지","직접선택"],onChangeSelect:s=>{if(s==="직접선택")return f(!0),m(t=>({...t,length:{...t.length,end:{year:0,month:0}}})),v.showPicker();m(t=>({...t,length:{...t.length,end:s}}))},value:typeof n.length.end=="string"?n.length.end:""})})]}),e.jsx(w.Component,{label:"세부 경력 내용",onChangeText:T,value:u,message:x,placeholder:"웹사이트 개발 고수",props:{onKeyDown:({key:s,nativeEvent:t})=>{if((s==="Enter"||s==="Tab")&&!t.isComposing){if(x)return alert(x),w.focus();if(n.descs.find(g=>g===u))return alert("중복된 경력 사항입니다.");m(g=>({...g,descs:[...g.descs,u]})),T(""),w.focus()}}}}),n.descs.length>0&&e.jsx("ul",{className:"col gap-y-1",children:n.descs.map((s,t)=>e.jsxs("li",{className:"text-sm border border-border rounded px-1 bg-lightGray row justify-between items-center",children:[t+1,". ",s,e.jsx("button",{type:"button",className:"h-auto p-0",onClick:()=>m(d=>({...d,descs:d.descs.filter(g=>g!==s)})),children:e.jsx(X,{})})]},s))}),e.jsxs("div",{className:"row gap-x-2 5",children:[e.jsx("button",{type:"button",onClick:a,children:"취소"}),e.jsx("button",{className:"primary",type:"button",onClick:D,children:i?"수정":"추가"})]})]})},L=a=>!(a<1||a>12),O=a=>a!==0,U=Array.from({length:100},(a,y)=>{const i=new Date().getFullYear();return String(i-y)}),B=Array.from({length:12},(a,y)=>String(1+y)),ce=({item:a,onDelete:y,onUpdate:i})=>{const[n,m]=c.useState(!1);return e.jsxs(e.Fragment,{children:[n&&e.jsx(K,{payload:a,onCancel:()=>m(!1),onChange:i}),e.jsxs("li",{children:[e.jsxs("div",{className:"row",children:[e.jsxs("p",{className:"font-bold flex-1",onClick:()=>m(!0),children:[a.name,e.jsxs("span",{className:"font-light text-xs ml-1",children:[a.length.start.year,".",a.length.start.month,"~",a.length.end==="현재까지"?a.length.end:`${a.length.end.year}.${a.length.end.month}`]})]}),e.jsx("button",{type:"button",onClick:y,className:"w-5 h-5 p-0 text-sm hover:text-red-500",children:e.jsx(Z,{})})]}),e.jsx("ul",{className:"rounded p-1",onClick:()=>m(!0),children:a.descs.map((u,T)=>e.jsxs("li",{className:"text-gray-500",children:[T+1,". ",u]},u))})]},a.name)]})};function ue(a){return ee({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(a)}function be(){const a=V()[0].get("target"),y=l=>l?l.replace(",","").split(" ").splice(0,2):[],{email:i,name:n,uid:m,isWithProvider:u,setWithProvider:T}=oe(),[r,f]=c.useState(he),[k,w]=c.useState(y(a)),[j,Y]=c.useState(""),[A,v]=c.useState(!1),C=V()[0].get("content"),h=te(),x=ne(),N=I(),M=I(),S=I(),E=I(),D=$(),s=c.useMemo(()=>u||ae(r.email)?null:"이메일을 확인해주세요.",[r.email,u]),t=c.useMemo(()=>r.name.length===0?"이름을 입력하세요.":r.name.length<2?"이름이 너무 짧습니다.":null,[r.name]),d=c.useMemo(()=>{if(r.mobile.length===0)return"연락처를 입력해주세요.";if(!r.mobile.startsWith("010"))return"연락처를 확인해주세요. 010으로 시작해야합니다.";if(r.mobile.includes(" ")||r.mobile.includes("-")||r.mobile.includes("/"))return"숫자만 입력해주세요.";if(r.mobile.length!==11)return"휴대전화번호는 11자리입니다."},[r.mobile]),g=c.useMemo(()=>u?null:j.length===0?"비밀번호를 입력하세요.":j.length<6?"비밀번호가 너무 짧습니다.":j.length>12?"비밀번호가 너무 깁니다.":null,[j,u]),P=c.useMemo(()=>r.jobDesc.length===0?"찾는 직업군":t||d||s||g||r.jobDesc.length===0?"기본정보":r.experiences.length===0?"경력":r.intro.length===0?"자소서":null,[t,d,s,g,r]),{isPending:R,signup:G,signinWithProvider:_}=se(),J=c.useCallback(async l=>{if(l.preventDefault(),!C){if(k.length===0){alert("찾으시는 직군을 선택해주세요.");return}return h(`${x.pathname}?content=기본정보`)}switch(C){case"기본정보":return t?(alert(t),N.focus()):r.jobDesc.length===0?(alert("전문 분야를 선택해주세요."),D.showPicker()):d?(alert(d),M.focus()):s?(alert(s),S.focus()):g?(alert(g),E.focus()):h(`${x.pathname}?content=경력`);case"경력":return r.experiences.length===0?alert("경력을 추가해주세요."):h(`${x.pathname}?content=자소서`);case"자소서":if(P)return P==="찾는 직업군"?(alert("찾는 직업군을 선택해주세요."),h(x.pathname)):(alert(`${P} 내용을 확인해주세요.`),h(`${x.pathname}?content=${P}`));const{message:o,success:p}=await G(r,j,m??void 0);return p?(alert(u?"회원정보가 업데이트 되었습니다.":`${r.name} 님 회원가입을 진심으로 축하드립니다.`),h("/my?content=matching"),console.log(r.intro)):alert(o)}},[u,C,k,h,x,N,D,S,t,s,g,E,r,M,d,P,G,j,m]);return c.useEffect(()=>{u&&i&&f(l=>({...l,name:n??"",email:i}))},[u,n,i]),e.jsxs("div",{children:[R&&e.jsx(re,{message:"회원가입이 진행중입니다..."}),e.jsxs("form",{className:"col gap-y-2.5 p-5 max-w-100 mx-auto",onSubmit:J,children:[C?{기본정보:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row gap-x-2.5",children:[e.jsx(N.Component,{label:"이름",onChangeText:l=>f(o=>({...o,name:l})),value:r.name,divClassName:"flex-2",message:t,onSubmitEditing:()=>{if(t)return alert(t),N.focus();D.showPicker()}}),e.jsx(D.Component,{containerClassName:"flex-1",data:H,onChangeSelect:l=>{f(o=>({...o,jobDesc:l})),S.focus()},value:r.jobDesc,label:"전문 분야"})]}),e.jsx(M.Component,{label:"휴대전화 번호",onChangeText:l=>f(o=>({...o,mobile:l})),value:r.mobile,message:d,onSubmitEditing:()=>{if(d)return alert(d),M.focus();console.log("submit gogo")}}),!u&&e.jsxs(e.Fragment,{children:[e.jsx(S.Component,{label:"이메일",onChangeText:l=>f(o=>({...o,email:l})),value:r.email,message:s,onSubmitEditing:()=>{if(s)return alert(s),S.focus();console.log("submit gogo")}}),e.jsx(E.Component,{label:"비밀번호",onChangeText:Y,value:j,message:g,onSubmitEditing:()=>{if(g)return alert(g),E.focus()},props:{type:"password"}})]})]}),경력:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col",children:[e.jsx("label",{htmlFor:"ex-form",className:"text-sm text-gray-500",children:"경력추가"}),r.experiences.length>0&&e.jsx("ul",{className:"my-2.5",children:r.experiences.map((l,o)=>e.jsx(ce,{item:l,index:o,onDelete:()=>{confirm("해당 경력을 삭제하시겠습니까?")&&(f(p=>({...p,experiences:p.experiences.filter(b=>b.name!==l.name)})),alert("삭제되었습니다."))},onUpdate:p=>f(b=>({...b,experiences:b.experiences.map(F=>F.name===l.name?p:F)}))},l.name))}),e.jsx("button",{type:"button",onClick:()=>v(!0),id:"ex-form",className:W(r.experiences.length===0&&"mt-1"),children:"경력 추가"})]}),A&&e.jsx("div",{className:"fixed w-full top-0 left-0 p-5 bg-white h-screen overflow-y-auto",children:e.jsx(K,{onCancel:()=>v(!1),onChange:l=>f(o=>({...o,experiences:[l,...o.experiences]}))})})]}),자소서:e.jsxs("div",{className:"col gap-y-1",children:[e.jsx("label",{htmlFor:"intro",className:"text-gray-500 text-sm",children:"자기소개"}),e.jsx("textarea",{value:r.intro,onChange:l=>f(o=>({...o,intro:l.target.value})),placeholder:"자기소개 내용을 철저하게 입력하세요. 좋은 팀원을 구할 수 있는 첫 번째 지름길입니다.",className:"resize-none h-[50vh] p-2.5 border border-border rounded bg-lightGray focus:bg-white outline-none focus:border-theme"})]})}[C]:e.jsxs("div",{children:[e.jsx("h1",{children:"어떤 직군을 영입하고 싶으신가요?"}),e.jsx("p",{children:"여러 직군을 복수 선택할 수 있습니다."}),e.jsx("ul",{className:"wrap",children:H.map(l=>{const o=!!k.find(b=>b===l),p=()=>{w(b=>o?b.filter(F=>F!==l):[...b,l])};return e.jsx("li",{children:e.jsx("button",{type:"button",onClick:p,className:W("rounded-full bg-white border text-theme",o&&"primary bg-theme text-white"),children:l})},l)})})]}),e.jsxs("div",{className:"row gap-x-2.5 mt-2.5",children:[e.jsx("button",{type:"button",className:"flex-1",onClick:()=>h(-1),children:"이전"}),e.jsx("button",{className:"primary px-5 flex-2",children:C==="자소서"?u?"정보추가":"회원가입":"다음"})]}),!u&&e.jsxs("div",{className:"col gap-y-2.5",children:[e.jsx("span",{className:"w-full block text-center mt-5",children:"OR"}),e.jsx(le,{to:"/login",type:"button",className:"primary w-full",children:"로그인하기"}),e.jsxs("button",{type:"button",className:"w-full gap-x-2.5",onClick:async()=>{const{success:l,message:o,data:p}=await _();if(!l){if(alert(o),o!=null&&o.includes("통합회원")&&h("/my/account"),!p)return;const{displayName:b,phoneNumber:F,uid:q,email:z}=p;f(Q=>({...Q,name:b??"",mobile:F??"010",email:z??""})),T(q,z,n??void 0),F?h("/auth?cotent=경력"):(h("/auth?content=기본정보"),M.focus()),b||(h("/auth?content=기본정보"),N.focus());return}},children:[e.jsx(ue,{})," 구글로 계속하기"]})]})]})]})}const he={email:"",experiences:[],intro:"",jobDesc:"개발자",mobile:"010",name:"",targets:[],uid:""};export{be as default};
