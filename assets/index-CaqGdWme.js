const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/page-Bz8Zhrw6.js","assets/index-CEzudzDZ.js","assets/page-BfLrwe6W.js","assets/useTextInput-4nq6WJUF.js","assets/useSelect-Dl_Ym4zW.js","assets/validator-iAbv46Dp.js","assets/provider.store-DVIkEwsu.js","assets/page-BfoOVHMB.js","assets/page-CQifv6rn.js","assets/useQuery-DpSpr3cU.js","assets/page-YnxTAmeY.js","assets/AppForm-Bse_OlaU.js","assets/page-BXHNwGrc.js","assets/FindItem-xbDKLVFc.js","assets/page-CP52Sqn7.js","assets/page-Dl0LDvN6.js","assets/page-DZsYRyaF.js"])))=>i.map(i=>d[i]);
var Mb=n=>{throw TypeError(n)};var p_=(n,e,t)=>e.has(n)||Mb("Cannot "+t);var ee=(n,e,t)=>(p_(n,e,"read from private field"),t?t.call(n):e.get(n)),Je=(n,e,t)=>e.has(n)?Mb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ve=(n,e,t,r)=>(p_(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),wn=(n,e,t)=>(p_(n,e,"access private method"),t);var wm=(n,e,t,r)=>({set _(a){Ve(n,e,a,t)},get _(){return ee(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function BO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var g_={exports:{}},wh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function qO(){if(Lb)return wh;Lb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:u,ref:a!==void 0?a:null,props:l}}return wh.Fragment=e,wh.jsx=t,wh.jsxs=t,wh}var Ub;function jO(){return Ub||(Ub=1,g_.exports=qO()),g_.exports}var Ae=jO(),y_={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function HO(){if(zb)return Me;zb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function w(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function V(k,ae,Te){this.props=k,this.context=ae,this.refs=N,this.updater=Te||R}V.prototype.isReactComponent={},V.prototype.setState=function(k,ae){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ae,"setState")},V.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function z(){}z.prototype=V.prototype;function Y(k,ae,Te){this.props=k,this.context=ae,this.refs=N,this.updater=Te||R}var K=Y.prototype=new z;K.constructor=Y,C(K,V.prototype),K.isPureReactComponent=!0;var ue=Array.isArray,le={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function x(k,ae,Te,me,fe,Pe){return Te=Pe.ref,{$$typeof:n,type:k,key:ae,ref:Te!==void 0?Te:null,props:Pe}}function S(k,ae){return x(k.type,ae,void 0,void 0,void 0,k.props)}function A(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function O(k){var ae={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(Te){return ae[Te]})}var M=/\/+/g;function B(k,ae){return typeof k=="object"&&k!==null&&k.key!=null?O(""+k.key):ae.toString(36)}function P(){}function nt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(P,P):(k.status="pending",k.then(function(ae){k.status==="pending"&&(k.status="fulfilled",k.value=ae)},function(ae){k.status==="pending"&&(k.status="rejected",k.reason=ae)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function at(k,ae,Te,me,fe){var Pe=typeof k;(Pe==="undefined"||Pe==="boolean")&&(k=null);var Oe=!1;if(k===null)Oe=!0;else switch(Pe){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(k.$$typeof){case n:case e:Oe=!0;break;case _:return Oe=k._init,at(Oe(k._payload),ae,Te,me,fe)}}if(Oe)return fe=fe(k),Oe=me===""?"."+B(k,0):me,ue(fe)?(Te="",Oe!=null&&(Te=Oe.replace(M,"$&/")+"/"),at(fe,ae,Te,"",function(Rt){return Rt})):fe!=null&&(A(fe)&&(fe=S(fe,Te+(fe.key==null||k&&k.key===fe.key?"":(""+fe.key).replace(M,"$&/")+"/")+Oe)),ae.push(fe)),1;Oe=0;var ft=me===""?".":me+":";if(ue(k))for(var We=0;We<k.length;We++)me=k[We],Pe=ft+B(me,We),Oe+=at(me,ae,Te,Pe,fe);else if(We=w(k),typeof We=="function")for(k=We.call(k),We=0;!(me=k.next()).done;)me=me.value,Pe=ft+B(me,We++),Oe+=at(me,ae,Te,Pe,fe);else if(Pe==="object"){if(typeof k.then=="function")return at(nt(k),ae,Te,me,fe);throw ae=String(k),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function se(k,ae,Te){if(k==null)return k;var me=[],fe=0;return at(k,me,"","",function(Pe){return ae.call(Te,Pe,fe++)}),me}function Se(k){if(k._status===-1){var ae=k._result;ae=ae(),ae.then(function(Te){(k._status===0||k._status===-1)&&(k._status=1,k._result=Te)},function(Te){(k._status===0||k._status===-1)&&(k._status=2,k._result=Te)}),k._status===-1&&(k._status=0,k._result=ae)}if(k._status===1)return k._result.default;throw k._result}var pe=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Ne(){}return Me.Children={map:se,forEach:function(k,ae,Te){se(k,function(){ae.apply(this,arguments)},Te)},count:function(k){var ae=0;return se(k,function(){ae++}),ae},toArray:function(k){return se(k,function(ae){return ae})||[]},only:function(k){if(!A(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Me.Component=V,Me.Fragment=t,Me.Profiler=a,Me.PureComponent=Y,Me.StrictMode=r,Me.Suspense=f,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Me.act=function(){throw Error("act(...) is not supported in production builds of React.")},Me.cache=function(k){return function(){return k.apply(null,arguments)}},Me.cloneElement=function(k,ae,Te){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var me=C({},k.props),fe=k.key,Pe=void 0;if(ae!=null)for(Oe in ae.ref!==void 0&&(Pe=void 0),ae.key!==void 0&&(fe=""+ae.key),ae)!J.call(ae,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&ae.ref===void 0||(me[Oe]=ae[Oe]);var Oe=arguments.length-2;if(Oe===1)me.children=Te;else if(1<Oe){for(var ft=Array(Oe),We=0;We<Oe;We++)ft[We]=arguments[We+2];me.children=ft}return x(k.type,fe,void 0,void 0,Pe,me)},Me.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Me.createElement=function(k,ae,Te){var me,fe={},Pe=null;if(ae!=null)for(me in ae.key!==void 0&&(Pe=""+ae.key),ae)J.call(ae,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(fe[me]=ae[me]);var Oe=arguments.length-2;if(Oe===1)fe.children=Te;else if(1<Oe){for(var ft=Array(Oe),We=0;We<Oe;We++)ft[We]=arguments[We+2];fe.children=ft}if(k&&k.defaultProps)for(me in Oe=k.defaultProps,Oe)fe[me]===void 0&&(fe[me]=Oe[me]);return x(k,Pe,void 0,void 0,null,fe)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(k){return{$$typeof:h,render:k}},Me.isValidElement=A,Me.lazy=function(k){return{$$typeof:_,_payload:{_status:-1,_result:k},_init:Se}},Me.memo=function(k,ae){return{$$typeof:p,type:k,compare:ae===void 0?null:ae}},Me.startTransition=function(k){var ae=le.T,Te={};le.T=Te;try{var me=k(),fe=le.S;fe!==null&&fe(Te,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(Ne,pe)}catch(Pe){pe(Pe)}finally{le.T=ae}},Me.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Me.use=function(k){return le.H.use(k)},Me.useActionState=function(k,ae,Te){return le.H.useActionState(k,ae,Te)},Me.useCallback=function(k,ae){return le.H.useCallback(k,ae)},Me.useContext=function(k){return le.H.useContext(k)},Me.useDebugValue=function(){},Me.useDeferredValue=function(k,ae){return le.H.useDeferredValue(k,ae)},Me.useEffect=function(k,ae){return le.H.useEffect(k,ae)},Me.useId=function(){return le.H.useId()},Me.useImperativeHandle=function(k,ae,Te){return le.H.useImperativeHandle(k,ae,Te)},Me.useInsertionEffect=function(k,ae){return le.H.useInsertionEffect(k,ae)},Me.useLayoutEffect=function(k,ae){return le.H.useLayoutEffect(k,ae)},Me.useMemo=function(k,ae){return le.H.useMemo(k,ae)},Me.useOptimistic=function(k,ae){return le.H.useOptimistic(k,ae)},Me.useReducer=function(k,ae,Te){return le.H.useReducer(k,ae,Te)},Me.useRef=function(k){return le.H.useRef(k)},Me.useState=function(k){return le.H.useState(k)},Me.useSyncExternalStore=function(k,ae,Te){return le.H.useSyncExternalStore(k,ae,Te)},Me.useTransition=function(){return le.H.useTransition()},Me.version="19.0.0",Me}var Fb;function zv(){return Fb||(Fb=1,y_.exports=HO()),y_.exports}var Q=zv();const jo=BO(Q);var __={exports:{}},bh={},v_={exports:{}},E_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function GO(){return Bb||(Bb=1,function(n){function e(se,Se){var pe=se.length;se.push(Se);e:for(;0<pe;){var Ne=pe-1>>>1,k=se[Ne];if(0<a(k,Se))se[Ne]=Se,se[pe]=k,pe=Ne;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var Se=se[0],pe=se.pop();if(pe!==Se){se[0]=pe;e:for(var Ne=0,k=se.length,ae=k>>>1;Ne<ae;){var Te=2*(Ne+1)-1,me=se[Te],fe=Te+1,Pe=se[fe];if(0>a(me,pe))fe<k&&0>a(Pe,me)?(se[Ne]=Pe,se[fe]=pe,Ne=fe):(se[Ne]=me,se[Te]=pe,Ne=Te);else if(fe<k&&0>a(Pe,pe))se[Ne]=Pe,se[fe]=pe,Ne=fe;else break e}}return Se}function a(se,Se){var pe=se.sortIndex-Se.sortIndex;return pe!==0?pe:se.id-Se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],p=[],_=1,v=null,w=3,R=!1,C=!1,N=!1,V=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function K(se){for(var Se=t(p);Se!==null;){if(Se.callback===null)r(p);else if(Se.startTime<=se)r(p),Se.sortIndex=Se.expirationTime,e(f,Se);else break;Se=t(p)}}function ue(se){if(N=!1,K(se),!C)if(t(f)!==null)C=!0,nt();else{var Se=t(p);Se!==null&&at(ue,Se.startTime-se)}}var le=!1,J=-1,x=5,S=-1;function A(){return!(n.unstable_now()-S<x)}function O(){if(le){var se=n.unstable_now();S=se;var Se=!0;try{e:{C=!1,N&&(N=!1,z(J),J=-1),R=!0;var pe=w;try{t:{for(K(se),v=t(f);v!==null&&!(v.expirationTime>se&&A());){var Ne=v.callback;if(typeof Ne=="function"){v.callback=null,w=v.priorityLevel;var k=Ne(v.expirationTime<=se);if(se=n.unstable_now(),typeof k=="function"){v.callback=k,K(se),Se=!0;break t}v===t(f)&&r(f),K(se)}else r(f);v=t(f)}if(v!==null)Se=!0;else{var ae=t(p);ae!==null&&at(ue,ae.startTime-se),Se=!1}}break e}finally{v=null,w=pe,R=!1}Se=void 0}}finally{Se?M():le=!1}}}var M;if(typeof Y=="function")M=function(){Y(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,P=B.port2;B.port1.onmessage=O,M=function(){P.postMessage(null)}}else M=function(){V(O,0)};function nt(){le||(le=!0,M())}function at(se,Se){J=V(function(){se(n.unstable_now())},Se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){C||R||(C=!0,nt())},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(se){switch(w){case 1:case 2:case 3:var Se=3;break;default:Se=w}var pe=w;w=Se;try{return se()}finally{w=pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,Se){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var pe=w;w=se;try{return Se()}finally{w=pe}},n.unstable_scheduleCallback=function(se,Se,pe){var Ne=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ne+pe:Ne):pe=Ne,se){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=pe+k,se={id:_++,callback:Se,priorityLevel:se,startTime:pe,expirationTime:k,sortIndex:-1},pe>Ne?(se.sortIndex=pe,e(p,se),t(f)===null&&se===t(p)&&(N?(z(J),J=-1):N=!0,at(ue,pe-Ne))):(se.sortIndex=k,e(f,se),C||R||(C=!0,nt())),se},n.unstable_shouldYield=A,n.unstable_wrapCallback=function(se){var Se=w;return function(){var pe=w;w=Se;try{return se.apply(this,arguments)}finally{w=pe}}}}(E_)),E_}var qb;function KO(){return qb||(qb=1,v_.exports=GO()),v_.exports}var T_={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function QO(){if(jb)return bn;jb=1;var n=zv();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,p,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:f,containerInfo:p,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,bn.createPortal=function(f,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(f,p,null,_)},bn.flushSync=function(f){var p=u.T,_=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=p,r.p=_,r.d.f()}},bn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(f,p))},bn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},bn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var _=p.as,v=h(_,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:R}):_==="script"&&r.d.X(f,{crossOrigin:v,integrity:w,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=h(p.as,p.crossOrigin);r.d.M(f,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(f)},bn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,v=h(_,p.crossOrigin);r.d.L(f,_,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bn.preloadModule=function(f,p){if(typeof f=="string")if(p){var _=h(p.as,p.crossOrigin);r.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(f)},bn.requestFormReset=function(f){r.d.r(f)},bn.unstable_batchedUpdates=function(f,p){return f(p)},bn.useFormState=function(f,p,_){return u.H.useFormState(f,p,_)},bn.useFormStatus=function(){return u.H.useHostTransitionStatus()},bn.version="19.0.0",bn}var Hb;function $O(){if(Hb)return T_.exports;Hb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),T_.exports=QO(),T_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function WO(){if(Gb)return bh;Gb=1;var n=KO(),e=zv(),t=$O();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var l=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),R=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),ue=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function J(i){return i===null||typeof i!="object"?null:(i=le&&i[le]||i["@@iterator"],typeof i=="function"?i:null)}var x=Symbol.for("react.client.reference");function S(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===x?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case f:return"Fragment";case h:return"Portal";case _:return"Profiler";case p:return"StrictMode";case N:return"Suspense";case V:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case R:return(i.displayName||"Context")+".Provider";case w:return(i._context.displayName||"Context")+".Consumer";case C:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case z:return s=i.displayName||null,s!==null?s:S(i.type)||"Memo";case Y:s=i._payload,i=i._init;try{return S(i(s))}catch{}}return null}var A=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=Object.assign,M,B;function P(i){if(M===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||"",B=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+M+i+B}var nt=!1;function at(i,s){if(!i||nt)return"";nt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(X){var G=X}Reflect.construct(i,[],re)}else{try{re.call()}catch(X){G=X}i.call(re.prototype)}}else{try{throw Error()}catch(X){G=X}(re=i())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(X){if(X&&G&&typeof X.stack=="string")return[X.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],b=g[1];if(T&&b){var D=T.split(`
`),U=b.split(`
`);for(m=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;if(c===D.length||m===U.length)for(c=D.length-1,m=U.length-1;1<=c&&0<=m&&D[c]!==U[m];)m--;for(;1<=c&&0<=m;c--,m--)if(D[c]!==U[m]){if(c!==1||m!==1)do if(c--,m--,0>m||D[c]!==U[m]){var Z=`
`+D[c].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=c&&0<=m);break}}}finally{nt=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?P(o):""}function se(i){switch(i.tag){case 26:case 27:case 5:return P(i.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return i=at(i.type,!1),i;case 11:return i=at(i.type.render,!1),i;case 1:return i=at(i.type,!0),i;default:return""}}function Se(i){try{var s="";do s+=se(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function pe(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function Ne(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function k(i){if(pe(i)!==i)throw Error(r(188))}function ae(i){var s=i.alternate;if(!s){if(s=pe(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,c=s;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return k(m),i;if(g===c)return k(m),s;g=g.sibling}throw Error(r(188))}if(o.return!==c.return)o=m,c=g;else{for(var T=!1,b=m.child;b;){if(b===o){T=!0,o=m,c=g;break}if(b===c){T=!0,c=m,o=g;break}b=b.sibling}if(!T){for(b=g.child;b;){if(b===o){T=!0,o=g,c=m;break}if(b===c){T=!0,c=g,o=m;break}b=b.sibling}if(!T)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function Te(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=Te(i),s!==null)return s;i=i.sibling}return null}var me=Array.isArray,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe={pending:!1,data:null,method:null,action:null},Oe=[],ft=-1;function We(i){return{current:i}}function Rt(i){0>ft||(i.current=Oe[ft],Oe[ft]=null,ft--)}function rt(i,s){ft++,Oe[ft]=i.current,i.current=s}var Dn=We(null),Ii=We(null),ar=We(null),Es=We(null);function Ts(i,s){switch(rt(ar,s),rt(Ii,i),rt(Dn,null),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?hb(s):0;break;default:if(i=i===8?s.parentNode:s,s=i.tagName,i=i.namespaceURI)i=hb(i),s=db(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Rt(Dn),rt(Dn,s)}function Ai(){Rt(Dn),Rt(Ii),Rt(ar)}function yc(i){i.memoizedState!==null&&rt(Es,i);var s=Dn.current,o=db(s,i.type);s!==o&&(rt(Ii,i),rt(Dn,o))}function hl(i){Ii.current===i&&(Rt(Dn),Rt(Ii)),Es.current===i&&(Rt(Es),yh._currentValue=Pe)}var dl=Object.prototype.hasOwnProperty,Ha=n.unstable_scheduleCallback,fl=n.unstable_cancelCallback,yg=n.unstable_shouldYield,_c=n.unstable_requestPaint,Bn=n.unstable_now,ef=n.unstable_getCurrentPriorityLevel,Kt=n.unstable_ImmediatePriority,en=n.unstable_UserBlockingPriority,Si=n.unstable_NormalPriority,tf=n.unstable_LowPriority,vc=n.unstable_IdlePriority,_g=n.log,Ga=n.unstable_setDisableYieldValue,ws=null,En=null;function Ec(i){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(ws,i,void 0,(i.current.flags&128)===128)}catch{}}function Br(i){if(typeof _g=="function"&&Ga(i),En&&typeof En.setStrictMode=="function")try{En.setStrictMode(ws,i)}catch{}}var Pn=Math.clz32?Math.clz32:rf,Tc=Math.log,nf=Math.LN2;function rf(i){return i>>>=0,i===0?32:31-(Tc(i)/nf|0)|0}var qr=128,bs=4194304;function Rr(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function or(i,s){var o=i.pendingLanes;if(o===0)return 0;var c=0,m=i.suspendedLanes,g=i.pingedLanes,T=i.warmLanes;i=i.finishedLanes!==0;var b=o&134217727;return b!==0?(o=b&~m,o!==0?c=Rr(o):(g&=b,g!==0?c=Rr(g):i||(T=b&~T,T!==0&&(c=Rr(T))))):(b=o&~m,b!==0?c=Rr(b):g!==0?c=Rr(g):i||(T=o&~T,T!==0&&(c=Rr(T)))),c===0?0:s!==0&&s!==c&&(s&m)===0&&(m=c&-c,T=s&-s,m>=T||m===32&&(T&4194176)!==0)?s:c}function Is(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function ml(i,s){switch(i){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(){var i=qr;return qr<<=1,(qr&4194176)===0&&(qr=128),i}function As(){var i=bs;return bs<<=1,(bs&62914560)===0&&(bs=4194304),i}function pl(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Mt(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function sf(i,s,o,c,m,g){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var b=i.entanglements,D=i.expirationTimes,U=i.hiddenUpdates;for(o=T&~o;0<o;){var Z=31-Pn(o),re=1<<Z;b[Z]=0,D[Z]=-1;var G=U[Z];if(G!==null)for(U[Z]=null,Z=0;Z<G.length;Z++){var X=G[Z];X!==null&&(X.lane&=-536870913)}o&=~re}c!==0&&Ss(i,c,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~s))}function Ss(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-Pn(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|o&4194218}function Rs(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var c=31-Pn(o),m=1<<c;m&s|i[c]&s&&(i[c]|=s),o&=~m}}function af(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function of(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:Pb(i.type))}function Cs(i,s){var o=fe.p;try{return fe.p=i,s()}finally{fe.p=o}}var jr=Math.random().toString(36).slice(2),tn="__reactFiber$"+jr,Qt="__reactProps$"+jr,Ri="__reactContainer$"+jr,Ka="__reactEvents$"+jr,gl="__reactListeners$"+jr,Hr="__reactHandles$"+jr,bc="__reactResources$"+jr,Ds="__reactMarker$"+jr;function Qa(i){delete i[tn],delete i[Qt],delete i[Ka],delete i[gl],delete i[Hr]}function Cr(i){var s=i[tn];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Ri]||o[tn]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=pb(i);i!==null;){if(o=i[tn])return o;i=pb(i)}return s}i=o,o=i.parentNode}return null}function Ci(i){if(i=i[tn]||i[Ri]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function Ps(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function Os(i){var s=i[bc];return s||(s=i[bc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Et(i){i[Ds]=!0}var Ic=new Set,yl={};function Wn(i,s){qn(i,s),qn(i+"Capture",s)}function qn(i,s){for(yl[i]=s,i=0;i<s.length;i++)Ic.add(s[i])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ac={},Sc={};function lf(i){return dl.call(Sc,i)?!0:dl.call(Ac,i)?!1:vg.test(i)?Sc[i]=!0:(Ac[i]=!0,!1)}function Ns(i,s,o){if(lf(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function xs(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function lr(i,s,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+c)}}function On(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function uf(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Eg(i){var s=uf(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),c=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,g=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function $a(i){i._valueTracker||(i._valueTracker=Eg(i))}function Rc(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return i&&(c=uf(i)?i.checked?"true":"false":i.value),i=c,i!==o?(s.setValue(i),!0):!1}function _l(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Di=/[\n"\\]/g;function Ct(i){return i.replace(Di,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Vs(i,s,o,c,m,g,T,b){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+On(s)):i.value!==""+On(s)&&(i.value=""+On(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?vl(i,T,On(s)):o!=null?vl(i,T,On(o)):c!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+On(b):i.removeAttribute("name")}function Wa(i,s,o,c,m,g,T,b){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+On(o):"",s=s!=null?""+On(s):o,b||s===i.value||(i.value=s),i.defaultValue=s}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=b?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function vl(i,s,o){s==="number"&&_l(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Ye(i,s,o,c){if(i=i.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<i.length;o++)m=s.hasOwnProperty("$"+i[o].value),i[o].selected!==m&&(i[o].selected=m),m&&c&&(i[o].defaultSelected=!0)}else{for(o=""+On(o),s=null,m=0;m<i.length;m++){if(i[m].value===o){i[m].selected=!0,c&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function Ya(i,s,o){if(s!=null&&(s=""+On(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+On(o):""}function ks(i,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(r(92));if(me(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=On(s),i.defaultValue=o,c=i.textContent,c===o&&c!==""&&c!==null&&(i.value=c)}function ur(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var Tg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cc(i,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,o):typeof o!="number"||o===0||Tg.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function cf(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var m in s)c=s[m],s.hasOwnProperty(m)&&o[m]!==c&&Cc(i,m,c)}else for(var g in s)s.hasOwnProperty(g)&&Cc(i,g,s[g])}function Dc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gr(i){return bg.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var cr=null;function El(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Pi=null,Oi=null;function Ni(i){var s=Ci(i);if(s&&(i=s.stateNode)){var o=i[Qt]||null;e:switch(i=s.stateNode,s.type){case"input":if(Vs(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ct(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==i&&c.form===i.form){var m=c[Qt]||null;if(!m)throw Error(r(90));Vs(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===i.form&&Rc(c)}break e;case"textarea":Ya(i,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ye(i,!!o.multiple,s,!1)}}}var Pc=!1;function hf(i,s,o){if(Pc)return i(s,o);Pc=!0;try{var c=i(s);return c}finally{if(Pc=!1,(Pi!==null||Oi!==null)&&(nm(),Pi&&(s=Pi,i=Oi,Oi=Pi=null,Ni(s),i)))for(s=0;s<i.length;s++)Ni(i[s])}}function Xa(i,s){var o=i.stateNode;if(o===null)return null;var c=o[Qt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var hr=!1;if(Yn)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){hr=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{hr=!1}var Kr=null,Ms=null,xi=null;function Oc(){if(xi)return xi;var i,s=Ms,o=s.length,c,m="value"in Kr?Kr.value:Kr.textContent,g=m.length;for(i=0;i<o&&s[i]===m[i];i++);var T=o-i;for(c=1;c<=T&&s[o-c]===m[g-c];c++);return xi=m.slice(i,1<c?1-c:void 0)}function Qr(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function $r(){return!0}function Nc(){return!1}function nn(i){function s(o,c,m,g,T){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(o=i[b],this[b]=o?o(g):g[b]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?$r:Nc,this.isPropagationStopped=Nc,this}return O(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),s}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=nn(tt),Ja=O({},tt,{view:0,detail:0}),df=nn(Ja),wl,bl,Wr,eo=O({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Wr&&(Wr&&i.type==="mousemove"?(wl=i.screenX-Wr.screenX,bl=i.screenY-Wr.screenY):bl=wl=0,Wr=i),wl)},movementY:function(i){return"movementY"in i?i.movementY:bl}}),dr=nn(eo),ff=O({},eo,{dataTransfer:0}),Ig=nn(ff),to=O({},Ja,{relatedTarget:0}),Il=nn(to),xc=O({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),Al=nn(xc),mf=O({},tt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Sl=nn(mf),Ag=O({},tt,{data:0}),Vc=nn(Ag),no={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kc(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=gf[i])?!!s[i]:!1}function ro(){return kc}var yf=O({},Ja,{key:function(i){if(i.key){var s=no[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Qr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pf[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(i){return i.type==="keypress"?Qr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rl=nn(yf),_f=O({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mc=nn(_f),Vi=O({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),vf=nn(Vi),Ef=O({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tf=nn(Ef),wf=O({},eo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Cl=nn(wf),Nn=O({},tt,{newState:0,oldState:0}),bf=nn(Nn),If=[9,13,27,32],Yr=Yn&&"CompositionEvent"in window,d=null;Yn&&"documentMode"in document&&(d=document.documentMode);var y=Yn&&"TextEvent"in window&&!d,E=Yn&&(!Yr||d&&8<d&&11>=d),I=" ",q=!1;function W(i,s){switch(i){case"keyup":return If.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ge=!1;function $t(i,s){switch(i){case"compositionend":return ce(s);case"keypress":return s.which!==32?null:(q=!0,I);case"textInput":return i=s.data,i===I&&q?null:i;default:return null}}function Ke(i,s){if(Ge)return i==="compositionend"||!Yr&&W(i,s)?(i=Oc(),xi=Ms=Kr=null,Ge=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wt(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!rn[i.type]:s==="textarea"}function ki(i,s,o,c){Pi?Oi?Oi.push(c):Oi=[c]:Pi=c,s=om(s,"onChange"),0<s.length&&(o=new Tl("onChange","change",null,o,c),i.push({event:o,listeners:s}))}var dn=null,Xr=null;function Lc(i){ab(i,0)}function Af(i){var s=Ps(i);if(Rc(s))return i}function kT(i,s){if(i==="change")return s}var MT=!1;if(Yn){var Sg;if(Yn){var Rg="oninput"in document;if(!Rg){var LT=document.createElement("div");LT.setAttribute("oninput","return;"),Rg=typeof LT.oninput=="function"}Sg=Rg}else Sg=!1;MT=Sg&&(!document.documentMode||9<document.documentMode)}function UT(){dn&&(dn.detachEvent("onpropertychange",zT),Xr=dn=null)}function zT(i){if(i.propertyName==="value"&&Af(Xr)){var s=[];ki(s,Xr,i,El(i)),hf(Lc,s)}}function yP(i,s,o){i==="focusin"?(UT(),dn=s,Xr=o,dn.attachEvent("onpropertychange",zT)):i==="focusout"&&UT()}function _P(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Af(Xr)}function vP(i,s){if(i==="click")return Af(s)}function EP(i,s){if(i==="input"||i==="change")return Af(s)}function TP(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Xn=typeof Object.is=="function"?Object.is:TP;function Uc(i,s){if(Xn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!dl.call(s,m)||!Xn(i[m],s[m]))return!1}return!0}function FT(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function BT(i,s){var o=FT(i);i=0;for(var c;o;){if(o.nodeType===3){if(c=i+o.textContent.length,i<=s&&c>=s)return{node:o,offset:s-i};i=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=FT(o)}}function qT(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?qT(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function jT(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=_l(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=_l(i.document)}return s}function Cg(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function wP(i,s){var o=jT(s);s=i.focusedElem;var c=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&qT(s.ownerDocument.documentElement,s)){if(c!==null&&Cg(s)){if(i=c.start,o=c.end,o===void 0&&(o=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(o,s.value.length);else if(o=(i=s.ownerDocument||document)&&i.defaultView||window,o.getSelection){o=o.getSelection();var m=s.textContent.length,g=Math.min(c.start,m);c=c.end===void 0?g:Math.min(c.end,m),!o.extend&&g>c&&(m=c,c=g,g=m),m=BT(s,g);var T=BT(s,c);m&&T&&(o.rangeCount!==1||o.anchorNode!==m.node||o.anchorOffset!==m.offset||o.focusNode!==T.node||o.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),o.removeAllRanges(),g>c?(o.addRange(i),o.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),o.addRange(i)))}}for(i=[],o=s;o=o.parentNode;)o.nodeType===1&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)o=i[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var bP=Yn&&"documentMode"in document&&11>=document.documentMode,Dl=null,Dg=null,zc=null,Pg=!1;function HT(i,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Pg||Dl==null||Dl!==_l(c)||(c=Dl,"selectionStart"in c&&Cg(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),zc&&Uc(zc,c)||(zc=c,c=om(Dg,"onSelect"),0<c.length&&(s=new Tl("onSelect","select",null,s,o),i.push({event:s,listeners:c}),s.target=Dl)))}function io(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var Pl={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionrun:io("Transition","TransitionRun"),transitionstart:io("Transition","TransitionStart"),transitioncancel:io("Transition","TransitionCancel"),transitionend:io("Transition","TransitionEnd")},Og={},GT={};Yn&&(GT=document.createElement("div").style,"AnimationEvent"in window||(delete Pl.animationend.animation,delete Pl.animationiteration.animation,delete Pl.animationstart.animation),"TransitionEvent"in window||delete Pl.transitionend.transition);function so(i){if(Og[i])return Og[i];if(!Pl[i])return i;var s=Pl[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in GT)return Og[i]=s[o];return i}var KT=so("animationend"),QT=so("animationiteration"),$T=so("animationstart"),IP=so("transitionrun"),AP=so("transitionstart"),SP=so("transitioncancel"),WT=so("transitionend"),YT=new Map,XT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Dr(i,s){YT.set(i,s),Wn(s,[i])}var fr=[],Ol=0,Ng=0;function Sf(){for(var i=Ol,s=Ng=Ol=0;s<i;){var o=fr[s];fr[s++]=null;var c=fr[s];fr[s++]=null;var m=fr[s];fr[s++]=null;var g=fr[s];if(fr[s++]=null,c!==null&&m!==null){var T=c.pending;T===null?m.next=m:(m.next=T.next,T.next=m),c.pending=m}g!==0&&ZT(o,m,g)}}function Rf(i,s,o,c){fr[Ol++]=i,fr[Ol++]=s,fr[Ol++]=o,fr[Ol++]=c,Ng|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function xg(i,s,o,c){return Rf(i,s,o,c),Cf(i)}function Ls(i,s){return Rf(i,null,null,s),Cf(i)}function ZT(i,s,o){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o);for(var m=!1,g=i.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;m&&s!==null&&i.tag===3&&(g=i.stateNode,m=31-Pn(o),g=g.hiddenUpdates,i=g[m],i===null?g[m]=[s]:i.push(s),s.lane=o|536870912)}function Cf(i){if(50<ch)throw ch=0,zy=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Nl={},JT=new WeakMap;function mr(i,s){if(typeof i=="object"&&i!==null){var o=JT.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Se(s)},JT.set(i,s),s)}return{value:i,source:s,stack:Se(s)}}var xl=[],Vl=0,Df=null,Pf=0,pr=[],gr=0,ao=null,Mi=1,Li="";function oo(i,s){xl[Vl++]=Pf,xl[Vl++]=Df,Df=i,Pf=s}function ew(i,s,o){pr[gr++]=Mi,pr[gr++]=Li,pr[gr++]=ao,ao=i;var c=Mi;i=Li;var m=32-Pn(c)-1;c&=~(1<<m),o+=1;var g=32-Pn(s)+m;if(30<g){var T=m-m%5;g=(c&(1<<T)-1).toString(32),c>>=T,m-=T,Mi=1<<32-Pn(s)+m|o<<m|c,Li=g+i}else Mi=1<<g|o<<m|c,Li=i}function Vg(i){i.return!==null&&(oo(i,1),ew(i,1,0))}function kg(i){for(;i===Df;)Df=xl[--Vl],xl[Vl]=null,Pf=xl[--Vl],xl[Vl]=null;for(;i===ao;)ao=pr[--gr],pr[gr]=null,Li=pr[--gr],pr[gr]=null,Mi=pr[--gr],pr[gr]=null}var xn=null,fn=null,Xe=!1,Pr=null,Zr=!1,Mg=Error(r(519));function lo(i){var s=Error(r(418,""));throw qc(mr(s,i)),Mg}function tw(i){var s=i.stateNode,o=i.type,c=i.memoizedProps;switch(s[tn]=i,s[Qt]=c,o){case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":case"embed":He("load",s);break;case"video":case"audio":for(o=0;o<dh.length;o++)He(dh[o],s);break;case"source":He("error",s);break;case"img":case"image":case"link":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"input":He("invalid",s),Wa(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),$a(s);break;case"select":He("invalid",s);break;case"textarea":He("invalid",s),ks(s,c.value,c.defaultValue,c.children),$a(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||cb(s.textContent,o)?(c.popover!=null&&(He("beforetoggle",s),He("toggle",s)),c.onScroll!=null&&He("scroll",s),c.onScrollEnd!=null&&He("scrollend",s),c.onClick!=null&&(s.onclick=lm),s=!0):s=!1,s||lo(i)}function nw(i){for(xn=i.return;xn;)switch(xn.tag){case 3:case 27:Zr=!0;return;case 5:case 13:Zr=!1;return;default:xn=xn.return}}function Fc(i){if(i!==xn)return!1;if(!Xe)return nw(i),Xe=!0,!1;var s=!1,o;if((o=i.tag!==3&&i.tag!==27)&&((o=i.tag===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||n_(i.type,i.memoizedProps)),o=!o),o&&(s=!0),s&&fn&&lo(i),nw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){fn=Nr(i.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}fn=null}}else fn=xn?Nr(i.stateNode.nextSibling):null;return!0}function Bc(){fn=xn=null,Xe=!1}function qc(i){Pr===null?Pr=[i]:Pr.push(i)}var jc=Error(r(460)),rw=Error(r(474)),Lg={then:function(){}};function iw(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Of(){}function sw(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Of,Of),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,i===jc?Error(r(483)):i;default:if(typeof s.status=="string")s.then(Of,Of);else{if(i=ct,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=c}},function(c){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,i===jc?Error(r(483)):i}throw Hc=s,jc}}var Hc=null;function aw(){if(Hc===null)throw Error(r(459));var i=Hc;return Hc=null,i}var kl=null,Gc=0;function Nf(i){var s=Gc;return Gc+=1,kl===null&&(kl=[]),sw(kl,i,s)}function Kc(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function xf(i,s){throw s.$$typeof===l?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function ow(i){var s=i._init;return s(i._payload)}function lw(i){function s(F,L){if(i){var H=F.deletions;H===null?(F.deletions=[L],F.flags|=16):H.push(L)}}function o(F,L){if(!i)return null;for(;L!==null;)s(F,L),L=L.sibling;return null}function c(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function m(F,L){return F=Ws(F,L),F.index=0,F.sibling=null,F}function g(F,L,H){return F.index=H,i?(H=F.alternate,H!==null?(H=H.index,H<L?(F.flags|=33554434,L):H):(F.flags|=33554434,L)):(F.flags|=1048576,L)}function T(F){return i&&F.alternate===null&&(F.flags|=33554434),F}function b(F,L,H,te){return L===null||L.tag!==6?(L=Oy(H,F.mode,te),L.return=F,L):(L=m(L,H),L.return=F,L)}function D(F,L,H,te){var ye=H.type;return ye===f?Z(F,L,H.props.children,te,H.key):L!==null&&(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&ow(ye)===L.type)?(L=m(L,H.props),Kc(L,H),L.return=F,L):(L=Xf(H.type,H.key,H.props,null,F.mode,te),Kc(L,H),L.return=F,L)}function U(F,L,H,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Ny(H,F.mode,te),L.return=F,L):(L=m(L,H.children||[]),L.return=F,L)}function Z(F,L,H,te,ye){return L===null||L.tag!==7?(L=vo(H,F.mode,te,ye),L.return=F,L):(L=m(L,H),L.return=F,L)}function re(F,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Oy(""+L,F.mode,H),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case u:return H=Xf(L.type,L.key,L.props,null,F.mode,H),Kc(H,L),H.return=F,H;case h:return L=Ny(L,F.mode,H),L.return=F,L;case Y:var te=L._init;return L=te(L._payload),re(F,L,H)}if(me(L)||J(L))return L=vo(L,F.mode,H,null),L.return=F,L;if(typeof L.then=="function")return re(F,Nf(L),H);if(L.$$typeof===R)return re(F,$f(F,L),H);xf(F,L)}return null}function G(F,L,H,te){var ye=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ye!==null?null:b(F,L,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case u:return H.key===ye?D(F,L,H,te):null;case h:return H.key===ye?U(F,L,H,te):null;case Y:return ye=H._init,H=ye(H._payload),G(F,L,H,te)}if(me(H)||J(H))return ye!==null?null:Z(F,L,H,te,null);if(typeof H.then=="function")return G(F,L,Nf(H),te);if(H.$$typeof===R)return G(F,L,$f(F,H),te);xf(F,H)}return null}function X(F,L,H,te,ye){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return F=F.get(H)||null,b(L,F,""+te,ye);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case u:return F=F.get(te.key===null?H:te.key)||null,D(L,F,te,ye);case h:return F=F.get(te.key===null?H:te.key)||null,U(L,F,te,ye);case Y:var Ue=te._init;return te=Ue(te._payload),X(F,L,H,te,ye)}if(me(te)||J(te))return F=F.get(H)||null,Z(L,F,te,ye,null);if(typeof te.then=="function")return X(F,L,H,Nf(te),ye);if(te.$$typeof===R)return X(F,L,H,$f(L,te),ye);xf(L,te)}return null}function we(F,L,H,te){for(var ye=null,Ue=null,Ie=L,Ce=L=0,on=null;Ie!==null&&Ce<H.length;Ce++){Ie.index>Ce?(on=Ie,Ie=null):on=Ie.sibling;var Ze=G(F,Ie,H[Ce],te);if(Ze===null){Ie===null&&(Ie=on);break}i&&Ie&&Ze.alternate===null&&s(F,Ie),L=g(Ze,L,Ce),Ue===null?ye=Ze:Ue.sibling=Ze,Ue=Ze,Ie=on}if(Ce===H.length)return o(F,Ie),Xe&&oo(F,Ce),ye;if(Ie===null){for(;Ce<H.length;Ce++)Ie=re(F,H[Ce],te),Ie!==null&&(L=g(Ie,L,Ce),Ue===null?ye=Ie:Ue.sibling=Ie,Ue=Ie);return Xe&&oo(F,Ce),ye}for(Ie=c(Ie);Ce<H.length;Ce++)on=X(Ie,F,Ce,H[Ce],te),on!==null&&(i&&on.alternate!==null&&Ie.delete(on.key===null?Ce:on.key),L=g(on,L,Ce),Ue===null?ye=on:Ue.sibling=on,Ue=on);return i&&Ie.forEach(function(na){return s(F,na)}),Xe&&oo(F,Ce),ye}function xe(F,L,H,te){if(H==null)throw Error(r(151));for(var ye=null,Ue=null,Ie=L,Ce=L=0,on=null,Ze=H.next();Ie!==null&&!Ze.done;Ce++,Ze=H.next()){Ie.index>Ce?(on=Ie,Ie=null):on=Ie.sibling;var na=G(F,Ie,Ze.value,te);if(na===null){Ie===null&&(Ie=on);break}i&&Ie&&na.alternate===null&&s(F,Ie),L=g(na,L,Ce),Ue===null?ye=na:Ue.sibling=na,Ue=na,Ie=on}if(Ze.done)return o(F,Ie),Xe&&oo(F,Ce),ye;if(Ie===null){for(;!Ze.done;Ce++,Ze=H.next())Ze=re(F,Ze.value,te),Ze!==null&&(L=g(Ze,L,Ce),Ue===null?ye=Ze:Ue.sibling=Ze,Ue=Ze);return Xe&&oo(F,Ce),ye}for(Ie=c(Ie);!Ze.done;Ce++,Ze=H.next())Ze=X(Ie,F,Ce,Ze.value,te),Ze!==null&&(i&&Ze.alternate!==null&&Ie.delete(Ze.key===null?Ce:Ze.key),L=g(Ze,L,Ce),Ue===null?ye=Ze:Ue.sibling=Ze,Ue=Ze);return i&&Ie.forEach(function(FO){return s(F,FO)}),Xe&&oo(F,Ce),ye}function Ot(F,L,H,te){if(typeof H=="object"&&H!==null&&H.type===f&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case u:e:{for(var ye=H.key;L!==null;){if(L.key===ye){if(ye=H.type,ye===f){if(L.tag===7){o(F,L.sibling),te=m(L,H.props.children),te.return=F,F=te;break e}}else if(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&ow(ye)===L.type){o(F,L.sibling),te=m(L,H.props),Kc(te,H),te.return=F,F=te;break e}o(F,L);break}else s(F,L);L=L.sibling}H.type===f?(te=vo(H.props.children,F.mode,te,H.key),te.return=F,F=te):(te=Xf(H.type,H.key,H.props,null,F.mode,te),Kc(te,H),te.return=F,F=te)}return T(F);case h:e:{for(ye=H.key;L!==null;){if(L.key===ye)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){o(F,L.sibling),te=m(L,H.children||[]),te.return=F,F=te;break e}else{o(F,L);break}else s(F,L);L=L.sibling}te=Ny(H,F.mode,te),te.return=F,F=te}return T(F);case Y:return ye=H._init,H=ye(H._payload),Ot(F,L,H,te)}if(me(H))return we(F,L,H,te);if(J(H)){if(ye=J(H),typeof ye!="function")throw Error(r(150));return H=ye.call(H),xe(F,L,H,te)}if(typeof H.then=="function")return Ot(F,L,Nf(H),te);if(H.$$typeof===R)return Ot(F,L,$f(F,H),te);xf(F,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(o(F,L.sibling),te=m(L,H),te.return=F,F=te):(o(F,L),te=Oy(H,F.mode,te),te.return=F,F=te),T(F)):o(F,L)}return function(F,L,H,te){try{Gc=0;var ye=Ot(F,L,H,te);return kl=null,ye}catch(Ie){if(Ie===jc)throw Ie;var Ue=Er(29,Ie,null,F.mode);return Ue.lanes=te,Ue.return=F,Ue}finally{}}}var uo=lw(!0),uw=lw(!1),Ml=We(null),Vf=We(0);function cw(i,s){i=$i,rt(Vf,i),rt(Ml,s),$i=i|s.baseLanes}function Ug(){rt(Vf,$i),rt(Ml,Ml.current)}function zg(){$i=Vf.current,Rt(Ml),Rt(Vf)}var yr=We(null),Jr=null;function Us(i){var s=i.alternate;rt(Yt,Yt.current&1),rt(yr,i),Jr===null&&(s===null||Ml.current!==null||s.memoizedState!==null)&&(Jr=i)}function hw(i){if(i.tag===22){if(rt(Yt,Yt.current),rt(yr,i),Jr===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Jr=i)}}else zs()}function zs(){rt(Yt,Yt.current),rt(yr,yr.current)}function Ui(i){Rt(yr),Jr===i&&(Jr=null),Rt(Yt)}var Yt=We(0);function kf(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var RP=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},CP=n.unstable_scheduleCallback,DP=n.unstable_NormalPriority,Xt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fg(){return{controller:new RP,data:new Map,refCount:0}}function Qc(i){i.refCount--,i.refCount===0&&CP(DP,function(){i.controller.abort()})}var $c=null,Bg=0,Ll=0,Ul=null;function PP(i,s){if($c===null){var o=$c=[];Bg=0,Ll=Qy(),Ul={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Bg++,s.then(dw,dw),s}function dw(){if(--Bg===0&&$c!==null){Ul!==null&&(Ul.status="fulfilled");var i=$c;$c=null,Ll=0,Ul=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function OP(i,s){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var fw=A.S;A.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&PP(i,s),fw!==null&&fw(i,s)};var co=We(null);function qg(){var i=co.current;return i!==null?i:ct.pooledCache}function Mf(i,s){s===null?rt(co,co.current):rt(co,s.pool)}function mw(){var i=qg();return i===null?null:{parent:Xt._currentValue,pool:i}}var Fs=0,Le=null,ot=null,Bt=null,Lf=!1,zl=!1,ho=!1,Uf=0,Wc=0,Fl=null,NP=0;function Lt(){throw Error(r(321))}function jg(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!Xn(i[o],s[o]))return!1;return!0}function Hg(i,s,o,c,m,g){return Fs=g,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,A.H=i===null||i.memoizedState===null?fo:Bs,ho=!1,g=o(c,m),ho=!1,zl&&(g=gw(s,o,c,m)),pw(i),g}function pw(i){A.H=ei;var s=ot!==null&&ot.next!==null;if(Fs=0,Bt=ot=Le=null,Lf=!1,Wc=0,Fl=null,s)throw Error(r(300));i===null||sn||(i=i.dependencies,i!==null&&Qf(i)&&(sn=!0))}function gw(i,s,o,c){Le=i;var m=0;do{if(zl&&(Fl=null),Wc=0,zl=!1,25<=m)throw Error(r(301));if(m+=1,Bt=ot=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}A.H=mo,g=s(o,c)}while(zl);return g}function xP(){var i=A.H,s=i.useState()[0];return s=typeof s.then=="function"?Yc(s):s,i=i.useState()[0],(ot!==null?ot.memoizedState:null)!==i&&(Le.flags|=1024),s}function Gg(){var i=Uf!==0;return Uf=0,i}function Kg(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Qg(i){if(Lf){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Lf=!1}Fs=0,Bt=ot=Le=null,zl=!1,Wc=Uf=0,Fl=null}function jn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Le.memoizedState=Bt=i:Bt=Bt.next=i,Bt}function qt(){if(ot===null){var i=Le.alternate;i=i!==null?i.memoizedState:null}else i=ot.next;var s=Bt===null?Le.memoizedState:Bt.next;if(s!==null)Bt=s,ot=i;else{if(i===null)throw Le.alternate===null?Error(r(467)):Error(r(310));ot=i,i={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Bt===null?Le.memoizedState=Bt=i:Bt=Bt.next=i}return Bt}var zf;zf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Yc(i){var s=Wc;return Wc+=1,Fl===null&&(Fl=[]),i=sw(Fl,i,s),s=Le,(Bt===null?s.memoizedState:Bt.next)===null&&(s=s.alternate,A.H=s===null||s.memoizedState===null?fo:Bs),i}function Ff(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Yc(i);if(i.$$typeof===R)return Tn(i)}throw Error(r(438,String(i)))}function $g(i){var s=null,o=Le.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Le.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=zf(),Le.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),c=0;c<i;c++)o[c]=ue;return s.index++,o}function zi(i,s){return typeof s=="function"?s(i):s}function Bf(i){var s=qt();return Wg(s,ot,i)}function Wg(i,s,o){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var m=i.baseQueue,g=c.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}s.baseQueue=m=g,c.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{s=m.next;var b=T=null,D=null,U=s,Z=!1;do{var re=U.lane&-536870913;if(re!==U.lane?(Qe&re)===re:(Fs&re)===re){var G=U.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),re===Ll&&(Z=!0);else if((Fs&G)===G){U=U.next,G===Ll&&(Z=!0);continue}else re={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(b=D=re,T=g):D=D.next=re,Le.lanes|=G,Ys|=G;re=U.action,ho&&o(g,re),g=U.hasEagerState?U.eagerState:o(g,re)}else G={lane:re,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(b=D=G,T=g):D=D.next=G,Le.lanes|=re,Ys|=re;U=U.next}while(U!==null&&U!==s);if(D===null?T=g:D.next=b,!Xn(g,i.memoizedState)&&(sn=!0,Z&&(o=Ul,o!==null)))throw o;i.memoizedState=g,i.baseState=T,i.baseQueue=D,c.lastRenderedState=g}return m===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Yg(i){var s=qt(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var c=o.dispatch,m=o.pending,g=s.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do g=i(g,T.action),T=T.next;while(T!==m);Xn(g,s.memoizedState)||(sn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function yw(i,s,o){var c=Le,m=qt(),g=Xe;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=s();var T=!Xn((ot||m).memoizedState,o);if(T&&(m.memoizedState=o,sn=!0),m=m.queue,Jg(Ew.bind(null,c,m,i),[i]),m.getSnapshot!==s||T||Bt!==null&&Bt.memoizedState.tag&1){if(c.flags|=2048,Bl(9,vw.bind(null,c,m,o,s),{destroy:void 0},null),ct===null)throw Error(r(349));g||(Fs&60)!==0||_w(c,s,o)}return o}function _w(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Le.updateQueue,s===null?(s=zf(),Le.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function vw(i,s,o,c){s.value=o,s.getSnapshot=c,Tw(s)&&ww(i)}function Ew(i,s,o){return o(function(){Tw(s)&&ww(i)})}function Tw(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!Xn(i,o)}catch{return!0}}function ww(i){var s=Ls(i,2);s!==null&&Vn(s,i,2)}function Xg(i){var s=jn();if(typeof i=="function"){var o=i;if(i=o(),ho){Br(!0);try{o()}finally{Br(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:i},s}function bw(i,s,o,c){return i.baseState=o,Wg(i,ot,typeof c=="function"?c:zi)}function VP(i,s,o,c,m){if(Hf(i))throw Error(r(485));if(i=s.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};A.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,Iw(s,g)):(g.next=o.next,s.pending=o.next=g)}}function Iw(i,s){var o=s.action,c=s.payload,m=i.state;if(s.isTransition){var g=A.T,T={};A.T=T;try{var b=o(m,c),D=A.S;D!==null&&D(T,b),Aw(i,s,b)}catch(U){Zg(i,s,U)}finally{A.T=g}}else try{g=o(m,c),Aw(i,s,g)}catch(U){Zg(i,s,U)}}function Aw(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Sw(i,s,c)},function(c){return Zg(i,s,c)}):Sw(i,s,o)}function Sw(i,s,o){s.status="fulfilled",s.value=o,Rw(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,Iw(i,o)))}function Zg(i,s,o){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,Rw(s),s=s.next;while(s!==c)}i.action=null}function Rw(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Cw(i,s){return s}function Dw(i,s){if(Xe){var o=ct.formState;if(o!==null){e:{var c=Le;if(Xe){if(fn){t:{for(var m=fn,g=Zr;m.nodeType!==8;){if(!g){m=null;break t}if(m=Nr(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){fn=Nr(m.nextSibling),c=m.data==="F!";break e}}lo(c)}c=!1}c&&(s=o[0])}}return o=jn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cw,lastRenderedState:s},o.queue=c,o=Qw.bind(null,Le,c),c.dispatch=o,c=Xg(!1),g=iy.bind(null,Le,!1,c.queue),c=jn(),m={state:s,dispatch:null,action:i,pending:null},c.queue=m,o=VP.bind(null,Le,m,g,o),m.dispatch=o,c.memoizedState=i,[s,o,!1]}function Pw(i){var s=qt();return Ow(s,ot,i)}function Ow(i,s,o){s=Wg(i,s,Cw)[0],i=Bf(zi)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Yc(s):s;var c=qt(),m=c.queue,g=m.dispatch;return o!==c.memoizedState&&(Le.flags|=2048,Bl(9,kP.bind(null,m,o),{destroy:void 0},null)),[s,g,i]}function kP(i,s){i.action=s}function Nw(i){var s=qt(),o=ot;if(o!==null)return Ow(s,o,i);qt(),s=s.memoizedState,o=qt();var c=o.queue.dispatch;return o.memoizedState=i,[s,c,!1]}function Bl(i,s,o,c){return i={tag:i,create:s,inst:o,deps:c,next:null},s=Le.updateQueue,s===null&&(s=zf(),Le.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(c=o.next,o.next=i,i.next=c,s.lastEffect=i),i}function xw(){return qt().memoizedState}function qf(i,s,o,c){var m=jn();Le.flags|=i,m.memoizedState=Bl(1|s,o,{destroy:void 0},c===void 0?null:c)}function jf(i,s,o,c){var m=qt();c=c===void 0?null:c;var g=m.memoizedState.inst;ot!==null&&c!==null&&jg(c,ot.memoizedState.deps)?m.memoizedState=Bl(s,o,g,c):(Le.flags|=i,m.memoizedState=Bl(1|s,o,g,c))}function Vw(i,s){qf(8390656,8,i,s)}function Jg(i,s){jf(2048,8,i,s)}function kw(i,s){return jf(4,2,i,s)}function Mw(i,s){return jf(4,4,i,s)}function Lw(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Uw(i,s,o){o=o!=null?o.concat([i]):null,jf(4,4,Lw.bind(null,s,i),o)}function ey(){}function zw(i,s){var o=qt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&jg(s,c[1])?c[0]:(o.memoizedState=[i,s],i)}function Fw(i,s){var o=qt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&jg(s,c[1]))return c[0];if(c=i(),ho){Br(!0);try{i()}finally{Br(!1)}}return o.memoizedState=[c,s],c}function ty(i,s,o){return o===void 0||(Fs&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=q0(),Le.lanes|=i,Ys|=i,o)}function Bw(i,s,o,c){return Xn(o,s)?o:Ml.current!==null?(i=ty(i,o,c),Xn(i,s)||(sn=!0),i):(Fs&42)===0?(sn=!0,i.memoizedState=o):(i=q0(),Le.lanes|=i,Ys|=i,s)}function qw(i,s,o,c,m){var g=fe.p;fe.p=g!==0&&8>g?g:8;var T=A.T,b={};A.T=b,iy(i,!1,s,o);try{var D=m(),U=A.S;if(U!==null&&U(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=OP(D,c);Xc(i,s,Z,tr(i))}else Xc(i,s,c,tr(i))}catch(re){Xc(i,s,{then:function(){},status:"rejected",reason:re},tr())}finally{fe.p=g,A.T=T}}function MP(){}function ny(i,s,o,c){if(i.tag!==5)throw Error(r(476));var m=jw(i).queue;qw(i,m,s,Pe,o===null?MP:function(){return Hw(i),o(c)})}function jw(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Pe,baseState:Pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:Pe},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Hw(i){var s=jw(i).next.queue;Xc(i,s,{},tr())}function ry(){return Tn(yh)}function Gw(){return qt().memoizedState}function Kw(){return qt().memoizedState}function LP(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=tr();i=Hs(o);var c=Gs(s,i,o);c!==null&&(Vn(c,s,o),eh(c,s,o)),s={cache:Fg()},i.payload=s;return}s=s.return}}function UP(i,s,o){var c=tr();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Hf(i)?$w(s,o):(o=xg(i,s,o,c),o!==null&&(Vn(o,i,c),Ww(o,s,c)))}function Qw(i,s,o){var c=tr();Xc(i,s,o,c)}function Xc(i,s,o,c){var m={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Hf(i))$w(s,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,b=g(T,o);if(m.hasEagerState=!0,m.eagerState=b,Xn(b,T))return Rf(i,s,m,0),ct===null&&Sf(),!1}catch{}finally{}if(o=xg(i,s,m,c),o!==null)return Vn(o,i,c),Ww(o,s,c),!0}return!1}function iy(i,s,o,c){if(c={lane:2,revertLane:Qy(),action:c,hasEagerState:!1,eagerState:null,next:null},Hf(i)){if(s)throw Error(r(479))}else s=xg(i,o,c,2),s!==null&&Vn(s,i,2)}function Hf(i){var s=i.alternate;return i===Le||s!==null&&s===Le}function $w(i,s){zl=Lf=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function Ww(i,s,o){if((o&4194176)!==0){var c=s.lanes;c&=i.pendingLanes,o|=c,s.lanes=o,Rs(i,o)}}var ei={readContext:Tn,use:Ff,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt};ei.useCacheRefresh=Lt,ei.useMemoCache=Lt,ei.useHostTransitionStatus=Lt,ei.useFormState=Lt,ei.useActionState=Lt,ei.useOptimistic=Lt;var fo={readContext:Tn,use:Ff,useCallback:function(i,s){return jn().memoizedState=[i,s===void 0?null:s],i},useContext:Tn,useEffect:Vw,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,qf(4194308,4,Lw.bind(null,s,i),o)},useLayoutEffect:function(i,s){return qf(4194308,4,i,s)},useInsertionEffect:function(i,s){qf(4,2,i,s)},useMemo:function(i,s){var o=jn();s=s===void 0?null:s;var c=i();if(ho){Br(!0);try{i()}finally{Br(!1)}}return o.memoizedState=[c,s],c},useReducer:function(i,s,o){var c=jn();if(o!==void 0){var m=o(s);if(ho){Br(!0);try{o(s)}finally{Br(!1)}}}else m=s;return c.memoizedState=c.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},c.queue=i,i=i.dispatch=UP.bind(null,Le,i),[c.memoizedState,i]},useRef:function(i){var s=jn();return i={current:i},s.memoizedState=i},useState:function(i){i=Xg(i);var s=i.queue,o=Qw.bind(null,Le,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:ey,useDeferredValue:function(i,s){var o=jn();return ty(o,i,s)},useTransition:function(){var i=Xg(!1);return i=qw.bind(null,Le,i.queue,!0,!1),jn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var c=Le,m=jn();if(Xe){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ct===null)throw Error(r(349));(Qe&60)!==0||_w(c,s,o)}m.memoizedState=o;var g={value:o,getSnapshot:s};return m.queue=g,Vw(Ew.bind(null,c,g,i),[i]),c.flags|=2048,Bl(9,vw.bind(null,c,g,o,s),{destroy:void 0},null),o},useId:function(){var i=jn(),s=ct.identifierPrefix;if(Xe){var o=Li,c=Mi;o=(c&~(1<<32-Pn(c)-1)).toString(32)+o,s=":"+s+"R"+o,o=Uf++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=NP++,s=":"+s+"r"+o.toString(32)+":";return i.memoizedState=s},useCacheRefresh:function(){return jn().memoizedState=LP.bind(null,Le)}};fo.useMemoCache=$g,fo.useHostTransitionStatus=ry,fo.useFormState=Dw,fo.useActionState=Dw,fo.useOptimistic=function(i){var s=jn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=iy.bind(null,Le,!0,o),o.dispatch=s,[i,s]};var Bs={readContext:Tn,use:Ff,useCallback:zw,useContext:Tn,useEffect:Jg,useImperativeHandle:Uw,useInsertionEffect:kw,useLayoutEffect:Mw,useMemo:Fw,useReducer:Bf,useRef:xw,useState:function(){return Bf(zi)},useDebugValue:ey,useDeferredValue:function(i,s){var o=qt();return Bw(o,ot.memoizedState,i,s)},useTransition:function(){var i=Bf(zi)[0],s=qt().memoizedState;return[typeof i=="boolean"?i:Yc(i),s]},useSyncExternalStore:yw,useId:Gw};Bs.useCacheRefresh=Kw,Bs.useMemoCache=$g,Bs.useHostTransitionStatus=ry,Bs.useFormState=Pw,Bs.useActionState=Pw,Bs.useOptimistic=function(i,s){var o=qt();return bw(o,ot,i,s)};var mo={readContext:Tn,use:Ff,useCallback:zw,useContext:Tn,useEffect:Jg,useImperativeHandle:Uw,useInsertionEffect:kw,useLayoutEffect:Mw,useMemo:Fw,useReducer:Yg,useRef:xw,useState:function(){return Yg(zi)},useDebugValue:ey,useDeferredValue:function(i,s){var o=qt();return ot===null?ty(o,i,s):Bw(o,ot.memoizedState,i,s)},useTransition:function(){var i=Yg(zi)[0],s=qt().memoizedState;return[typeof i=="boolean"?i:Yc(i),s]},useSyncExternalStore:yw,useId:Gw};mo.useCacheRefresh=Kw,mo.useMemoCache=$g,mo.useHostTransitionStatus=ry,mo.useFormState=Nw,mo.useActionState=Nw,mo.useOptimistic=function(i,s){var o=qt();return ot!==null?bw(o,ot,i,s):(o.baseState=i,[i,o.queue.dispatch])};function sy(i,s,o,c){s=i.memoizedState,o=o(c,s),o=o==null?s:O({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var ay={isMounted:function(i){return(i=i._reactInternals)?pe(i)===i:!1},enqueueSetState:function(i,s,o){i=i._reactInternals;var c=tr(),m=Hs(c);m.payload=s,o!=null&&(m.callback=o),s=Gs(i,m,c),s!==null&&(Vn(s,i,c),eh(s,i,c))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var c=tr(),m=Hs(c);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=Gs(i,m,c),s!==null&&(Vn(s,i,c),eh(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=tr(),c=Hs(o);c.tag=2,s!=null&&(c.callback=s),s=Gs(i,c,o),s!==null&&(Vn(s,i,o),eh(s,i,o))}};function Yw(i,s,o,c,m,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,T):s.prototype&&s.prototype.isPureReactComponent?!Uc(o,c)||!Uc(m,g):!0}function Xw(i,s,o,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==i&&ay.enqueueReplaceState(s,s.state,null)}function po(i,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(i=i.defaultProps){o===s&&(o=O({},o));for(var m in i)o[m]===void 0&&(o[m]=i[m])}return o}var Gf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Zw(i){Gf(i)}function Jw(i){console.error(i)}function e0(i){Gf(i)}function Kf(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function t0(i,s,o){try{var c=i.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function oy(i,s,o){return o=Hs(o),o.tag=3,o.payload={element:null},o.callback=function(){Kf(i,s)},o}function n0(i){return i=Hs(i),i.tag=3,i}function r0(i,s,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;i.payload=function(){return m(g)},i.callback=function(){t0(s,o,c)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){t0(s,o,c),typeof m!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function zP(i,s,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&Jc(s,o,m,!0),o=yr.current,o!==null){switch(o.tag){case 13:return Jr===null?qy():o.alternate===null&&Pt===0&&(Pt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Lg?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Hy(i,c,m)),!1;case 22:return o.flags|=65536,c===Lg?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Hy(i,c,m)),!1}throw Error(r(435,o.tag))}return Hy(i,c,m),qy(),!1}if(Xe)return s=yr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,c!==Mg&&(i=Error(r(422),{cause:c}),qc(mr(i,o)))):(c!==Mg&&(s=Error(r(423),{cause:c}),qc(mr(s,o))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,c=mr(c,o),m=oy(i.stateNode,c,m),wy(i,m),Pt!==4&&(Pt=2)),!1;var g=Error(r(520),{cause:c});if(g=mr(g,o),lh===null?lh=[g]:lh.push(g),Pt!==4&&(Pt=2),s===null)return!0;c=mr(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=m&-m,o.lanes|=i,i=oy(o.stateNode,c,i),wy(o,i),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Xs===null||!Xs.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=n0(m),r0(m,i,o,c),wy(o,m),!1}o=o.return}while(o!==null);return!1}var i0=Error(r(461)),sn=!1;function mn(i,s,o,c){s.child=i===null?uw(s,null,o,c):uo(s,i.child,o,c)}function s0(i,s,o,c,m){o=o.render;var g=s.ref;if("ref"in c){var T={};for(var b in c)b!=="ref"&&(T[b]=c[b])}else T=c;return yo(s),c=Hg(i,s,o,T,g,m),b=Gg(),i!==null&&!sn?(Kg(i,s,m),Fi(i,s,m)):(Xe&&b&&Vg(s),s.flags|=1,mn(i,s,c,m),s.child)}function a0(i,s,o,c,m){if(i===null){var g=o.type;return typeof g=="function"&&!Py(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,o0(i,s,g,c,m)):(i=Xf(o.type,null,c,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!gy(i,m)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:Uc,o(T,c)&&i.ref===s.ref)return Fi(i,s,m)}return s.flags|=1,i=Ws(g,c),i.ref=s.ref,i.return=s,s.child=i}function o0(i,s,o,c,m){if(i!==null){var g=i.memoizedProps;if(Uc(g,c)&&i.ref===s.ref)if(sn=!1,s.pendingProps=c=g,gy(i,m))(i.flags&131072)!==0&&(sn=!0);else return s.lanes=i.lanes,Fi(i,s,m)}return ly(i,s,o,c,m)}function l0(i,s,o){var c=s.pendingProps,m=c.children,g=(s.stateNode._pendingVisibility&2)!==0,T=i!==null?i.memoizedState:null;if(Zc(i,s),c.mode==="hidden"||g){if((s.flags&128)!==0){if(c=T!==null?T.baseLanes|o:o,i!==null){for(m=s.child=i.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return u0(i,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Mf(s,T!==null?T.cachePool:null),T!==null?cw(s,T):Ug(),hw(s);else return s.lanes=s.childLanes=536870912,u0(i,s,T!==null?T.baseLanes|o:o,o)}else T!==null?(Mf(s,T.cachePool),cw(s,T),zs(),s.memoizedState=null):(i!==null&&Mf(s,null),Ug(),zs());return mn(i,s,m,o),s.child}function u0(i,s,o,c){var m=qg();return m=m===null?null:{parent:Xt._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},i!==null&&Mf(s,null),Ug(),hw(s),i!==null&&Jc(i,s,c,!0),null}function Zc(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=2097664)}}function ly(i,s,o,c,m){return yo(s),o=Hg(i,s,o,c,void 0,m),c=Gg(),i!==null&&!sn?(Kg(i,s,m),Fi(i,s,m)):(Xe&&c&&Vg(s),s.flags|=1,mn(i,s,o,m),s.child)}function c0(i,s,o,c,m,g){return yo(s),s.updateQueue=null,o=gw(s,c,o,m),pw(i),c=Gg(),i!==null&&!sn?(Kg(i,s,g),Fi(i,s,g)):(Xe&&c&&Vg(s),s.flags|=1,mn(i,s,o,g),s.child)}function h0(i,s,o,c,m){if(yo(s),s.stateNode===null){var g=Nl,T=o.contextType;typeof T=="object"&&T!==null&&(g=Tn(T)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ay,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Ey(s),T=o.contextType,g.context=typeof T=="object"&&T!==null?Tn(T):Nl,g.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(sy(s,o,T,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&ay.enqueueReplaceState(g,g.state,null),nh(s,c,g,m),th(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){g=s.stateNode;var b=s.memoizedProps,D=po(o,b);g.props=D;var U=g.context,Z=o.contextType;T=Nl,typeof Z=="object"&&Z!==null&&(T=Tn(Z));var re=o.getDerivedStateFromProps;Z=typeof re=="function"||typeof g.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,Z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b||U!==T)&&Xw(s,g,c,T),js=!1;var G=s.memoizedState;g.state=G,nh(s,c,g,m),th(),U=s.memoizedState,b||G!==U||js?(typeof re=="function"&&(sy(s,o,re,c),U=s.memoizedState),(D=js||Yw(s,o,D,c,G,U,T))?(Z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=U),g.props=c,g.state=U,g.context=T,c=D):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,Ty(i,s),T=s.memoizedProps,Z=po(o,T),g.props=Z,re=s.pendingProps,G=g.context,U=o.contextType,D=Nl,typeof U=="object"&&U!==null&&(D=Tn(U)),b=o.getDerivedStateFromProps,(U=typeof b=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==re||G!==D)&&Xw(s,g,c,D),js=!1,G=s.memoizedState,g.state=G,nh(s,c,g,m),th();var X=s.memoizedState;T!==re||G!==X||js||i!==null&&i.dependencies!==null&&Qf(i.dependencies)?(typeof b=="function"&&(sy(s,o,b,c),X=s.memoizedState),(Z=js||Yw(s,o,Z,c,G,X,D)||i!==null&&i.dependencies!==null&&Qf(i.dependencies))?(U||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,X,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,X,D)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=X),g.props=c,g.state=X,g.context=D,c=Z):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),c=!1)}return g=c,Zc(i,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&c?(s.child=uo(s,i.child,null,m),s.child=uo(s,null,o,m)):mn(i,s,o,m),s.memoizedState=g.state,i=s.child):i=Fi(i,s,m),i}function d0(i,s,o,c){return Bc(),s.flags|=256,mn(i,s,o,c),s.child}var uy={dehydrated:null,treeContext:null,retryLane:0};function cy(i){return{baseLanes:i,cachePool:mw()}}function hy(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=Tr),i}function f0(i,s,o){var c=s.pendingProps,m=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:(Yt.current&2)!==0),T&&(m=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(Xe){if(m?Us(s):zs(),Xe){var b=fn,D;if(D=b){e:{for(D=b,b=Zr;D.nodeType!==8;){if(!b){b=null;break e}if(D=Nr(D.nextSibling),D===null){b=null;break e}}b=D}b!==null?(s.memoizedState={dehydrated:b,treeContext:ao!==null?{id:Mi,overflow:Li}:null,retryLane:536870912},D=Er(18,null,null,0),D.stateNode=b,D.return=s,s.child=D,xn=s,fn=null,D=!0):D=!1}D||lo(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return b.data==="$!"?s.lanes=16:s.lanes=536870912,null;Ui(s)}return b=c.children,c=c.fallback,m?(zs(),m=s.mode,b=fy({mode:"hidden",children:b},m),c=vo(c,m,o,null),b.return=s,c.return=s,b.sibling=c,s.child=b,m=s.child,m.memoizedState=cy(o),m.childLanes=hy(i,T,o),s.memoizedState=uy,c):(Us(s),dy(s,b))}if(D=i.memoizedState,D!==null&&(b=D.dehydrated,b!==null)){if(g)s.flags&256?(Us(s),s.flags&=-257,s=my(i,s,o)):s.memoizedState!==null?(zs(),s.child=i.child,s.flags|=128,s=null):(zs(),m=c.fallback,b=s.mode,c=fy({mode:"visible",children:c.children},b),m=vo(m,b,o,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,uo(s,i.child,null,o),c=s.child,c.memoizedState=cy(o),c.childLanes=hy(i,T,o),s.memoizedState=uy,s=m);else if(Us(s),b.data==="$!"){if(T=b.nextSibling&&b.nextSibling.dataset,T)var U=T.dgst;T=U,c=Error(r(419)),c.stack="",c.digest=T,qc({value:c,source:null,stack:null}),s=my(i,s,o)}else if(sn||Jc(i,s,o,!1),T=(o&i.childLanes)!==0,sn||T){if(T=ct,T!==null){if(c=o&-o,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(T.suspendedLanes|o))!==0?0:c,c!==0&&c!==D.retryLane)throw D.retryLane=c,Ls(i,c),Vn(T,i,c),i0}b.data==="$?"||qy(),s=my(i,s,o)}else b.data==="$?"?(s.flags|=128,s.child=i.child,s=eO.bind(null,i),b._reactRetry=s,s=null):(i=D.treeContext,fn=Nr(b.nextSibling),xn=s,Xe=!0,Pr=null,Zr=!1,i!==null&&(pr[gr++]=Mi,pr[gr++]=Li,pr[gr++]=ao,Mi=i.id,Li=i.overflow,ao=s),s=dy(s,c.children),s.flags|=4096);return s}return m?(zs(),m=c.fallback,b=s.mode,D=i.child,U=D.sibling,c=Ws(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&31457280,U!==null?m=Ws(U,m):(m=vo(m,b,o,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,b=i.child.memoizedState,b===null?b=cy(o):(D=b.cachePool,D!==null?(U=Xt._currentValue,D=D.parent!==U?{parent:U,pool:U}:D):D=mw(),b={baseLanes:b.baseLanes|o,cachePool:D}),m.memoizedState=b,m.childLanes=hy(i,T,o),s.memoizedState=uy,c):(Us(s),o=i.child,i=o.sibling,o=Ws(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=o,s.memoizedState=null,o)}function dy(i,s){return s=fy({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function fy(i,s){return z0(i,s,0,null)}function my(i,s,o){return uo(s,i.child,null,o),i=dy(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function m0(i,s,o){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),_y(i.return,s,o)}function py(i,s,o,c,m){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=m)}function p0(i,s,o){var c=s.pendingProps,m=c.revealOrder,g=c.tail;if(mn(i,s,c.children,o),c=Yt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&m0(i,o,s);else if(i.tag===19)m0(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(rt(Yt,c),m){case"forwards":for(o=s.child,m=null;o!==null;)i=o.alternate,i!==null&&kf(i)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),py(s,!1,m,o,g);break;case"backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&kf(i)===null){s.child=m;break}i=m.sibling,m.sibling=o,o=m,m=i}py(s,!0,o,null,g);break;case"together":py(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Fi(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),Ys|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(Jc(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=Ws(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Ws(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function gy(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Qf(i)))}function FP(i,s,o){switch(s.tag){case 3:Ts(s,s.stateNode.containerInfo),qs(s,Xt,i.memoizedState.cache),Bc();break;case 27:case 5:yc(s);break;case 4:Ts(s,s.stateNode.containerInfo);break;case 10:qs(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Us(s),s.flags|=128,null):(o&s.child.childLanes)!==0?f0(i,s,o):(Us(s),i=Fi(i,s,o),i!==null?i.sibling:null);Us(s);break;case 19:var m=(i.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(Jc(i,s,o,!1),c=(o&s.childLanes)!==0),m){if(c)return p0(i,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),rt(Yt,Yt.current),c)break;return null;case 22:case 23:return s.lanes=0,l0(i,s,o);case 24:qs(s,Xt,i.memoizedState.cache)}return Fi(i,s,o)}function g0(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)sn=!0;else{if(!gy(i,o)&&(s.flags&128)===0)return sn=!1,FP(i,s,o);sn=(i.flags&131072)!==0}else sn=!1,Xe&&(s.flags&1048576)!==0&&ew(s,Pf,s.index);switch(s.lanes=0,s.tag){case 16:e:{i=s.pendingProps;var c=s.elementType,m=c._init;if(c=m(c._payload),s.type=c,typeof c=="function")Py(c)?(i=po(c,i),s.tag=1,s=h0(null,s,c,i,o)):(s.tag=0,s=ly(null,s,c,i,o));else{if(c!=null){if(m=c.$$typeof,m===C){s.tag=11,s=s0(null,s,c,i,o);break e}else if(m===z){s.tag=14,s=a0(null,s,c,i,o);break e}}throw s=S(c)||c,Error(r(306,s,""))}}return s;case 0:return ly(i,s,s.type,s.pendingProps,o);case 1:return c=s.type,m=po(c,s.pendingProps),h0(i,s,c,m,o);case 3:e:{if(Ts(s,s.stateNode.containerInfo),i===null)throw Error(r(387));var g=s.pendingProps;m=s.memoizedState,c=m.element,Ty(i,s),nh(s,g,null,o);var T=s.memoizedState;if(g=T.cache,qs(s,Xt,g),g!==m.cache&&vy(s,[Xt],o,!0),th(),g=T.element,m.isDehydrated)if(m={element:g,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=d0(i,s,g,o);break e}else if(g!==c){c=mr(Error(r(424)),s),qc(c),s=d0(i,s,g,o);break e}else for(fn=Nr(s.stateNode.containerInfo.firstChild),xn=s,Xe=!0,Pr=null,Zr=!0,o=uw(s,null,g,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Bc(),g===c){s=Fi(i,s,o);break e}mn(i,s,g,o)}s=s.child}return s;case 26:return Zc(i,s),i===null?(o=vb(s.type,null,s.pendingProps,null))?s.memoizedState=o:Xe||(o=s.type,i=s.pendingProps,c=um(ar.current).createElement(o),c[tn]=s,c[Qt]=i,pn(c,o,i),Et(c),s.stateNode=c):s.memoizedState=vb(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return yc(s),i===null&&Xe&&(c=s.stateNode=gb(s.type,s.pendingProps,ar.current),xn=s,Zr=!0,fn=Nr(c.firstChild)),c=s.pendingProps.children,i!==null||Xe?mn(i,s,c,o):s.child=uo(s,null,c,o),Zc(i,s),s.child;case 5:return i===null&&Xe&&((m=c=fn)&&(c=gO(c,s.type,s.pendingProps,Zr),c!==null?(s.stateNode=c,xn=s,fn=Nr(c.firstChild),Zr=!1,m=!0):m=!1),m||lo(s)),yc(s),m=s.type,g=s.pendingProps,T=i!==null?i.memoizedProps:null,c=g.children,n_(m,g)?c=null:T!==null&&n_(m,T)&&(s.flags|=32),s.memoizedState!==null&&(m=Hg(i,s,xP,null,null,o),yh._currentValue=m),Zc(i,s),mn(i,s,c,o),s.child;case 6:return i===null&&Xe&&((i=o=fn)&&(o=yO(o,s.pendingProps,Zr),o!==null?(s.stateNode=o,xn=s,fn=null,i=!0):i=!1),i||lo(s)),null;case 13:return f0(i,s,o);case 4:return Ts(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=uo(s,null,c,o):mn(i,s,c,o),s.child;case 11:return s0(i,s,s.type,s.pendingProps,o);case 7:return mn(i,s,s.pendingProps,o),s.child;case 8:return mn(i,s,s.pendingProps.children,o),s.child;case 12:return mn(i,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,qs(s,s.type,c.value),mn(i,s,c.children,o),s.child;case 9:return m=s.type._context,c=s.pendingProps.children,yo(s),m=Tn(m),c=c(m),s.flags|=1,mn(i,s,c,o),s.child;case 14:return a0(i,s,s.type,s.pendingProps,o);case 15:return o0(i,s,s.type,s.pendingProps,o);case 19:return p0(i,s,o);case 22:return l0(i,s,o);case 24:return yo(s),c=Tn(Xt),i===null?(m=qg(),m===null&&(m=ct,g=Fg(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),s.memoizedState={parent:c,cache:m},Ey(s),qs(s,Xt,m)):((i.lanes&o)!==0&&(Ty(i,s),nh(s,null,null,o),th()),m=i.memoizedState,g=s.memoizedState,m.parent!==c?(m={parent:c,cache:c},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),qs(s,Xt,c)):(c=g.cache,qs(s,Xt,c),c!==m.cache&&vy(s,[Xt],o,!0))),mn(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}var yy=We(null),go=null,Bi=null;function qs(i,s,o){rt(yy,s._currentValue),s._currentValue=o}function qi(i){i._currentValue=yy.current,Rt(yy)}function _y(i,s,o){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===o)break;i=i.return}}function vy(i,s,o,c){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var T=m.child;g=g.firstContext;e:for(;g!==null;){var b=g;g=m;for(var D=0;D<s.length;D++)if(b.context===s[D]){g.lanes|=o,b=g.alternate,b!==null&&(b.lanes|=o),_y(g.return,o,i),c||(T=null);break e}g=b.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(r(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),_y(T,o,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Jc(i,s,o,c){i=null;for(var m=s,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var b=m.type;Xn(m.pendingProps.value,T.value)||(i!==null?i.push(b):i=[b])}}else if(m===Es.current){if(T=m.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(yh):i=[yh])}m=m.return}i!==null&&vy(s,i,o,c),s.flags|=262144}function Qf(i){for(i=i.firstContext;i!==null;){if(!Xn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function yo(i){go=i,Bi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Tn(i){return y0(go,i)}function $f(i,s){return go===null&&yo(i),y0(i,s)}function y0(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Bi===null){if(i===null)throw Error(r(308));Bi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Bi=Bi.next=s;return o}var js=!1;function Ey(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ty(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Hs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Gs(i,s,o){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(wt&2)!==0){var m=c.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),c.pending=s,s=Cf(i),ZT(i,null,o),s}return Rf(i,c,s,o),Cf(i)}function eh(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194176)!==0)){var c=s.lanes;c&=i.pendingLanes,o|=c,s.lanes=o,Rs(i,o)}}function wy(i,s){var o=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?m=g=s:g=g.next=s}else m=g=s;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var by=!1;function th(){if(by){var i=Ul;if(i!==null)throw i}}function nh(i,s,o,c){by=!1;var m=i.updateQueue;js=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,b=m.shared.pending;if(b!==null){m.shared.pending=null;var D=b,U=D.next;D.next=null,T===null?g=U:T.next=U,T=D;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==T&&(b===null?Z.firstBaseUpdate=U:b.next=U,Z.lastBaseUpdate=D))}if(g!==null){var re=m.baseState;T=0,Z=U=D=null,b=g;do{var G=b.lane&-536870913,X=G!==b.lane;if(X?(Qe&G)===G:(c&G)===G){G!==0&&G===Ll&&(by=!0),Z!==null&&(Z=Z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var we=i,xe=b;G=s;var Ot=o;switch(xe.tag){case 1:if(we=xe.payload,typeof we=="function"){re=we.call(Ot,re,G);break e}re=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=xe.payload,G=typeof we=="function"?we.call(Ot,re,G):we,G==null)break e;re=O({},re,G);break e;case 2:js=!0}}G=b.callback,G!==null&&(i.flags|=64,X&&(i.flags|=8192),X=m.callbacks,X===null?m.callbacks=[G]:X.push(G))}else X={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?(U=Z=X,D=re):Z=Z.next=X,T|=G;if(b=b.next,b===null){if(b=m.shared.pending,b===null)break;X=b,b=X.next,X.next=null,m.lastBaseUpdate=X,m.shared.pending=null}}while(!0);Z===null&&(D=re),m.baseState=D,m.firstBaseUpdate=U,m.lastBaseUpdate=Z,g===null&&(m.shared.lanes=0),Ys|=T,i.lanes=T,i.memoizedState=re}}function _0(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function v0(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)_0(o[i],s)}function rh(i,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&i)===i){c=void 0;var g=o.create,T=o.inst;c=g(),T.destroy=c}o=o.next}while(o!==m)}}catch(b){ut(s,s.return,b)}}function Ks(i,s,o){try{var c=s.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&i)===i){var T=c.inst,b=T.destroy;if(b!==void 0){T.destroy=void 0,m=s;var D=o;try{b()}catch(U){ut(m,D,U)}}}c=c.next}while(c!==g)}}catch(U){ut(s,s.return,U)}}function E0(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{v0(s,o)}catch(c){ut(i,i.return,c)}}}function T0(i,s,o){o.props=po(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(c){ut(i,s,c)}}function _o(i,s){try{var o=i.ref;if(o!==null){var c=i.stateNode;switch(i.tag){case 26:case 27:case 5:var m=c;break;default:m=c}typeof o=="function"?i.refCleanup=o(m):o.current=m}}catch(g){ut(i,s,g)}}function Zn(i,s){var o=i.ref,c=i.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){ut(i,s,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){ut(i,s,m)}else o.current=null}function w0(i){var s=i.type,o=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){ut(i,i.return,m)}}function b0(i,s,o){try{var c=i.stateNode;hO(c,i.type,o,s),c[Qt]=s}catch(m){ut(i,i.return,m)}}function I0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Iy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||I0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ay(i,s,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(i,s):o.insertBefore(i,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(i,o)):(s=o,s.appendChild(i)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=lm));else if(c!==4&&c!==27&&(i=i.child,i!==null))for(Ay(i,s,o),i=i.sibling;i!==null;)Ay(i,s,o),i=i.sibling}function Wf(i,s,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(c!==4&&c!==27&&(i=i.child,i!==null))for(Wf(i,s,o),i=i.sibling;i!==null;)Wf(i,s,o),i=i.sibling}var ji=!1,Dt=!1,Sy=!1,A0=typeof WeakSet=="function"?WeakSet:Set,an=null,S0=!1;function BP(i,s){if(i=i.containerInfo,e_=pm,i=jT(i),Cg(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var T=0,b=-1,D=-1,U=0,Z=0,re=i,G=null;t:for(;;){for(var X;re!==o||m!==0&&re.nodeType!==3||(b=T+m),re!==g||c!==0&&re.nodeType!==3||(D=T+c),re.nodeType===3&&(T+=re.nodeValue.length),(X=re.firstChild)!==null;)G=re,re=X;for(;;){if(re===i)break t;if(G===o&&++U===m&&(b=T),G===g&&++Z===c&&(D=T),(X=re.nextSibling)!==null)break;re=G,G=re.parentNode}re=X}o=b===-1||D===-1?null:{start:b,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(t_={focusedElem:i,selectionRange:o},pm=!1,an=s;an!==null;)if(s=an,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,an=i;else for(;an!==null;){switch(s=an,g=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=s,m=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var we=po(o.type,m,o.elementType===o.type);i=c.getSnapshotBeforeUpdate(we,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(xe){ut(o,o.return,xe)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)s_(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":s_(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,an=i;break}an=s.return}return we=S0,S0=!1,we}function R0(i,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Gi(i,o),c&4&&rh(5,o);break;case 1:if(Gi(i,o),c&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(b){ut(o,o.return,b)}else{var m=po(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(m,s,i.__reactInternalSnapshotBeforeUpdate)}catch(b){ut(o,o.return,b)}}c&64&&E0(o),c&512&&_o(o,o.return);break;case 3:if(Gi(i,o),c&64&&(c=o.updateQueue,c!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{v0(c,i)}catch(b){ut(o,o.return,b)}}break;case 26:Gi(i,o),c&512&&_o(o,o.return);break;case 27:case 5:Gi(i,o),s===null&&c&4&&w0(o),c&512&&_o(o,o.return);break;case 12:Gi(i,o);break;case 13:Gi(i,o),c&4&&P0(i,o);break;case 22:if(m=o.memoizedState!==null||ji,!m){s=s!==null&&s.memoizedState!==null||Dt;var g=ji,T=Dt;ji=m,(Dt=s)&&!T?Qs(i,o,(o.subtreeFlags&8772)!==0):Gi(i,o),ji=g,Dt=T}c&512&&(o.memoizedProps.mode==="manual"?_o(o,o.return):Zn(o,o.return));break;default:Gi(i,o)}}function C0(i){var s=i.alternate;s!==null&&(i.alternate=null,C0(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Qa(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var jt=null,Jn=!1;function Hi(i,s,o){for(o=o.child;o!==null;)D0(i,s,o),o=o.sibling}function D0(i,s,o){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(ws,o)}catch{}switch(o.tag){case 26:Dt||Zn(o,s),Hi(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Dt||Zn(o,s);var c=jt,m=Jn;for(jt=o.stateNode,Hi(i,s,o),o=o.stateNode,s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Qa(o),jt=c,Jn=m;break;case 5:Dt||Zn(o,s);case 6:m=jt;var g=Jn;if(jt=null,Hi(i,s,o),jt=m,Jn=g,jt!==null)if(Jn)try{i=jt,c=o.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)}catch(T){ut(o,s,T)}else try{jt.removeChild(o.stateNode)}catch(T){ut(o,s,T)}break;case 18:jt!==null&&(Jn?(s=jt,o=o.stateNode,s.nodeType===8?i_(s.parentNode,o):s.nodeType===1&&i_(s,o),Th(s)):i_(jt,o.stateNode));break;case 4:c=jt,m=Jn,jt=o.stateNode.containerInfo,Jn=!0,Hi(i,s,o),jt=c,Jn=m;break;case 0:case 11:case 14:case 15:Dt||Ks(2,o,s),Dt||Ks(4,o,s),Hi(i,s,o);break;case 1:Dt||(Zn(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&T0(o,s,c)),Hi(i,s,o);break;case 21:Hi(i,s,o);break;case 22:Dt||Zn(o,s),Dt=(c=Dt)||o.memoizedState!==null,Hi(i,s,o),Dt=c;break;default:Hi(i,s,o)}}function P0(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Th(i)}catch(o){ut(s,s.return,o)}}function qP(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new A0),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new A0),s;default:throw Error(r(435,i.tag))}}function Ry(i,s){var o=qP(i);s.forEach(function(c){var m=tO.bind(null,i,c);o.has(c)||(o.add(c),c.then(m,m))})}function _r(i,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],g=i,T=s,b=T;e:for(;b!==null;){switch(b.tag){case 27:case 5:jt=b.stateNode,Jn=!1;break e;case 3:jt=b.stateNode.containerInfo,Jn=!0;break e;case 4:jt=b.stateNode.containerInfo,Jn=!0;break e}b=b.return}if(jt===null)throw Error(r(160));D0(g,T,m),jt=null,Jn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)O0(s,i),s=s.sibling}var Or=null;function O0(i,s){var o=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:_r(s,i),vr(i),c&4&&(Ks(3,i,i.return),rh(3,i),Ks(5,i,i.return));break;case 1:_r(s,i),vr(i),c&512&&(Dt||o===null||Zn(o,o.return)),c&64&&ji&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=Or;if(_r(s,i),vr(i),c&512&&(Dt||o===null||Zn(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=i.memoizedState,o===null)if(c===null)if(i.stateNode===null){e:{c=i.type,o=i.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Ds]||g[tn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),pn(g,c,o),g[tn]=i,Et(g),c=g;break e;case"link":var T=wb("link","href",m).get(c+(o.href||""));if(T){for(var b=0;b<T.length;b++)if(g=T[b],g.getAttribute("href")===(o.href==null?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(b,1);break t}}g=m.createElement(c),pn(g,c,o),m.head.appendChild(g);break;case"meta":if(T=wb("meta","content",m).get(c+(o.content||""))){for(b=0;b<T.length;b++)if(g=T[b],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(b,1);break t}}g=m.createElement(c),pn(g,c,o),m.head.appendChild(g);break;default:throw Error(r(468,c))}g[tn]=i,Et(g),c=g}i.stateNode=c}else bb(m,i.type,i.stateNode);else i.stateNode=Tb(m,c,i.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?bb(m,i.type,i.stateNode):Tb(m,c,i.memoizedProps)):c===null&&i.stateNode!==null&&b0(i,i.memoizedProps,o.memoizedProps)}break;case 27:if(c&4&&i.alternate===null){m=i.stateNode,g=i.memoizedProps;try{for(var D=m.firstChild;D;){var U=D.nextSibling,Z=D.nodeName;D[Ds]||Z==="HEAD"||Z==="BODY"||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&D.rel.toLowerCase()==="stylesheet"||m.removeChild(D),D=U}for(var re=i.type,G=m.attributes;G.length;)m.removeAttributeNode(G[0]);pn(m,re,g),m[tn]=i,m[Qt]=g}catch(we){ut(i,i.return,we)}}case 5:if(_r(s,i),vr(i),c&512&&(Dt||o===null||Zn(o,o.return)),i.flags&32){m=i.stateNode;try{ur(m,"")}catch(we){ut(i,i.return,we)}}c&4&&i.stateNode!=null&&(m=i.memoizedProps,b0(i,m,o!==null?o.memoizedProps:m)),c&1024&&(Sy=!0);break;case 6:if(_r(s,i),vr(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,o=i.stateNode;try{o.nodeValue=c}catch(we){ut(i,i.return,we)}}break;case 3:if(dm=null,m=Or,Or=cm(s.containerInfo),_r(s,i),Or=m,vr(i),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Th(s.containerInfo)}catch(we){ut(i,i.return,we)}Sy&&(Sy=!1,N0(i));break;case 4:c=Or,Or=cm(i.stateNode.containerInfo),_r(s,i),vr(i),Or=c;break;case 12:_r(s,i),vr(i);break;case 13:_r(s,i),vr(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(My=Bn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Ry(i,c)));break;case 22:if(c&512&&(Dt||o===null||Zn(o,o.return)),D=i.memoizedState!==null,U=o!==null&&o.memoizedState!==null,Z=ji,re=Dt,ji=Z||D,Dt=re||U,_r(s,i),Dt=re,ji=Z,vr(i),s=i.stateNode,s._current=i,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,c&8192&&(s._visibility=D?s._visibility&-2:s._visibility|1,D&&(s=ji||Dt,o===null||U||s||ql(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(o=null,s=i;;){if(s.tag===5||s.tag===26||s.tag===27){if(o===null){U=o=s;try{if(m=U.stateNode,D)g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{T=U.stateNode,b=U.memoizedProps.style;var X=b!=null&&b.hasOwnProperty("display")?b.display:null;T.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(we){ut(U,U.return,we)}}}else if(s.tag===6){if(o===null){U=s;try{U.stateNode.nodeValue=D?"":U.memoizedProps}catch(we){ut(U,U.return,we)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Ry(i,o))));break;case 19:_r(s,i),vr(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Ry(i,c)));break;case 21:break;default:_r(s,i),vr(i)}}function vr(i){var s=i.flags;if(s&2){try{if(i.tag!==27){e:{for(var o=i.return;o!==null;){if(I0(o)){var c=o;break e}o=o.return}throw Error(r(160))}switch(c.tag){case 27:var m=c.stateNode,g=Iy(i);Wf(i,g,m);break;case 5:var T=c.stateNode;c.flags&32&&(ur(T,""),c.flags&=-33);var b=Iy(i);Wf(i,b,T);break;case 3:case 4:var D=c.stateNode.containerInfo,U=Iy(i);Ay(i,U,D);break;default:throw Error(r(161))}}}catch(Z){ut(i,i.return,Z)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function N0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;N0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Gi(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)R0(i,s.alternate,s),s=s.sibling}function ql(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Ks(4,s,s.return),ql(s);break;case 1:Zn(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&T0(s,s.return,o),ql(s);break;case 26:case 27:case 5:Zn(s,s.return),ql(s);break;case 22:Zn(s,s.return),s.memoizedState===null&&ql(s);break;default:ql(s)}i=i.sibling}}function Qs(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,m=i,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:Qs(m,g,o),rh(4,g);break;case 1:if(Qs(m,g,o),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(U){ut(c,c.return,U)}if(c=g,m=c.updateQueue,m!==null){var b=c.stateNode;try{var D=m.shared.hiddenCallbacks;if(D!==null)for(m.shared.hiddenCallbacks=null,m=0;m<D.length;m++)_0(D[m],b)}catch(U){ut(c,c.return,U)}}o&&T&64&&E0(g),_o(g,g.return);break;case 26:case 27:case 5:Qs(m,g,o),o&&c===null&&T&4&&w0(g),_o(g,g.return);break;case 12:Qs(m,g,o);break;case 13:Qs(m,g,o),o&&T&4&&P0(m,g);break;case 22:g.memoizedState===null&&Qs(m,g,o),_o(g,g.return);break;default:Qs(m,g,o)}s=s.sibling}}function Cy(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Qc(o))}function Dy(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Qc(i))}function $s(i,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)x0(i,s,o,c),s=s.sibling}function x0(i,s,o,c){var m=s.flags;switch(s.tag){case 0:case 11:case 15:$s(i,s,o,c),m&2048&&rh(9,s);break;case 3:$s(i,s,o,c),m&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Qc(i)));break;case 12:if(m&2048){$s(i,s,o,c),i=s.stateNode;try{var g=s.memoizedProps,T=g.id,b=g.onPostCommit;typeof b=="function"&&b(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(D){ut(s,s.return,D)}}else $s(i,s,o,c);break;case 23:break;case 22:g=s.stateNode,s.memoizedState!==null?g._visibility&4?$s(i,s,o,c):ih(i,s):g._visibility&4?$s(i,s,o,c):(g._visibility|=4,jl(i,s,o,c,(s.subtreeFlags&10256)!==0)),m&2048&&Cy(s.alternate,s);break;case 24:$s(i,s,o,c),m&2048&&Dy(s.alternate,s);break;default:$s(i,s,o,c)}}function jl(i,s,o,c,m){for(m=m&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=i,T=s,b=o,D=c,U=T.flags;switch(T.tag){case 0:case 11:case 15:jl(g,T,b,D,m),rh(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&4?jl(g,T,b,D,m):ih(g,T):(Z._visibility|=4,jl(g,T,b,D,m)),m&&U&2048&&Cy(T.alternate,T);break;case 24:jl(g,T,b,D,m),m&&U&2048&&Dy(T.alternate,T);break;default:jl(g,T,b,D,m)}s=s.sibling}}function ih(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,c=s,m=c.flags;switch(c.tag){case 22:ih(o,c),m&2048&&Cy(c.alternate,c);break;case 24:ih(o,c),m&2048&&Dy(c.alternate,c);break;default:ih(o,c)}s=s.sibling}}var sh=8192;function Hl(i){if(i.subtreeFlags&sh)for(i=i.child;i!==null;)V0(i),i=i.sibling}function V0(i){switch(i.tag){case 26:Hl(i),i.flags&sh&&i.memoizedState!==null&&PO(Or,i.memoizedState,i.memoizedProps);break;case 5:Hl(i);break;case 3:case 4:var s=Or;Or=cm(i.stateNode.containerInfo),Hl(i),Or=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=sh,sh=16777216,Hl(i),sh=s):Hl(i));break;default:Hl(i)}}function k0(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function ah(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];an=c,L0(c,i)}k0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)M0(i),i=i.sibling}function M0(i){switch(i.tag){case 0:case 11:case 15:ah(i),i.flags&2048&&Ks(9,i,i.return);break;case 3:ah(i);break;case 12:ah(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&4&&(i.return===null||i.return.tag!==13)?(s._visibility&=-5,Yf(i)):ah(i);break;default:ah(i)}}function Yf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];an=c,L0(c,i)}k0(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Ks(8,s,s.return),Yf(s);break;case 22:o=s.stateNode,o._visibility&4&&(o._visibility&=-5,Yf(s));break;default:Yf(s)}i=i.sibling}}function L0(i,s){for(;an!==null;){var o=an;switch(o.tag){case 0:case 11:case 15:Ks(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Qc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,an=c;else e:for(o=i;an!==null;){c=an;var m=c.sibling,g=c.return;if(C0(c),c===o){an=null;break e}if(m!==null){m.return=g,an=m;break e}an=g}}}function jP(i,s,o,c){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(i,s,o,c){return new jP(i,s,o,c)}function Py(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ws(i,s){var o=i.alternate;return o===null?(o=Er(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&31457280,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function U0(i,s){i.flags&=31457282;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Xf(i,s,o,c,m,g){var T=0;if(c=i,typeof i=="function")Py(i)&&(T=1);else if(typeof i=="string")T=CO(i,o,Dn.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case f:return vo(o.children,m,g,s);case p:T=8,m|=24;break;case _:return i=Er(12,o,s,m|2),i.elementType=_,i.lanes=g,i;case N:return i=Er(13,o,s,m),i.elementType=N,i.lanes=g,i;case V:return i=Er(19,o,s,m),i.elementType=V,i.lanes=g,i;case K:return z0(o,m,g,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case v:case R:T=10;break e;case w:T=9;break e;case C:T=11;break e;case z:T=14;break e;case Y:T=16,c=null;break e}T=29,o=Error(r(130,i===null?"null":typeof i,"")),c=null}return s=Er(T,o,s,m),s.elementType=i,s.type=c,s.lanes=g,s}function vo(i,s,o,c){return i=Er(7,i,c,s),i.lanes=o,i}function z0(i,s,o,c){i=Er(22,i,c,s),i.elementType=K,i.lanes=o;var m={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=m._current;if(g===null)throw Error(r(456));if((m._pendingVisibility&2)===0){var T=Ls(g,2);T!==null&&(m._pendingVisibility|=2,Vn(T,g,2))}},attach:function(){var g=m._current;if(g===null)throw Error(r(456));if((m._pendingVisibility&2)!==0){var T=Ls(g,2);T!==null&&(m._pendingVisibility&=-3,Vn(T,g,2))}}};return i.stateNode=m,i}function Oy(i,s,o){return i=Er(6,i,null,s),i.lanes=o,i}function Ny(i,s,o){return s=Er(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function Ki(i){i.flags|=4}function F0(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Ib(s)){if(s=yr.current,s!==null&&((Qe&4194176)===Qe?Jr!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||s!==Jr))throw Hc=Lg,rw;i.flags|=8192}}function Zf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?As():536870912,i.lanes|=s,Kl|=s)}function oh(i,s){if(!Xe)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Tt(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,c=0;if(s)for(var m=i.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&31457280,c|=m.flags&31457280,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=c,i.childLanes=o,s}function HP(i,s,o){var c=s.pendingProps;switch(kg(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Tt(s),null;case 3:return o=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),qi(Xt),Ai(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Fc(s)?Ki(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Pr!==null&&(Fy(Pr),Pr=null))),Tt(s),null;case 26:return o=s.memoizedState,i===null?(Ki(s),o!==null?(Tt(s),F0(s,o)):(Tt(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Ki(s),Tt(s),F0(s,o)):(Tt(s),s.flags&=-16777217):(i.memoizedProps!==c&&Ki(s),Tt(s),s.flags&=-16777217),null;case 27:hl(s),o=ar.current;var m=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==c&&Ki(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}i=Dn.current,Fc(s)?tw(s):(i=gb(m,c,o),s.stateNode=i,Ki(s))}return Tt(s),null;case 5:if(hl(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&Ki(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}if(i=Dn.current,Fc(s))tw(s);else{switch(m=um(ar.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?m.createElement(o,{is:c.is}):m.createElement(o)}}i[tn]=s,i[Qt]=c;e:for(m=s.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break e;for(;m.sibling===null;){if(m.return===null||m.return===s)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}s.stateNode=i;e:switch(pn(i,o,c),o){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ki(s)}}return Tt(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&Ki(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(i=ar.current,Fc(s)){if(i=s.stateNode,o=s.memoizedProps,c=null,m=xn,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}i[tn]=s,i=!!(i.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||cb(i.nodeValue,o)),i||lo(s)}else i=um(i).createTextNode(c),i[tn]=s,s.stateNode=i}return Tt(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Fc(s),c!==null&&c.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[tn]=s}else Bc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),m=!1}else Pr!==null&&(Fy(Pr),Pr=null),m=!0;if(!m)return s.flags&256?(Ui(s),s):(Ui(s),null)}if(Ui(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,i=i!==null&&i.memoizedState!==null,o){c=s.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),Zf(s,s.updateQueue),Tt(s),null;case 4:return Ai(),i===null&&Xy(s.stateNode.containerInfo),Tt(s),null;case 10:return qi(s.type),Tt(s),null;case 19:if(Rt(Yt),m=s.memoizedState,m===null)return Tt(s),null;if(c=(s.flags&128)!==0,g=m.rendering,g===null)if(c)oh(m,!1);else{if(Pt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=kf(i),g!==null){for(s.flags|=128,oh(m,!1),i=g.updateQueue,s.updateQueue=i,Zf(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)U0(o,i),o=o.sibling;return rt(Yt,Yt.current&1|2),s.child}i=i.sibling}m.tail!==null&&Bn()>Jf&&(s.flags|=128,c=!0,oh(m,!1),s.lanes=4194304)}else{if(!c)if(i=kf(g),i!==null){if(s.flags|=128,c=!0,i=i.updateQueue,s.updateQueue=i,Zf(s,i),oh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!Xe)return Tt(s),null}else 2*Bn()-m.renderingStartTime>Jf&&o!==536870912&&(s.flags|=128,c=!0,oh(m,!1),s.lanes=4194304);m.isBackwards?(g.sibling=s.child,s.child=g):(i=m.last,i!==null?i.sibling=g:s.child=g,m.last=g)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Bn(),s.sibling=null,i=Yt.current,rt(Yt,c?i&1|2:i&1),s):(Tt(s),null);case 22:case 23:return Ui(s),zg(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),o=s.updateQueue,o!==null&&Zf(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),i!==null&&Rt(co),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),qi(Xt),Tt(s),null;case 25:return null}throw Error(r(156,s.tag))}function GP(i,s){switch(kg(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return qi(Xt),Ai(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return hl(s),null;case 13:if(Ui(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Bc()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Rt(Yt),null;case 4:return Ai(),null;case 10:return qi(s.type),null;case 22:case 23:return Ui(s),zg(),i!==null&&Rt(co),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return qi(Xt),null;case 25:return null;default:return null}}function B0(i,s){switch(kg(s),s.tag){case 3:qi(Xt),Ai();break;case 26:case 27:case 5:hl(s);break;case 4:Ai();break;case 13:Ui(s);break;case 19:Rt(Yt);break;case 10:qi(s.type);break;case 22:case 23:Ui(s),zg(),i!==null&&Rt(co);break;case 24:qi(Xt)}}var KP={getCacheForType:function(i){var s=Tn(Xt),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},QP=typeof WeakMap=="function"?WeakMap:Map,wt=0,ct=null,ze=null,Qe=0,ht=0,er=null,Qi=!1,Gl=!1,xy=!1,$i=0,Pt=0,Ys=0,Eo=0,Vy=0,Tr=0,Kl=0,lh=null,ti=null,ky=!1,My=0,Jf=1/0,em=null,Xs=null,tm=!1,To=null,uh=0,Ly=0,Uy=null,ch=0,zy=null;function tr(){if((wt&2)!==0&&Qe!==0)return Qe&-Qe;if(A.T!==null){var i=Ll;return i!==0?i:Qy()}return of()}function q0(){Tr===0&&(Tr=(Qe&536870912)===0||Xe?wc():536870912);var i=yr.current;return i!==null&&(i.flags|=32),Tr}function Vn(i,s,o){(i===ct&&ht===2||i.cancelPendingCommit!==null)&&(Ql(i,0),Wi(i,Qe,Tr,!1)),Mt(i,o),((wt&2)===0||i!==ct)&&(i===ct&&((wt&2)===0&&(Eo|=o),Pt===4&&Wi(i,Qe,Tr,!1)),ni(i))}function j0(i,s,o){if((wt&6)!==0)throw Error(r(327));var c=!o&&(s&60)===0&&(s&i.expiredLanes)===0||Is(i,s),m=c?YP(i,s):jy(i,s,!0),g=c;do{if(m===0){Gl&&!c&&Wi(i,s,0,!1);break}else if(m===6)Wi(i,s,0,!Qi);else{if(o=i.current.alternate,g&&!$P(o)){m=jy(i,s,!1),g=!1;continue}if(m===2){if(g=s,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var b=i;m=lh;var D=b.current.memoizedState.isDehydrated;if(D&&(Ql(b,T).flags|=256),T=jy(b,T,!1),T!==2){if(xy&&!D){b.errorRecoveryDisabledLanes|=g,Eo|=g,m=4;break e}g=ti,ti=m,g!==null&&Fy(g)}m=T}if(g=!1,m!==2)continue}}if(m===1){Ql(i,0),Wi(i,s,0,!0);break}e:{switch(c=i,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194176)===s){Wi(c,s,Tr,!Qi);break e}break;case 2:ti=null;break;case 3:case 5:break;default:throw Error(r(329))}if(c.finishedWork=o,c.finishedLanes=s,(s&62914560)===s&&(g=My+300-Bn(),10<g)){if(Wi(c,s,Tr,!Qi),or(c,0)!==0)break e;c.timeoutHandle=fb(H0.bind(null,c,o,ti,em,ky,s,Tr,Eo,Kl,Qi,2,-0,0),g);break e}H0(c,o,ti,em,ky,s,Tr,Eo,Kl,Qi,0,-0,0)}}break}while(!0);ni(i)}function Fy(i){ti===null?ti=i:ti.push.apply(ti,i)}function H0(i,s,o,c,m,g,T,b,D,U,Z,re,G){var X=s.subtreeFlags;if((X&8192||(X&16785408)===16785408)&&(gh={stylesheets:null,count:0,unsuspend:DO},V0(s),s=OO(),s!==null)){i.cancelPendingCommit=s(X0.bind(null,i,o,c,m,T,b,D,1,re,G)),Wi(i,g,T,!U);return}X0(i,o,c,m,T,b,D,Z,re,G)}function $P(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],g=m.getSnapshot;m=m.value;try{if(!Xn(g(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wi(i,s,o,c){s&=~Vy,s&=~Eo,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var m=s;0<m;){var g=31-Pn(m),T=1<<g;c[g]=-1,m&=~T}o!==0&&Ss(i,o,s)}function nm(){return(wt&6)===0?(hh(0),!1):!0}function By(){if(ze!==null){if(ht===0)var i=ze.return;else i=ze,Bi=go=null,Qg(i),kl=null,Gc=0,i=ze;for(;i!==null;)B0(i.alternate,i),i=i.return;ze=null}}function Ql(i,s){i.finishedWork=null,i.finishedLanes=0;var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,fO(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),By(),ct=i,ze=o=Ws(i.current,null),Qe=s,ht=0,er=null,Qi=!1,Gl=Is(i,s),xy=!1,Kl=Tr=Vy=Eo=Ys=Pt=0,ti=lh=null,ky=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var m=31-Pn(c),g=1<<m;s|=i[m],c&=~g}return $i=s,Sf(),o}function G0(i,s){Le=null,A.H=ei,s===jc?(s=aw(),ht=3):s===rw?(s=aw(),ht=4):ht=s===i0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,er=s,ze===null&&(Pt=1,Kf(i,mr(s,i.current)))}function K0(){var i=A.H;return A.H=ei,i===null?ei:i}function Q0(){var i=A.A;return A.A=KP,i}function qy(){Pt=4,Qi||(Qe&4194176)!==Qe&&yr.current!==null||(Gl=!0),(Ys&134217727)===0&&(Eo&134217727)===0||ct===null||Wi(ct,Qe,Tr,!1)}function jy(i,s,o){var c=wt;wt|=2;var m=K0(),g=Q0();(ct!==i||Qe!==s)&&(em=null,Ql(i,s)),s=!1;var T=Pt;e:do try{if(ht!==0&&ze!==null){var b=ze,D=er;switch(ht){case 8:By(),T=6;break e;case 3:case 2:case 6:yr.current===null&&(s=!0);var U=ht;if(ht=0,er=null,$l(i,b,D,U),o&&Gl){T=0;break e}break;default:U=ht,ht=0,er=null,$l(i,b,D,U)}}WP(),T=Pt;break}catch(Z){G0(i,Z)}while(!0);return s&&i.shellSuspendCounter++,Bi=go=null,wt=c,A.H=m,A.A=g,ze===null&&(ct=null,Qe=0,Sf()),T}function WP(){for(;ze!==null;)$0(ze)}function YP(i,s){var o=wt;wt|=2;var c=K0(),m=Q0();ct!==i||Qe!==s?(em=null,Jf=Bn()+500,Ql(i,s)):Gl=Is(i,s);e:do try{if(ht!==0&&ze!==null){s=ze;var g=er;t:switch(ht){case 1:ht=0,er=null,$l(i,s,g,1);break;case 2:if(iw(g)){ht=0,er=null,W0(s);break}s=function(){ht===2&&ct===i&&(ht=7),ni(i)},g.then(s,s);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:iw(g)?(ht=0,er=null,W0(s)):(ht=0,er=null,$l(i,s,g,7));break;case 5:var T=null;switch(ze.tag){case 26:T=ze.memoizedState;case 5:case 27:var b=ze;if(!T||Ib(T)){ht=0,er=null;var D=b.sibling;if(D!==null)ze=D;else{var U=b.return;U!==null?(ze=U,rm(U)):ze=null}break t}}ht=0,er=null,$l(i,s,g,5);break;case 6:ht=0,er=null,$l(i,s,g,6);break;case 8:By(),Pt=6;break e;default:throw Error(r(462))}}XP();break}catch(Z){G0(i,Z)}while(!0);return Bi=go=null,A.H=c,A.A=m,wt=o,ze!==null?0:(ct=null,Qe=0,Sf(),Pt)}function XP(){for(;ze!==null&&!yg();)$0(ze)}function $0(i){var s=g0(i.alternate,i,$i);i.memoizedProps=i.pendingProps,s===null?rm(i):ze=s}function W0(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=c0(o,s,s.pendingProps,s.type,void 0,Qe);break;case 11:s=c0(o,s,s.pendingProps,s.type.render,s.ref,Qe);break;case 5:Qg(s);default:B0(o,s),s=ze=U0(s,$i),s=g0(o,s,$i)}i.memoizedProps=i.pendingProps,s===null?rm(i):ze=s}function $l(i,s,o,c){Bi=go=null,Qg(s),kl=null,Gc=0;var m=s.return;try{if(zP(i,m,s,o,Qe)){Pt=1,Kf(i,mr(o,i.current)),ze=null;return}}catch(g){if(m!==null)throw ze=m,g;Pt=1,Kf(i,mr(o,i.current)),ze=null;return}s.flags&32768?(Xe||c===1?i=!0:Gl||(Qe&536870912)!==0?i=!1:(Qi=i=!0,(c===2||c===3||c===6)&&(c=yr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Y0(s,i)):rm(s)}function rm(i){var s=i;do{if((s.flags&32768)!==0){Y0(s,Qi);return}i=s.return;var o=HP(s.alternate,s,$i);if(o!==null){ze=o;return}if(s=s.sibling,s!==null){ze=s;return}ze=s=i}while(s!==null);Pt===0&&(Pt=5)}function Y0(i,s){do{var o=GP(i.alternate,i);if(o!==null){o.flags&=32767,ze=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){ze=i;return}ze=i=o}while(i!==null);Pt=6,ze=null}function X0(i,s,o,c,m,g,T,b,D,U){var Z=A.T,re=fe.p;try{fe.p=2,A.T=null,ZP(i,s,o,c,re,m,g,T,b,D,U)}finally{A.T=Z,fe.p=re}}function ZP(i,s,o,c,m,g,T,b){do Wl();while(To!==null);if((wt&6)!==0)throw Error(r(327));var D=i.finishedWork;if(c=i.finishedLanes,D===null)return null;if(i.finishedWork=null,i.finishedLanes=0,D===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var U=D.lanes|D.childLanes;if(U|=Ng,sf(i,c,U,g,T,b),i===ct&&(ze=ct=null,Qe=0),(D.subtreeFlags&10256)===0&&(D.flags&10256)===0||tm||(tm=!0,Ly=U,Uy=o,nO(Si,function(){return Wl(),null})),o=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||o?(o=A.T,A.T=null,g=fe.p,fe.p=2,T=wt,wt|=4,BP(i,D),O0(D,i),wP(t_,i.containerInfo),pm=!!e_,t_=e_=null,i.current=D,R0(i,D.alternate,D),_c(),wt=T,fe.p=g,A.T=o):i.current=D,tm?(tm=!1,To=i,uh=c):Z0(i,U),U=i.pendingLanes,U===0&&(Xs=null),Ec(D.stateNode),ni(i),s!==null)for(m=i.onRecoverableError,D=0;D<s.length;D++)U=s[D],m(U.value,{componentStack:U.stack});return(uh&3)!==0&&Wl(),U=i.pendingLanes,(c&4194218)!==0&&(U&42)!==0?i===zy?ch++:(ch=0,zy=i):ch=0,hh(0),null}function Z0(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Qc(s)))}function Wl(){if(To!==null){var i=To,s=Ly;Ly=0;var o=af(uh),c=A.T,m=fe.p;try{if(fe.p=32>o?32:o,A.T=null,To===null)var g=!1;else{o=Uy,Uy=null;var T=To,b=uh;if(To=null,uh=0,(wt&6)!==0)throw Error(r(331));var D=wt;if(wt|=4,M0(T.current),x0(T,T.current,b,o),wt=D,hh(0,!1),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(ws,T)}catch{}g=!0}return g}finally{fe.p=m,A.T=c,Z0(i,s)}}return!1}function J0(i,s,o){s=mr(o,s),s=oy(i.stateNode,s,2),i=Gs(i,s,2),i!==null&&(Mt(i,2),ni(i))}function ut(i,s,o){if(i.tag===3)J0(i,i,o);else for(;s!==null;){if(s.tag===3){J0(s,i,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Xs===null||!Xs.has(c))){i=mr(o,i),o=n0(2),c=Gs(s,o,2),c!==null&&(r0(o,c,s,i),Mt(c,2),ni(c));break}}s=s.return}}function Hy(i,s,o){var c=i.pingCache;if(c===null){c=i.pingCache=new QP;var m=new Set;c.set(s,m)}else m=c.get(s),m===void 0&&(m=new Set,c.set(s,m));m.has(o)||(xy=!0,m.add(o),i=JP.bind(null,i,s,o),s.then(i,i))}function JP(i,s,o){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ct===i&&(Qe&o)===o&&(Pt===4||Pt===3&&(Qe&62914560)===Qe&&300>Bn()-My?(wt&2)===0&&Ql(i,0):Vy|=o,Kl===Qe&&(Kl=0)),ni(i)}function eb(i,s){s===0&&(s=As()),i=Ls(i,s),i!==null&&(Mt(i,s),ni(i))}function eO(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),eb(i,o)}function tO(i,s){var o=0;switch(i.tag){case 13:var c=i.stateNode,m=i.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),eb(i,o)}function nO(i,s){return Ha(i,s)}var im=null,Yl=null,Gy=!1,sm=!1,Ky=!1,wo=0;function ni(i){i!==Yl&&i.next===null&&(Yl===null?im=Yl=i:Yl=Yl.next=i),sm=!0,Gy||(Gy=!0,iO(rO))}function hh(i,s){if(!Ky&&sm){Ky=!0;do for(var o=!1,c=im;c!==null;){if(i!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var T=c.suspendedLanes,b=c.pingedLanes;g=(1<<31-Pn(42|i)+1)-1,g&=m&~(T&~b),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(o=!0,rb(c,g))}else g=Qe,g=or(c,c===ct?g:0),(g&3)===0||Is(c,g)||(o=!0,rb(c,g));c=c.next}while(o);Ky=!1}}function rO(){sm=Gy=!1;var i=0;wo!==0&&(dO()&&(i=wo),wo=0);for(var s=Bn(),o=null,c=im;c!==null;){var m=c.next,g=tb(c,s);g===0?(c.next=null,o===null?im=m:o.next=m,m===null&&(Yl=o)):(o=c,(i!==0||(g&3)!==0)&&(sm=!0)),c=m}hh(i)}function tb(i,s){for(var o=i.suspendedLanes,c=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-Pn(g),b=1<<T,D=m[T];D===-1?((b&o)===0||(b&c)!==0)&&(m[T]=ml(b,s)):D<=s&&(i.expiredLanes|=b),g&=~b}if(s=ct,o=Qe,o=or(i,i===s?o:0),c=i.callbackNode,o===0||i===s&&ht===2||i.cancelPendingCommit!==null)return c!==null&&c!==null&&fl(c),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Is(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(c!==null&&fl(c),af(o)){case 2:case 8:o=en;break;case 32:o=Si;break;case 268435456:o=vc;break;default:o=Si}return c=nb.bind(null,i),o=Ha(o,c),i.callbackPriority=s,i.callbackNode=o,s}return c!==null&&c!==null&&fl(c),i.callbackPriority=2,i.callbackNode=null,2}function nb(i,s){var o=i.callbackNode;if(Wl()&&i.callbackNode!==o)return null;var c=Qe;return c=or(i,i===ct?c:0),c===0?null:(j0(i,c,s),tb(i,Bn()),i.callbackNode!=null&&i.callbackNode===o?nb.bind(null,i):null)}function rb(i,s){if(Wl())return null;j0(i,s,!0)}function iO(i){mO(function(){(wt&6)!==0?Ha(Kt,i):i()})}function Qy(){return wo===0&&(wo=wc()),wo}function ib(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Gr(""+i)}function sb(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function sO(i,s,o,c,m){if(s==="submit"&&o&&o.stateNode===m){var g=ib((m[Qt]||null).action),T=c.submitter;T&&(s=(s=T[Qt]||null)?ib(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var b=new Tl("action","action",null,c,m);i.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(wo!==0){var D=T?sb(m,T):new FormData(m);ny(o,{pending:!0,data:D,method:m.method,action:g},null,D)}}else typeof g=="function"&&(b.preventDefault(),D=T?sb(m,T):new FormData(m),ny(o,{pending:!0,data:D,method:m.method,action:g},g,D))},currentTarget:m}]})}}for(var $y=0;$y<XT.length;$y++){var Wy=XT[$y],aO=Wy.toLowerCase(),oO=Wy[0].toUpperCase()+Wy.slice(1);Dr(aO,"on"+oO)}Dr(KT,"onAnimationEnd"),Dr(QT,"onAnimationIteration"),Dr($T,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(IP,"onTransitionRun"),Dr(AP,"onTransitionStart"),Dr(SP,"onTransitionCancel"),Dr(WT,"onTransitionEnd"),qn("onMouseEnter",["mouseout","mouseover"]),qn("onMouseLeave",["mouseout","mouseover"]),qn("onPointerEnter",["pointerout","pointerover"]),qn("onPointerLeave",["pointerout","pointerover"]),Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dh));function ab(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var c=i[o],m=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var T=c.length-1;0<=T;T--){var b=c[T],D=b.instance,U=b.currentTarget;if(b=b.listener,D!==g&&m.isPropagationStopped())break e;g=b,m.currentTarget=U;try{g(m)}catch(Z){Gf(Z)}m.currentTarget=null,g=D}else for(T=0;T<c.length;T++){if(b=c[T],D=b.instance,U=b.currentTarget,b=b.listener,D!==g&&m.isPropagationStopped())break e;g=b,m.currentTarget=U;try{g(m)}catch(Z){Gf(Z)}m.currentTarget=null,g=D}}}}function He(i,s){var o=s[Ka];o===void 0&&(o=s[Ka]=new Set);var c=i+"__bubble";o.has(c)||(ob(s,i,2,!1),o.add(c))}function Yy(i,s,o){var c=0;s&&(c|=4),ob(o,i,c,s)}var am="_reactListening"+Math.random().toString(36).slice(2);function Xy(i){if(!i[am]){i[am]=!0,Ic.forEach(function(o){o!=="selectionchange"&&(lO.has(o)||Yy(o,!1,i),Yy(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[am]||(s[am]=!0,Yy("selectionchange",!1,s))}}function ob(i,s,o,c){switch(Pb(s)){case 2:var m=VO;break;case 8:m=kO;break;default:m=c_}o=m.bind(null,s,o,i),m=void 0,!hr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),c?m!==void 0?i.addEventListener(s,o,{capture:!0,passive:m}):i.addEventListener(s,o,!0):m!==void 0?i.addEventListener(s,o,{passive:m}):i.addEventListener(s,o,!1)}function Zy(i,s,o,c,m){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var b=c.stateNode.containerInfo;if(b===m||b.nodeType===8&&b.parentNode===m)break;if(T===4)for(T=c.return;T!==null;){var D=T.tag;if((D===3||D===4)&&(D=T.stateNode.containerInfo,D===m||D.nodeType===8&&D.parentNode===m))return;T=T.return}for(;b!==null;){if(T=Cr(b),T===null)return;if(D=T.tag,D===5||D===6||D===26||D===27){c=g=T;continue e}b=b.parentNode}}c=c.return}hf(function(){var U=g,Z=El(o),re=[];e:{var G=YT.get(i);if(G!==void 0){var X=Tl,we=i;switch(i){case"keypress":if(Qr(o)===0)break e;case"keydown":case"keyup":X=Rl;break;case"focusin":we="focus",X=Il;break;case"focusout":we="blur",X=Il;break;case"beforeblur":case"afterblur":X=Il;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=vf;break;case KT:case QT:case $T:X=Al;break;case WT:X=Tf;break;case"scroll":case"scrollend":X=df;break;case"wheel":X=Cl;break;case"copy":case"cut":case"paste":X=Sl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Mc;break;case"toggle":case"beforetoggle":X=bf}var xe=(s&4)!==0,Ot=!xe&&(i==="scroll"||i==="scrollend"),F=xe?G!==null?G+"Capture":null:G;xe=[];for(var L=U,H;L!==null;){var te=L;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||F===null||(te=Xa(L,F),te!=null&&xe.push(fh(L,te,H))),Ot)break;L=L.return}0<xe.length&&(G=new X(G,we,null,o,Z),re.push({event:G,listeners:xe}))}}if((s&7)===0){e:{if(G=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",G&&o!==cr&&(we=o.relatedTarget||o.fromElement)&&(Cr(we)||we[Ri]))break e;if((X||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,X?(we=o.relatedTarget||o.toElement,X=U,we=we?Cr(we):null,we!==null&&(Ot=pe(we),xe=we.tag,we!==Ot||xe!==5&&xe!==27&&xe!==6)&&(we=null)):(X=null,we=U),X!==we)){if(xe=dr,te="onMouseLeave",F="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(xe=Mc,te="onPointerLeave",F="onPointerEnter",L="pointer"),Ot=X==null?G:Ps(X),H=we==null?G:Ps(we),G=new xe(te,L+"leave",X,o,Z),G.target=Ot,G.relatedTarget=H,te=null,Cr(Z)===U&&(xe=new xe(F,L+"enter",we,o,Z),xe.target=H,xe.relatedTarget=Ot,te=xe),Ot=te,X&&we)t:{for(xe=X,F=we,L=0,H=xe;H;H=Xl(H))L++;for(H=0,te=F;te;te=Xl(te))H++;for(;0<L-H;)xe=Xl(xe),L--;for(;0<H-L;)F=Xl(F),H--;for(;L--;){if(xe===F||F!==null&&xe===F.alternate)break t;xe=Xl(xe),F=Xl(F)}xe=null}else xe=null;X!==null&&lb(re,G,X,xe,!1),we!==null&&Ot!==null&&lb(re,Ot,we,xe,!0)}}e:{if(G=U?Ps(U):window,X=G.nodeName&&G.nodeName.toLowerCase(),X==="select"||X==="input"&&G.type==="file")var ye=kT;else if(Wt(G))if(MT)ye=EP;else{ye=_P;var Ue=yP}else X=G.nodeName,!X||X.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?U&&Dc(U.elementType)&&(ye=kT):ye=vP;if(ye&&(ye=ye(i,U))){ki(re,ye,o,Z);break e}Ue&&Ue(i,G,U),i==="focusout"&&U&&G.type==="number"&&U.memoizedProps.value!=null&&vl(G,"number",G.value)}switch(Ue=U?Ps(U):window,i){case"focusin":(Wt(Ue)||Ue.contentEditable==="true")&&(Dl=Ue,Dg=U,zc=null);break;case"focusout":zc=Dg=Dl=null;break;case"mousedown":Pg=!0;break;case"contextmenu":case"mouseup":case"dragend":Pg=!1,HT(re,o,Z);break;case"selectionchange":if(bP)break;case"keydown":case"keyup":HT(re,o,Z)}var Ie;if(Yr)e:{switch(i){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Ge?W(i,o)&&(Ce="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ce="onCompositionStart");Ce&&(E&&o.locale!=="ko"&&(Ge||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Ge&&(Ie=Oc()):(Kr=Z,Ms="value"in Kr?Kr.value:Kr.textContent,Ge=!0)),Ue=om(U,Ce),0<Ue.length&&(Ce=new Vc(Ce,i,null,o,Z),re.push({event:Ce,listeners:Ue}),Ie?Ce.data=Ie:(Ie=ce(o),Ie!==null&&(Ce.data=Ie)))),(Ie=y?$t(i,o):Ke(i,o))&&(Ce=om(U,"onBeforeInput"),0<Ce.length&&(Ue=new Vc("onBeforeInput","beforeinput",null,o,Z),re.push({event:Ue,listeners:Ce}),Ue.data=Ie)),sO(re,i,U,o,Z)}ab(re,s)})}function fh(i,s,o){return{instance:i,listener:s,currentTarget:o}}function om(i,s){for(var o=s+"Capture",c=[];i!==null;){var m=i,g=m.stateNode;m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Xa(i,o),m!=null&&c.unshift(fh(i,m,g)),m=Xa(i,s),m!=null&&c.push(fh(i,m,g))),i=i.return}return c}function Xl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function lb(i,s,o,c,m){for(var g=s._reactName,T=[];o!==null&&o!==c;){var b=o,D=b.alternate,U=b.stateNode;if(b=b.tag,D!==null&&D===c)break;b!==5&&b!==26&&b!==27||U===null||(D=U,m?(U=Xa(o,g),U!=null&&T.unshift(fh(o,U,D))):m||(U=Xa(o,g),U!=null&&T.push(fh(o,U,D)))),o=o.return}T.length!==0&&i.push({event:s,listeners:T})}var uO=/\r\n?/g,cO=/\u0000|\uFFFD/g;function ub(i){return(typeof i=="string"?i:""+i).replace(uO,`
`).replace(cO,"")}function cb(i,s){return s=ub(s),ub(i)===s}function lm(){}function lt(i,s,o,c,m,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||ur(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&ur(i,""+c);break;case"className":xs(i,"class",c);break;case"tabIndex":xs(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":xs(i,o,c);break;case"style":cf(i,c,g);break;case"data":if(s!=="object"){xs(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=Gr(""+c),i.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&lt(i,s,"name",m.name,m,null),lt(i,s,"formEncType",m.formEncType,m,null),lt(i,s,"formMethod",m.formMethod,m,null),lt(i,s,"formTarget",m.formTarget,m,null)):(lt(i,s,"encType",m.encType,m,null),lt(i,s,"method",m.method,m,null),lt(i,s,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=Gr(""+c),i.setAttribute(o,c);break;case"onClick":c!=null&&(i.onclick=lm);break;case"onScroll":c!=null&&He("scroll",i);break;case"onScrollEnd":c!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}o=Gr(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""+c):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":c===!0?i.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,c):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(o,c):i.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(o):i.setAttribute(o,c);break;case"popover":He("beforetoggle",i),He("toggle",i),Ns(i,"popover",c);break;case"xlinkActuate":lr(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":lr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":lr(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":lr(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":lr(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":lr(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":lr(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":lr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":lr(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ns(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=wg.get(o)||o,Ns(i,o,c))}}function Jy(i,s,o,c,m,g){switch(o){case"style":cf(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof c=="string"?ur(i,c):(typeof c=="number"||typeof c=="bigint")&&ur(i,""+c);break;case"onScroll":c!=null&&He("scroll",i);break;case"onScrollEnd":c!=null&&He("scrollend",i);break;case"onClick":c!=null&&(i.onclick=lm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),g=i[Qt]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(s,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,c,m);break e}o in i?i[o]=c:c===!0?i.setAttribute(o,""):Ns(i,o,c)}}}function pn(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var c=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:lt(i,s,g,T,o,null)}}m&&lt(i,s,"srcSet",o.srcSet,o,null),c&&lt(i,s,"src",o.src,o,null);return;case"input":He("invalid",i);var b=g=T=m=null,D=null,U=null;for(c in o)if(o.hasOwnProperty(c)){var Z=o[c];if(Z!=null)switch(c){case"name":m=Z;break;case"type":T=Z;break;case"checked":D=Z;break;case"defaultChecked":U=Z;break;case"value":g=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:lt(i,s,c,Z,o,null)}}Wa(i,g,b,D,U,T,m,!1),$a(i);return;case"select":He("invalid",i),c=T=g=null;for(m in o)if(o.hasOwnProperty(m)&&(b=o[m],b!=null))switch(m){case"value":g=b;break;case"defaultValue":T=b;break;case"multiple":c=b;default:lt(i,s,m,b,o,null)}s=g,o=T,i.multiple=!!c,s!=null?Ye(i,!!c,s,!1):o!=null&&Ye(i,!!c,o,!0);return;case"textarea":He("invalid",i),g=m=c=null;for(T in o)if(o.hasOwnProperty(T)&&(b=o[T],b!=null))switch(T){case"value":c=b;break;case"defaultValue":m=b;break;case"children":g=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:lt(i,s,T,b,o,null)}ks(i,c,m,g),$a(i);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(i,s,D,c,o,null)}return;case"dialog":He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(c=0;c<dh.length;c++)He(dh[c],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in o)if(o.hasOwnProperty(U)&&(c=o[U],c!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:lt(i,s,U,c,o,null)}return;default:if(Dc(s)){for(Z in o)o.hasOwnProperty(Z)&&(c=o[Z],c!==void 0&&Jy(i,s,Z,c,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(c=o[b],c!=null&&lt(i,s,b,c,o,null))}function hO(i,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,T=null,b=null,D=null,U=null,Z=null;for(X in o){var re=o[X];if(o.hasOwnProperty(X)&&re!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":D=re;default:c.hasOwnProperty(X)||lt(i,s,X,null,c,re)}}for(var G in c){var X=c[G];if(re=o[G],c.hasOwnProperty(G)&&(X!=null||re!=null))switch(G){case"type":g=X;break;case"name":m=X;break;case"checked":U=X;break;case"defaultChecked":Z=X;break;case"value":T=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:X!==re&&lt(i,s,G,X,c,re)}}Vs(i,T,b,D,U,Z,g,m);return;case"select":X=T=b=G=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":X=D;default:c.hasOwnProperty(g)||lt(i,s,g,null,c,D)}for(m in c)if(g=c[m],D=o[m],c.hasOwnProperty(m)&&(g!=null||D!=null))switch(m){case"value":G=g;break;case"defaultValue":b=g;break;case"multiple":T=g;default:g!==D&&lt(i,s,m,g,c,D)}s=b,o=T,c=X,G!=null?Ye(i,!!o,G,!1):!!c!=!!o&&(s!=null?Ye(i,!!o,s,!0):Ye(i,!!o,o?[]:"",!1));return;case"textarea":X=G=null;for(b in o)if(m=o[b],o.hasOwnProperty(b)&&m!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:lt(i,s,b,null,c,m)}for(T in c)if(m=c[T],g=o[T],c.hasOwnProperty(T)&&(m!=null||g!=null))switch(T){case"value":G=m;break;case"defaultValue":X=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==g&&lt(i,s,T,m,c,g)}Ya(i,G,X);return;case"option":for(var we in o)if(G=o[we],o.hasOwnProperty(we)&&G!=null&&!c.hasOwnProperty(we))switch(we){case"selected":i.selected=!1;break;default:lt(i,s,we,null,c,G)}for(D in c)if(G=c[D],X=o[D],c.hasOwnProperty(D)&&G!==X&&(G!=null||X!=null))switch(D){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:lt(i,s,D,G,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in o)G=o[xe],o.hasOwnProperty(xe)&&G!=null&&!c.hasOwnProperty(xe)&&lt(i,s,xe,null,c,G);for(U in c)if(G=c[U],X=o[U],c.hasOwnProperty(U)&&G!==X&&(G!=null||X!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:lt(i,s,U,G,c,X)}return;default:if(Dc(s)){for(var Ot in o)G=o[Ot],o.hasOwnProperty(Ot)&&G!==void 0&&!c.hasOwnProperty(Ot)&&Jy(i,s,Ot,void 0,c,G);for(Z in c)G=c[Z],X=o[Z],!c.hasOwnProperty(Z)||G===X||G===void 0&&X===void 0||Jy(i,s,Z,G,c,X);return}}for(var F in o)G=o[F],o.hasOwnProperty(F)&&G!=null&&!c.hasOwnProperty(F)&&lt(i,s,F,null,c,G);for(re in c)G=c[re],X=o[re],!c.hasOwnProperty(re)||G===X||G==null&&X==null||lt(i,s,re,G,c,X)}var e_=null,t_=null;function um(i){return i.nodeType===9?i:i.ownerDocument}function hb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function db(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function n_(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var r_=null;function dO(){var i=window.event;return i&&i.type==="popstate"?i===r_?!1:(r_=i,!0):(r_=null,!1)}var fb=typeof setTimeout=="function"?setTimeout:void 0,fO=typeof clearTimeout=="function"?clearTimeout:void 0,mb=typeof Promise=="function"?Promise:void 0,mO=typeof queueMicrotask=="function"?queueMicrotask:typeof mb<"u"?function(i){return mb.resolve(null).then(i).catch(pO)}:fb;function pO(i){setTimeout(function(){throw i})}function i_(i,s){var o=s,c=0;do{var m=o.nextSibling;if(i.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(c===0){i.removeChild(m),Th(s);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=m}while(o);Th(s)}function s_(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":s_(o),Qa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function gO(i,s,o,c){for(;i.nodeType===1;){var m=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Ds])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=Nr(i.nextSibling),i===null)break}return null}function yO(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Nr(i.nextSibling),i===null))return null;return i}function Nr(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}function pb(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function gb(i,s,o){switch(s=um(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}var wr=new Map,yb=new Set;function cm(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var Yi=fe.d;fe.d={f:_O,r:vO,D:EO,C:TO,L:wO,m:bO,X:AO,S:IO,M:SO};function _O(){var i=Yi.f(),s=nm();return i||s}function vO(i){var s=Ci(i);s!==null&&s.tag===5&&s.type==="form"?Hw(s):Yi.r(i)}var Zl=typeof document>"u"?null:document;function _b(i,s,o){var c=Zl;if(c&&typeof s=="string"&&s){var m=Ct(s);m='link[rel="'+i+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),yb.has(m)||(yb.add(m),i={rel:i,crossOrigin:o,href:s},c.querySelector(m)===null&&(s=c.createElement("link"),pn(s,"link",i),Et(s),c.head.appendChild(s)))}}function EO(i){Yi.D(i),_b("dns-prefetch",i,null)}function TO(i,s){Yi.C(i,s),_b("preconnect",i,s)}function wO(i,s,o){Yi.L(i,s,o);var c=Zl;if(c&&i&&s){var m='link[rel="preload"][as="'+Ct(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Ct(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Ct(o.imageSizes)+'"]')):m+='[href="'+Ct(i)+'"]';var g=m;switch(s){case"style":g=Jl(i);break;case"script":g=eu(i)}wr.has(g)||(i=O({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),wr.set(g,i),c.querySelector(m)!==null||s==="style"&&c.querySelector(mh(g))||s==="script"&&c.querySelector(ph(g))||(s=c.createElement("link"),pn(s,"link",i),Et(s),c.head.appendChild(s)))}}function bO(i,s){Yi.m(i,s);var o=Zl;if(o&&i){var c=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Ct(c)+'"][href="'+Ct(i)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=eu(i)}if(!wr.has(g)&&(i=O({rel:"modulepreload",href:i},s),wr.set(g,i),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ph(g)))return}c=o.createElement("link"),pn(c,"link",i),Et(c),o.head.appendChild(c)}}}function IO(i,s,o){Yi.S(i,s,o);var c=Zl;if(c&&i){var m=Os(c).hoistableStyles,g=Jl(i);s=s||"default";var T=m.get(g);if(!T){var b={loading:0,preload:null};if(T=c.querySelector(mh(g)))b.loading=5;else{i=O({rel:"stylesheet",href:i,"data-precedence":s},o),(o=wr.get(g))&&a_(i,o);var D=T=c.createElement("link");Et(D),pn(D,"link",i),D._p=new Promise(function(U,Z){D.onload=U,D.onerror=Z}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,hm(T,s,c)}T={type:"stylesheet",instance:T,count:1,state:b},m.set(g,T)}}}function AO(i,s){Yi.X(i,s);var o=Zl;if(o&&i){var c=Os(o).hoistableScripts,m=eu(i),g=c.get(m);g||(g=o.querySelector(ph(m)),g||(i=O({src:i,async:!0},s),(s=wr.get(m))&&o_(i,s),g=o.createElement("script"),Et(g),pn(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function SO(i,s){Yi.M(i,s);var o=Zl;if(o&&i){var c=Os(o).hoistableScripts,m=eu(i),g=c.get(m);g||(g=o.querySelector(ph(m)),g||(i=O({src:i,async:!0,type:"module"},s),(s=wr.get(m))&&o_(i,s),g=o.createElement("script"),Et(g),pn(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function vb(i,s,o,c){var m=(m=ar.current)?cm(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Jl(o.href),o=Os(m).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Jl(o.href);var g=Os(m).hoistableStyles,T=g.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=m.querySelector(mh(i)))&&!g._p&&(T.instance=g,T.state.loading=5),wr.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},wr.set(i,o),g||RO(m,i,o,T.state))),s&&c===null)throw Error(r(528,""));return T}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=eu(o),o=Os(m).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Jl(i){return'href="'+Ct(i)+'"'}function mh(i){return'link[rel="stylesheet"]['+i+"]"}function Eb(i){return O({},i,{"data-precedence":i.precedence,precedence:null})}function RO(i,s,o,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),pn(s,"link",o),Et(s),i.head.appendChild(s))}function eu(i){return'[src="'+Ct(i)+'"]'}function ph(i){return"script[async]"+i}function Tb(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+Ct(o.href)+'"]');if(c)return s.instance=c,Et(c),c;var m=O({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Et(c),pn(c,"style",m),hm(c,o.precedence,i),s.instance=c;case"stylesheet":m=Jl(o.href);var g=i.querySelector(mh(m));if(g)return s.state.loading|=4,s.instance=g,Et(g),g;c=Eb(o),(m=wr.get(m))&&a_(c,m),g=(i.ownerDocument||i).createElement("link"),Et(g);var T=g;return T._p=new Promise(function(b,D){T.onload=b,T.onerror=D}),pn(g,"link",c),s.state.loading|=4,hm(g,o.precedence,i),s.instance=g;case"script":return g=eu(o.src),(m=i.querySelector(ph(g)))?(s.instance=m,Et(m),m):(c=o,(m=wr.get(g))&&(c=O({},o),o_(c,m)),i=i.ownerDocument||i,m=i.createElement("script"),Et(m),pn(m,"link",c),i.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,hm(c,o.precedence,i));return s.instance}function hm(i,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,T=0;T<c.length;T++){var b=c[T];if(b.dataset.precedence===s)g=b;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function a_(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function o_(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var dm=null;function wb(i,s,o){if(dm===null){var c=new Map,m=dm=new Map;m.set(o,c)}else m=dm,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(i))return c;for(c.set(i,null),o=o.getElementsByTagName(i),m=0;m<o.length;m++){var g=o[m];if(!(g[Ds]||g[tn]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=i+T;var b=c.get(T);b?b.push(g):c.set(T,[g])}}return c}function bb(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function CO(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ib(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var gh=null;function DO(){}function PO(i,s,o){if(gh===null)throw Error(r(475));var c=gh;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var m=Jl(o.href),g=i.querySelector(mh(m));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=fm.bind(c),i.then(c,c)),s.state.loading|=4,s.instance=g,Et(g);return}g=i.ownerDocument||i,o=Eb(o),(m=wr.get(m))&&a_(o,m),g=g.createElement("link"),Et(g);var T=g;T._p=new Promise(function(b,D){T.onload=b,T.onerror=D}),pn(g,"link",o),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=fm.bind(c),i.addEventListener("load",s),i.addEventListener("error",s))}}function OO(){if(gh===null)throw Error(r(475));var i=gh;return i.stylesheets&&i.count===0&&l_(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&l_(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function fm(){if(this.count--,this.count===0){if(this.stylesheets)l_(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var mm=null;function l_(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,mm=new Map,s.forEach(NO,i),mm=null,fm.call(i))}function NO(i,s){if(!(s.state.loading&4)){var o=mm.get(i);if(o)var c=o.get(null);else{o=new Map,mm.set(i,o);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var T=m[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),c=T)}c&&o.set(null,c)}m=s.instance,T=m.getAttribute("data-precedence"),g=o.get(T)||c,g===c&&o.set(null,m),o.set(T,m),this.count++,c=fm.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),s.state.loading|=4}}var yh={$$typeof:R,Provider:null,Consumer:null,_currentValue:Pe,_currentValue2:Pe,_threadCount:0};function xO(i,s,o,c,m,g,T,b){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pl(0),this.hiddenUpdates=pl(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Ab(i,s,o,c,m,g,T,b,D,U,Z,re){return i=new xO(i,s,o,T,b,D,U,re),s=1,g===!0&&(s|=24),g=Er(3,null,null,s),i.current=g,g.stateNode=i,s=Fg(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},Ey(g),i}function Sb(i){return i?(i=Nl,i):Nl}function Rb(i,s,o,c,m,g){m=Sb(m),c.context===null?c.context=m:c.pendingContext=m,c=Hs(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Gs(i,c,s),o!==null&&(Vn(o,i,s),eh(o,i,s))}function Cb(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function u_(i,s){Cb(i,s),(i=i.alternate)&&Cb(i,s)}function Db(i){if(i.tag===13){var s=Ls(i,67108864);s!==null&&Vn(s,i,67108864),u_(i,67108864)}}var pm=!0;function VO(i,s,o,c){var m=A.T;A.T=null;var g=fe.p;try{fe.p=2,c_(i,s,o,c)}finally{fe.p=g,A.T=m}}function kO(i,s,o,c){var m=A.T;A.T=null;var g=fe.p;try{fe.p=8,c_(i,s,o,c)}finally{fe.p=g,A.T=m}}function c_(i,s,o,c){if(pm){var m=h_(c);if(m===null)Zy(i,s,c,gm,o),Ob(i,c);else if(LO(m,i,s,o,c))c.stopPropagation();else if(Ob(i,c),s&4&&-1<MO.indexOf(i)){for(;m!==null;){var g=Ci(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=Rr(g.pendingLanes);if(T!==0){var b=g;for(b.pendingLanes|=2,b.entangledLanes|=2;T;){var D=1<<31-Pn(T);b.entanglements[1]|=D,T&=~D}ni(g),(wt&6)===0&&(Jf=Bn()+500,hh(0))}}break;case 13:b=Ls(g,2),b!==null&&Vn(b,g,2),nm(),u_(g,2)}if(g=h_(c),g===null&&Zy(i,s,c,gm,o),g===m)break;m=g}m!==null&&c.stopPropagation()}else Zy(i,s,c,null,o)}}function h_(i){return i=El(i),d_(i)}var gm=null;function d_(i){if(gm=null,i=Cr(i),i!==null){var s=pe(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=Ne(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return gm=i,null}function Pb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ef()){case Kt:return 2;case en:return 8;case Si:case tf:return 32;case vc:return 268435456;default:return 32}default:return 32}}var f_=!1,Zs=null,Js=null,ea=null,_h=new Map,vh=new Map,ta=[],MO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ob(i,s){switch(i){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":_h.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(s.pointerId)}}function Eh(i,s,o,c,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},s!==null&&(s=Ci(s),s!==null&&Db(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function LO(i,s,o,c,m){switch(s){case"focusin":return Zs=Eh(Zs,i,s,o,c,m),!0;case"dragenter":return Js=Eh(Js,i,s,o,c,m),!0;case"mouseover":return ea=Eh(ea,i,s,o,c,m),!0;case"pointerover":var g=m.pointerId;return _h.set(g,Eh(_h.get(g)||null,i,s,o,c,m)),!0;case"gotpointercapture":return g=m.pointerId,vh.set(g,Eh(vh.get(g)||null,i,s,o,c,m)),!0}return!1}function Nb(i){var s=Cr(i.target);if(s!==null){var o=pe(s);if(o!==null){if(s=o.tag,s===13){if(s=Ne(o),s!==null){i.blockedOn=s,Cs(i.priority,function(){if(o.tag===13){var c=tr(),m=Ls(o,c);m!==null&&Vn(m,o,c),u_(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ym(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=h_(i.nativeEvent);if(o===null){o=i.nativeEvent;var c=new o.constructor(o.type,o);cr=c,o.target.dispatchEvent(c),cr=null}else return s=Ci(o),s!==null&&Db(s),i.blockedOn=o,!1;s.shift()}return!0}function xb(i,s,o){ym(i)&&o.delete(s)}function UO(){f_=!1,Zs!==null&&ym(Zs)&&(Zs=null),Js!==null&&ym(Js)&&(Js=null),ea!==null&&ym(ea)&&(ea=null),_h.forEach(xb),vh.forEach(xb)}function _m(i,s){i.blockedOn===s&&(i.blockedOn=null,f_||(f_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,UO)))}var vm=null;function Vb(i){vm!==i&&(vm=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){vm===i&&(vm=null);for(var s=0;s<i.length;s+=3){var o=i[s],c=i[s+1],m=i[s+2];if(typeof c!="function"){if(d_(c||o)===null)continue;break}var g=Ci(o);g!==null&&(i.splice(s,3),s-=3,ny(g,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function Th(i){function s(D){return _m(D,i)}Zs!==null&&_m(Zs,i),Js!==null&&_m(Js,i),ea!==null&&_m(ea,i),_h.forEach(s),vh.forEach(s);for(var o=0;o<ta.length;o++){var c=ta[o];c.blockedOn===i&&(c.blockedOn=null)}for(;0<ta.length&&(o=ta[0],o.blockedOn===null);)Nb(o),o.blockedOn===null&&ta.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],g=o[c+1],T=m[Qt]||null;if(typeof g=="function")T||Vb(o);else if(T){var b=null;if(g&&g.hasAttribute("formAction")){if(m=g,T=g[Qt]||null)b=T.formAction;else if(d_(m)!==null)continue}else b=T.action;typeof b=="function"?o[c+1]=b:(o.splice(c,3),c-=3),Vb(o)}}}function m_(i){this._internalRoot=i}Em.prototype.render=m_.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,c=tr();Rb(o,c,i,s,null,null)},Em.prototype.unmount=m_.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;i.tag===0&&Wl(),Rb(i.current,2,null,i,null,null),nm(),s[Ri]=null}};function Em(i){this._internalRoot=i}Em.prototype.unstable_scheduleHydration=function(i){if(i){var s=of();i={blockedOn:null,target:i,priority:s};for(var o=0;o<ta.length&&s!==0&&s<ta[o].priority;o++);ta.splice(o,0,i),o===0&&Nb(i)}};var kb=e.version;if(kb!=="19.0.0")throw Error(r(527,kb,"19.0.0"));fe.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=ae(s),i=i!==null?Te(i):null,i=i===null?null:i.stateNode,i};var zO={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:A,findFiberByHostInstance:Cr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tm.isDisabled&&Tm.supportsFiber)try{ws=Tm.inject(zO),En=Tm}catch{}}return bh.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,c="",m=Zw,g=Jw,T=e0,b=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=Ab(i,1,!1,null,null,o,c,m,g,T,b,null),i[Ri]=s.current,Xy(i.nodeType===8?i.parentNode:i),new m_(s)},bh.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var c=!1,m="",g=Zw,T=Jw,b=e0,D=null,U=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(D=o.unstable_transitionCallbacks),o.formState!==void 0&&(U=o.formState)),s=Ab(i,1,!0,s,o??null,c,m,g,T,b,D,U),s.context=Sb(null),o=s.current,c=tr(),m=Hs(c),m.callback=null,Gs(o,m,c),s.current.lanes=c,Mt(s,c),ni(s),i[Ri]=s.current,Xy(i),new Em(s)},bh.version="19.0.0",bh}var Kb;function YO(){if(Kb)return __.exports;Kb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),__.exports=WO(),__.exports}var XO=YO();const ZO="modulepreload",JO=function(n){return"/find-crew/"+n},Qb={},hs=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(t.map(f=>{if(f=JO(f),f in Qb)return;Qb[f]=!0;const p=f.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${_}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":ZO,p||(v.as="script"),v.crossOrigin="",v.href=f,h&&v.setAttribute("nonce",h),document.head.appendChild(v),p)return new Promise((w,R)=>{v.addEventListener("load",w),v.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};var Ih={},$b;function eN(){if($b)return Ih;$b=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.parse=u,Ih.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function u(w,R){const C=new l,N=w.length;if(N<2)return C;const V=(R==null?void 0:R.decode)||_;let z=0;do{const Y=w.indexOf("=",z);if(Y===-1)break;const K=w.indexOf(";",z),ue=K===-1?N:K;if(Y>ue){z=w.lastIndexOf(";",Y-1)+1;continue}const le=h(w,z,Y),J=f(w,Y,le),x=w.slice(le,J);if(C[x]===void 0){let S=h(w,Y+1,ue),A=f(w,ue,S);const O=V(w.slice(S,A));C[x]=O}z=ue+1}while(z<N);return C}function h(w,R,C){do{const N=w.charCodeAt(R);if(N!==32&&N!==9)return R}while(++R<C);return C}function f(w,R,C){for(;R>C;){const N=w.charCodeAt(--R);if(N!==32&&N!==9)return R+1}return C}function p(w,R,C){const N=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const V=N(R);if(!e.test(V))throw new TypeError(`argument val is invalid: ${R}`);let z=w+"="+V;if(!C)return z;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);z+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);z+="; Domain="+C.domain}if(C.path){if(!r.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);z+="; Path="+C.path}if(C.expires){if(!v(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);z+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(z+="; HttpOnly"),C.secure&&(z+="; Secure"),C.partitioned&&(z+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return z}function _(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function v(w){return a.call(w)==="[object Date]"}return Ih}eN();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Wb="popstate";function tN(n={}){function e(r,a){let{pathname:l,search:u,hash:h}=r.location;return G_("",{pathname:l,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:ed(a)}return rN(e,t,null,n)}function bt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ur(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nN(){return Math.random().toString(36).substring(2,10)}function Yb(n,e){return{usr:n.state,key:n.key,idx:e}}function G_(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ec(e):e,state:t,key:e&&e.key||r||nN()}}function ed({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ec(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function rN(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,u=a.history,h="POP",f=null,p=_();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function _(){return(u.state||{idx:null}).idx}function v(){h="POP";let V=_(),z=V==null?null:V-p;p=V,f&&f({action:h,location:N.location,delta:z})}function w(V,z){h="PUSH";let Y=G_(N.location,V,z);p=_()+1;let K=Yb(Y,p),ue=N.createHref(Y);try{u.pushState(K,"",ue)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(ue)}l&&f&&f({action:h,location:N.location,delta:1})}function R(V,z){h="REPLACE";let Y=G_(N.location,V,z);p=_();let K=Yb(Y,p),ue=N.createHref(Y);u.replaceState(K,"",ue),l&&f&&f({action:h,location:N.location,delta:0})}function C(V){let z=a.location.origin!=="null"?a.location.origin:a.location.href,Y=typeof V=="string"?V:ed(V);return Y=Y.replace(/ $/,"%20"),bt(z,`No window.location.(origin|href) available to create URL for href: ${Y}`),new URL(Y,z)}let N={get action(){return h},get location(){return n(a,u)},listen(V){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(Wb,v),f=V,()=>{a.removeEventListener(Wb,v),f=null}},createHref(V){return e(a,V)},createURL:C,encodeLocation(V){let z=C(V);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:w,replace:R,go(V){return u.go(V)}};return N}function RS(n,e,t="/"){return iN(n,e,t,!1)}function iN(n,e,t,r){let a=typeof e=="string"?ec(e):e,l=ss(a.pathname||"/",t);if(l==null)return null;let u=CS(n);sN(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=gN(l);h=mN(u[f],p,r)}return h}function CS(n,e=[],t=[],r=""){let a=(l,u,h)=>{let f={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};f.relativePath.startsWith("/")&&(bt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let p=rs([r,f.relativePath]),_=t.concat(f);l.children&&l.children.length>0&&(bt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),CS(l.children,e,_,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:dN(p,l.index),routesMeta:_})};return n.forEach((l,u)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))a(l,u);else for(let f of DS(l.path))a(l,u,f)}),e}function DS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let u=DS(r.join("/")),h=[];return h.push(...u.map(f=>f===""?l:[l,f].join("/"))),a&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function sN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:fN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var aN=/^:[\w-]+$/,oN=3,lN=2,uN=1,cN=10,hN=-2,Xb=n=>n==="*";function dN(n,e){let t=n.split("/"),r=t.length;return t.some(Xb)&&(r+=hN),e&&(r+=lN),t.filter(a=>!Xb(a)).reduce((a,l)=>a+(aN.test(l)?oN:l===""?uN:cN),r)}function fN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function mN(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",v=Xm({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},_),w=f.route;if(!v&&p&&t&&!r[r.length-1].route.index&&(v=Xm({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:rs([l,v.pathname]),pathnameBase:EN(rs([l,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(l=rs([l,v.pathnameBase]))}return u}function Xm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=pN(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:v},w)=>{if(_==="*"){let C=h[w]||"";u=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const R=h[w];return v&&!R?p[_]=void 0:p[_]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:n}}function pN(n,e=!1,t=!0){Ur(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function gN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ur(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ss(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function yN(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?ec(n):n;return{pathname:t?t.startsWith("/")?t:_N(t,e):e,search:TN(r),hash:wN(a)}}function _N(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function w_(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function PS(n){let e=vN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function OS(n,e,t,r=!1){let a;typeof n=="string"?a=ec(n):(a={...n},bt(!a.pathname||!a.pathname.includes("?"),w_("?","pathname","search",a)),bt(!a.pathname||!a.pathname.includes("#"),w_("#","pathname","hash",a)),bt(!a.search||!a.search.includes("#"),w_("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),v-=1;a.pathname=w.join("/")}h=v>=0?e[v]:"/"}let f=yN(a,h),p=u&&u!=="/"&&u.endsWith("/"),_=(l||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||_)&&(f.pathname+="/"),f}var rs=n=>n.join("/").replace(/\/\/+/g,"/"),EN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),TN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,wN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function bN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var NS=["POST","PUT","PATCH","DELETE"];new Set(NS);var IN=["GET",...NS];new Set(IN);var tc=Q.createContext(null);tc.displayName="DataRouter";var Dp=Q.createContext(null);Dp.displayName="DataRouterState";var xS=Q.createContext({isTransitioning:!1});xS.displayName="ViewTransition";var AN=Q.createContext(new Map);AN.displayName="Fetchers";var SN=Q.createContext(null);SN.displayName="Await";var bi=Q.createContext(null);bi.displayName="Navigation";var Pd=Q.createContext(null);Pd.displayName="Location";var Fr=Q.createContext({outlet:null,matches:[],isDataRoute:!1});Fr.displayName="Route";var Fv=Q.createContext(null);Fv.displayName="RouteError";function RN(n,{relative:e}={}){bt(Od(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Q.useContext(bi),{hash:a,pathname:l,search:u}=Nd(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:rs([t,l])),r.createHref({pathname:h,search:u,hash:a})}function Od(){return Q.useContext(Pd)!=null}function ds(){return bt(Od(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(Pd).location}var VS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kS(n){Q.useContext(bi).static||Q.useLayoutEffect(n)}function Bv(){let{isDataRoute:n}=Q.useContext(Fr);return n?qN():CN()}function CN(){bt(Od(),"useNavigate() may be used only in the context of a <Router> component.");let n=Q.useContext(tc),{basename:e,navigator:t}=Q.useContext(bi),{matches:r}=Q.useContext(Fr),{pathname:a}=ds(),l=JSON.stringify(PS(r)),u=Q.useRef(!1);return kS(()=>{u.current=!0}),Q.useCallback((f,p={})=>{if(Ur(u.current,VS),!u.current)return;if(typeof f=="number"){t.go(f);return}let _=OS(f,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:rs([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,a,n])}var DN=Q.createContext(null);function PN(n){let e=Q.useContext(Fr).outlet;return e&&Q.createElement(DN.Provider,{value:n},e)}function pB(){let{matches:n}=Q.useContext(Fr),e=n[n.length-1];return e?e.params:{}}function Nd(n,{relative:e}={}){let{matches:t}=Q.useContext(Fr),{pathname:r}=ds(),a=JSON.stringify(PS(t));return Q.useMemo(()=>OS(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function ON(n,e){return MS(n,e)}function MS(n,e,t,r){var Y;bt(Od(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=Q.useContext(bi),{matches:u}=Q.useContext(Fr),h=u[u.length-1],f=h?h.params:{},p=h?h.pathname:"/",_=h?h.pathnameBase:"/",v=h&&h.route;{let K=v&&v.path||"";LS(p,!v||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let w=ds(),R;if(e){let K=typeof e=="string"?ec(e):e;bt(_==="/"||((Y=K.pathname)==null?void 0:Y.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${K.pathname}" was given in the \`location\` prop.`),R=K}else R=w;let C=R.pathname||"/",N=C;if(_!=="/"){let K=_.replace(/^\//,"").split("/");N="/"+C.replace(/^\//,"").split("/").slice(K.length).join("/")}let V=!l&&t&&t.matches&&t.matches.length>0?t.matches:RS(n,{pathname:N});Ur(v||V!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),Ur(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=MN(V&&V.map(K=>Object.assign({},K,{params:Object.assign({},f,K.params),pathname:rs([_,a.encodeLocation?a.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?_:rs([_,a.encodeLocation?a.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),u,t,r);return e&&z?Q.createElement(Pd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},z):z}function NN(){let n=BN(),e=bN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=Q.createElement(Q.Fragment,null,Q.createElement("p",null,"💿 Hey developer 👋"),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:l},"ErrorBoundary")," or"," ",Q.createElement("code",{style:l},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:a},t):null,u)}var xN=Q.createElement(NN,null),VN=class extends Q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?Q.createElement(Fr.Provider,{value:this.props.routeContext},Q.createElement(Fv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kN({routeContext:n,match:e,children:t}){let r=Q.useContext(tc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(Fr.Provider,{value:n},t)}function MN(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let f=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);bt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,h=-1;if(t)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:_,errors:v}=t,w=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||w){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,p,_)=>{let v,w=!1,R=null,C=null;t&&(v=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||xN,u&&(h<0&&_===0?(LS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,C=null):h===_&&(w=!0,C=p.route.hydrateFallbackElement||null)));let N=e.concat(a.slice(0,_+1)),V=()=>{let z;return v?z=R:w?z=C:p.route.Component?z=Q.createElement(p.route.Component,null):p.route.element?z=p.route.element:z=f,Q.createElement(kN,{match:p,routeContext:{outlet:f,matches:N,isDataRoute:t!=null},children:z})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?Q.createElement(VN,{location:t.location,revalidation:t.revalidation,component:R,error:v,children:V(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):V()},null)}function qv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LN(n){let e=Q.useContext(tc);return bt(e,qv(n)),e}function UN(n){let e=Q.useContext(Dp);return bt(e,qv(n)),e}function zN(n){let e=Q.useContext(Fr);return bt(e,qv(n)),e}function jv(n){let e=zN(n),t=e.matches[e.matches.length-1];return bt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function FN(){return jv("useRouteId")}function BN(){var r;let n=Q.useContext(Fv),e=UN("useRouteError"),t=jv("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function qN(){let{router:n}=LN("useNavigate"),e=jv("useNavigate"),t=Q.useRef(!1);return kS(()=>{t.current=!0}),Q.useCallback(async(a,l={})=>{Ur(t.current,VS),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var Zb={};function LS(n,e,t){!e&&!Zb[n]&&(Zb[n]=!0,Ur(!1,t))}Q.memo(jN);function jN({routes:n,future:e,state:t}){return MS(n,void 0,t,e)}function HN(n){return PN(n.context)}function Hn(n){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GN({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){bt(!Od(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=Q.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=ec(t));let{pathname:f="/",search:p="",hash:_="",state:v=null,key:w="default"}=t,R=Q.useMemo(()=>{let C=ss(f,u);return C==null?null:{location:{pathname:C,search:p,hash:_,state:v,key:w},navigationType:r}},[u,f,p,_,v,w,r]);return Ur(R!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:Q.createElement(bi.Provider,{value:h},Q.createElement(Pd.Provider,{children:e,value:R}))}function KN({children:n,location:e}){return ON(K_(n),e)}function K_(n,e=[]){let t=[];return Q.Children.forEach(n,(r,a)=>{if(!Q.isValidElement(r))return;let l=[...e,a];if(r.type===Q.Fragment){t.push.apply(t,K_(r.props.children,l));return}bt(r.type===Hn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=K_(r.props.children,l)),t.push(u)}),t}var Vm="get",km="application/x-www-form-urlencoded";function Pp(n){return n!=null&&typeof n.tagName=="string"}function QN(n){return Pp(n)&&n.tagName.toLowerCase()==="button"}function $N(n){return Pp(n)&&n.tagName.toLowerCase()==="form"}function WN(n){return Pp(n)&&n.tagName.toLowerCase()==="input"}function YN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function XN(n,e){return n.button===0&&(!e||e==="_self")&&!YN(n)}function Q_(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(a=>[t,a]):[[t,r]])},[]))}function ZN(n,e){let t=Q_(n);return e&&e.forEach((r,a)=>{t.has(a)||e.getAll(a).forEach(l=>{t.append(a,l)})}),t}var bm=null;function JN(){if(bm===null)try{new FormData(document.createElement("form"),0),bm=!1}catch{bm=!0}return bm}var ex=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function b_(n){return n!=null&&!ex.has(n)?(Ur(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${km}"`),null):n}function tx(n,e){let t,r,a,l,u;if($N(n)){let h=n.getAttribute("action");r=h?ss(h,e):null,t=n.getAttribute("method")||Vm,a=b_(n.getAttribute("enctype"))||km,l=new FormData(n)}else if(QN(n)||WN(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(r=f?ss(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Vm,a=b_(n.getAttribute("formenctype"))||b_(h.getAttribute("enctype"))||km,l=new FormData(h,n),!JN()){let{name:p,type:_,value:v}=n;if(_==="image"){let w=p?`${p}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else p&&l.append(p,v)}}else{if(Pp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Vm,r=null,a=km,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:u}}function Hv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function nx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function ix(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await nx(l,t);return u.links?u.links():[]}return[]}));return lx(r.flat(1).filter(rx).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Jb(n,e,t,r,a,l){let u=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,h=(f,p)=>{var _;return t[p].pathname!==f.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return l==="assets"?e.filter((f,p)=>u(f,p)||h(f,p)):l==="data"?e.filter((f,p)=>{var v;let _=r.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(u(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let w=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function sx(n,e,{includeHydrateFallback:t}={}){return ax(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function ax(n){return[...new Set(n)]}function ox(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function lx(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(ox(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function ux(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&ss(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function US(){let n=Q.useContext(tc);return Hv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function cx(){let n=Q.useContext(Dp);return Hv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Gv=Q.createContext(void 0);Gv.displayName="FrameworkContext";function zS(){let n=Q.useContext(Gv);return Hv(n,"You must render this element inside a <HydratedRouter> element"),n}function hx(n,e){let t=Q.useContext(Gv),[r,a]=Q.useState(!1),[l,u]=Q.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:_,onTouchStart:v}=e,w=Q.useRef(null);Q.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let N=z=>{z.forEach(Y=>{u(Y.isIntersecting)})},V=new IntersectionObserver(N,{threshold:.5});return w.current&&V.observe(w.current),()=>{V.disconnect()}}},[n]),Q.useEffect(()=>{if(r){let N=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(N)}}},[r]);let R=()=>{a(!0)},C=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,w,{}]:[l,w,{onFocus:Ah(h,R),onBlur:Ah(f,C),onMouseEnter:Ah(p,R),onMouseLeave:Ah(_,C),onTouchStart:Ah(v,R)}]:[!1,w,{}]}function Ah(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function dx({page:n,...e}){let{router:t}=US(),r=Q.useMemo(()=>RS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?Q.createElement(mx,{page:n,matches:r,...e}):null}function fx(n){let{manifest:e,routeModules:t}=zS(),[r,a]=Q.useState([]);return Q.useEffect(()=>{let l=!1;return ix(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),r}function mx({page:n,matches:e,...t}){let r=ds(),{manifest:a,routeModules:l}=zS(),{basename:u}=US(),{loaderData:h,matches:f}=cx(),p=Q.useMemo(()=>Jb(n,e,f,a,r,"data"),[n,e,f,a,r]),_=Q.useMemo(()=>Jb(n,e,f,a,r,"assets"),[n,e,f,a,r]),v=Q.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,N=!1;if(e.forEach(z=>{var K;let Y=a.routes[z.route.id];!Y||!Y.hasLoader||(!p.some(ue=>ue.route.id===z.route.id)&&z.route.id in h&&((K=l[z.route.id])!=null&&K.shouldRevalidate)||Y.hasClientLoader?N=!0:C.add(z.route.id))}),C.size===0)return[];let V=ux(n,u);return N&&C.size>0&&V.searchParams.set("_routes",e.filter(z=>C.has(z.route.id)).map(z=>z.route.id).join(",")),[V.pathname+V.search]},[u,h,r,a,p,e,n,l]),w=Q.useMemo(()=>sx(_,a),[_,a]),R=fx(_);return Q.createElement(Q.Fragment,null,v.map(C=>Q.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),w.map(C=>Q.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),R.map(({key:C,link:N})=>Q.createElement("link",{key:C,...N})))}function px(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var FS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FS&&(window.__reactRouterVersion="7.4.0")}catch{}function gx({basename:n,children:e,window:t}){let r=Q.useRef();r.current==null&&(r.current=tN({window:t,v5Compat:!0}));let a=r.current,[l,u]=Q.useState({action:a.action,location:a.location}),h=Q.useCallback(f=>{Q.startTransition(()=>u(f))},[u]);return Q.useLayoutEffect(()=>a.listen(h),[a,h]),Q.createElement(GN,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var BS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zm=Q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:u,state:h,target:f,to:p,preventScrollReset:_,viewTransition:v,...w},R){let{basename:C}=Q.useContext(bi),N=typeof p=="string"&&BS.test(p),V,z=!1;if(typeof p=="string"&&N&&(V=p,FS))try{let A=new URL(window.location.href),O=p.startsWith("//")?new URL(A.protocol+p):new URL(p),M=ss(O.pathname,C);O.origin===A.origin&&M!=null?p=M+O.search+O.hash:z=!0}catch{Ur(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=RN(p,{relative:a}),[K,ue,le]=hx(r,w),J=Ex(p,{replace:u,state:h,target:f,preventScrollReset:_,relative:a,viewTransition:v});function x(A){e&&e(A),A.defaultPrevented||J(A)}let S=Q.createElement("a",{...w,...le,href:V||Y,onClick:z||l?e:x,ref:px(R,ue),target:f,"data-discover":!N&&t==="render"?"true":void 0});return K&&!N?Q.createElement(Q.Fragment,null,S,Q.createElement(dx,{page:Y})):S});Zm.displayName="Link";var yx=Q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:u,viewTransition:h,children:f,...p},_){let v=Nd(u,{relative:p.relative}),w=ds(),R=Q.useContext(Dp),{navigator:C,basename:N}=Q.useContext(bi),V=R!=null&&Ax(v)&&h===!0,z=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,Y=w.pathname,K=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),K=K?K.toLowerCase():null,z=z.toLowerCase()),K&&N&&(K=ss(K,N)||K);const ue=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let le=Y===z||!a&&Y.startsWith(z)&&Y.charAt(ue)==="/",J=K!=null&&(K===z||!a&&K.startsWith(z)&&K.charAt(z.length)==="/"),x={isActive:le,isPending:J,isTransitioning:V},S=le?e:void 0,A;typeof r=="function"?A=r(x):A=[r,le?"active":null,J?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(x):l;return Q.createElement(Zm,{...p,"aria-current":S,className:A,ref:_,style:O,to:u,viewTransition:h},typeof f=="function"?f(x):f)});yx.displayName="NavLink";var _x=Q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:u=Vm,action:h,onSubmit:f,relative:p,preventScrollReset:_,viewTransition:v,...w},R)=>{let C=bx(),N=Ix(h,{relative:p}),V=u.toLowerCase()==="get"?"get":"post",z=typeof h=="string"&&BS.test(h),Y=K=>{if(f&&f(K),K.defaultPrevented)return;K.preventDefault();let ue=K.nativeEvent.submitter,le=(ue==null?void 0:ue.getAttribute("formmethod"))||u;C(ue||K.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:v})};return Q.createElement("form",{ref:R,method:V,action:N,onSubmit:r?f:Y,...w,"data-discover":!z&&n==="render"?"true":void 0})});_x.displayName="Form";function vx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qS(n){let e=Q.useContext(tc);return bt(e,vx(n)),e}function Ex(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:u}={}){let h=Bv(),f=ds(),p=Nd(n,{relative:l});return Q.useCallback(_=>{if(XN(_,e)){_.preventDefault();let v=t!==void 0?t:ed(f)===ed(p);h(n,{replace:v,state:r,preventScrollReset:a,relative:l,viewTransition:u})}},[f,h,p,t,r,e,n,a,l,u])}function gB(n){Ur(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=Q.useRef(Q_(n)),t=Q.useRef(!1),r=ds(),a=Q.useMemo(()=>ZN(r.search,t.current?null:e.current),[r.search]),l=Bv(),u=Q.useCallback((h,f)=>{const p=Q_(typeof h=="function"?h(a):h);t.current=!0,l("?"+p,f)},[l,a]);return[a,u]}var Tx=0,wx=()=>`__${String(++Tx)}__`;function bx(){let{router:n}=qS("useSubmit"),{basename:e}=Q.useContext(bi),t=FN();return Q.useCallback(async(r,a={})=>{let{action:l,method:u,encType:h,formData:f,body:p}=tx(r,e);if(a.navigate===!1){let _=a.fetcherKey||wx();await n.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function Ix(n,{relative:e}={}){let{basename:t}=Q.useContext(bi),r=Q.useContext(Fr);bt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Nd(n||".",{relative:e})},u=ds();if(n==null){l.search=u.search;let h=new URLSearchParams(l.search),f=h.getAll("index");if(f.some(_=>_==="")){h.delete("index"),f.filter(v=>v).forEach(v=>h.append("index",v));let _=h.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:rs([t,l.pathname])),ed(l)}function Ax(n,e={}){let t=Q.useContext(xS);bt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=qS("useViewTransitionState"),a=Nd(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=ss(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=ss(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Xm(a.pathname,u)!=null||Xm(a.pathname,l)!=null}new TextEncoder;const jS={initialized:!1,isPending:!1,signin:async()=>({}),signout:async()=>({}),signup:async()=>({}),updateUser:async()=>({}),updateUserDetail:async()=>({}),signinWithProvider:async()=>({}),user:null},HS=Q.createContext(jS),GS=()=>Q.useContext(HS);var KS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},eI=jo.createContext&&jo.createContext(KS),Sx=["attr","size","title"];function Rx(n,e){if(n==null)return{};var t=Cx(n,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Cx(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Jm(){return Jm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jm.apply(this,arguments)}function tI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function ep(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tI(Object(t),!0).forEach(function(r){Dx(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Dx(n,e,t){return e=Px(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Px(n){var e=Ox(n,"string");return typeof e=="symbol"?e:e+""}function Ox(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function QS(n){return n&&n.map((e,t)=>jo.createElement(e.tag,ep({key:t},e.attr),QS(e.child)))}function nc(n){return e=>jo.createElement(Nx,Jm({attr:ep({},n.attr)},e),QS(n.child))}function Nx(n){var e=t=>{var{attr:r,size:a,title:l}=n,u=Rx(n,Sx),h=a||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),jo.createElement("svg",Jm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,u,{className:f,style:ep(ep({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&jo.createElement("title",null,l),n.children)};return eI!==void 0?jo.createElement(eI.Consumer,null,t=>e(t)):e(KS)}function xx(n){return nc({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{opacity:"0.2",fillRule:"evenodd",clipRule:"evenodd",d:"M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z",fill:"currentColor"},child:[]}]})(n)}const Kv="-",Vx=n=>{const e=Mx(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:u=>{const h=u.split(Kv);return h[0]===""&&h.length!==1&&h.shift(),$S(h,e)||kx(u)},getConflictingClassGroupIds:(u,h)=>{const f=t[u]||[];return h&&r[u]?[...f,...r[u]]:f}}},$S=(n,e)=>{var u;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),a=r?$S(n.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const l=n.join(Kv);return(u=e.validators.find(({validator:h})=>h(l)))==null?void 0:u.classGroupId},nI=/^\[(.+)\]$/,kx=n=>{if(nI.test(n)){const e=nI.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Mx=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const a in t)$_(t[a],r,a,e);return r},$_=(n,e,t,r)=>{n.forEach(a=>{if(typeof a=="string"){const l=a===""?e:rI(e,a);l.classGroupId=t;return}if(typeof a=="function"){if(Lx(a)){$_(a(r),e,t,r);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([l,u])=>{$_(u,rI(e,l),t,r)})})},rI=(n,e)=>{let t=n;return e.split(Kv).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},Lx=n=>n.isThemeGetter,Ux=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const a=(l,u)=>{t.set(l,u),e++,e>n&&(e=0,r=t,t=new Map)};return{get(l){let u=t.get(l);if(u!==void 0)return u;if((u=r.get(l))!==void 0)return a(l,u),u},set(l,u){t.has(l)?t.set(l,u):a(l,u)}}},W_="!",Y_=":",zx=Y_.length,Fx=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=a=>{const l=[];let u=0,h=0,f=0,p;for(let C=0;C<a.length;C++){let N=a[C];if(u===0&&h===0){if(N===Y_){l.push(a.slice(f,C)),f=C+zx;continue}if(N==="/"){p=C;continue}}N==="["?u++:N==="]"?u--:N==="("?h++:N===")"&&h--}const _=l.length===0?a:a.substring(f),v=Bx(_),w=v!==_,R=p&&p>f?p-f:void 0;return{modifiers:l,hasImportantModifier:w,baseClassName:v,maybePostfixModifierPosition:R}};if(e){const a=e+Y_,l=r;r=u=>u.startsWith(a)?l(u.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const a=r;r=l=>t({className:l,parseClassName:a})}return r},Bx=n=>n.endsWith(W_)?n.substring(0,n.length-1):n.startsWith(W_)?n.substring(1):n,qx=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let l=[];return r.forEach(u=>{u[0]==="["||e[u]?(a.push(...l.sort(),u),l=[]):l.push(u)}),a.push(...l.sort()),a}},jx=n=>({cache:Ux(n.cacheSize),parseClassName:Fx(n),sortModifiers:qx(n),...Vx(n)}),Hx=/\s+/,Gx=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:l}=e,u=[],h=n.trim().split(Hx);let f="";for(let p=h.length-1;p>=0;p-=1){const _=h[p],{isExternal:v,modifiers:w,hasImportantModifier:R,baseClassName:C,maybePostfixModifierPosition:N}=t(_);if(v){f=_+(f.length>0?" "+f:f);continue}let V=!!N,z=r(V?C.substring(0,N):C);if(!z){if(!V){f=_+(f.length>0?" "+f:f);continue}if(z=r(C),!z){f=_+(f.length>0?" "+f:f);continue}V=!1}const Y=l(w).join(":"),K=R?Y+W_:Y,ue=K+z;if(u.includes(ue))continue;u.push(ue);const le=a(z,V);for(let J=0;J<le.length;++J){const x=le[J];u.push(K+x)}f=_+(f.length>0?" "+f:f)}return f};function Kx(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=WS(e))&&(r&&(r+=" "),r+=t);return r}const WS=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=WS(n[r]))&&(t&&(t+=" "),t+=e);return t};function Qx(n,...e){let t,r,a,l=u;function u(f){const p=e.reduce((_,v)=>v(_),n());return t=jx(p),r=t.cache.get,a=t.cache.set,l=h,h(f)}function h(f){const p=r(f);if(p)return p;const _=Gx(f,t);return a(f,_),_}return function(){return l(Kx.apply(null,arguments))}}const ln=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},YS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,XS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,$x=/^\d+\/\d+$/,Wx=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Xx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Zx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Jx=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,tu=n=>$x.test(n),Be=n=>!!n&&!Number.isNaN(Number(n)),bo=n=>!!n&&Number.isInteger(Number(n)),iI=n=>n.endsWith("%")&&Be(n.slice(0,-1)),ra=n=>Wx.test(n),eV=()=>!0,tV=n=>Yx.test(n)&&!Xx.test(n),Qv=()=>!1,nV=n=>Zx.test(n),rV=n=>Jx.test(n),iV=n=>!_e(n)&&!ve(n),sV=n=>rc(n,eR,Qv),_e=n=>YS.test(n),Io=n=>rc(n,tR,tV),I_=n=>rc(n,gV,Be),aV=n=>rc(n,ZS,Qv),oV=n=>rc(n,JS,rV),lV=n=>rc(n,Qv,nV),ve=n=>XS.test(n),Im=n=>ic(n,tR),uV=n=>ic(n,yV),cV=n=>ic(n,ZS),hV=n=>ic(n,eR),dV=n=>ic(n,JS),fV=n=>ic(n,_V,!0),rc=(n,e,t)=>{const r=YS.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},ic=(n,e,t=!1)=>{const r=XS.exec(n);return r?r[1]?e(r[1]):t:!1},ZS=n=>n==="position",mV=new Set(["image","url"]),JS=n=>mV.has(n),pV=new Set(["length","size","percentage"]),eR=n=>pV.has(n),tR=n=>n==="length",gV=n=>n==="number",yV=n=>n==="family-name",_V=n=>n==="shadow",vV=()=>{const n=ln("color"),e=ln("font"),t=ln("text"),r=ln("font-weight"),a=ln("tracking"),l=ln("leading"),u=ln("breakpoint"),h=ln("container"),f=ln("spacing"),p=ln("radius"),_=ln("shadow"),v=ln("inset-shadow"),w=ln("drop-shadow"),R=ln("blur"),C=ln("perspective"),N=ln("aspect"),V=ln("ease"),z=ln("animate"),Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ue=()=>["auto","hidden","clip","visible","scroll"],le=()=>["auto","contain","none"],J=()=>[ve,_e,f],x=()=>[tu,"full","auto",...J()],S=()=>[bo,"none","subgrid",ve,_e],A=()=>["auto",{span:["full",bo,ve,_e]},ve,_e],O=()=>[bo,"auto",ve,_e],M=()=>["auto","min","max","fr",ve,_e],B=()=>["start","end","center","between","around","evenly","stretch","baseline"],P=()=>["start","end","center","stretch"],nt=()=>["auto",...J()],at=()=>[tu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...J()],se=()=>[n,ve,_e],Se=()=>[iI,Io],pe=()=>["","none","full",p,ve,_e],Ne=()=>["",Be,Im,Io],k=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>["","none",R,ve,_e],me=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ve,_e],fe=()=>["none",Be,ve,_e],Pe=()=>["none",Be,ve,_e],Oe=()=>[Be,ve,_e],ft=()=>[tu,"full",...J()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ra],breakpoint:[ra],color:[eV],container:[ra],"drop-shadow":[ra],ease:["in","out","in-out"],font:[iV],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ra],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ra],shadow:[ra],spacing:["px",Be],text:[ra],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",tu,_e,ve,N]}],container:["container"],columns:[{columns:[Be,_e,ve,h]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),_e,ve]}],overflow:[{overflow:ue()}],"overflow-x":[{"overflow-x":ue()}],"overflow-y":[{"overflow-y":ue()}],overscroll:[{overscroll:le()}],"overscroll-x":[{"overscroll-x":le()}],"overscroll-y":[{"overscroll-y":le()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:x()}],"inset-x":[{"inset-x":x()}],"inset-y":[{"inset-y":x()}],start:[{start:x()}],end:[{end:x()}],top:[{top:x()}],right:[{right:x()}],bottom:[{bottom:x()}],left:[{left:x()}],visibility:["visible","invisible","collapse"],z:[{z:[bo,"auto",ve,_e]}],basis:[{basis:[tu,"full","auto",h,...J()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Be,tu,"auto","initial","none",_e]}],grow:[{grow:["",Be,ve,_e]}],shrink:[{shrink:["",Be,ve,_e]}],order:[{order:[bo,"first","last","none",ve,_e]}],"grid-cols":[{"grid-cols":S()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":S()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:J()}],"gap-x":[{"gap-x":J()}],"gap-y":[{"gap-y":J()}],"justify-content":[{justify:[...B(),"normal"]}],"justify-items":[{"justify-items":[...P(),"normal"]}],"justify-self":[{"justify-self":["auto",...P()]}],"align-content":[{content:["normal",...B()]}],"align-items":[{items:[...P(),"baseline"]}],"align-self":[{self:["auto",...P(),"baseline"]}],"place-content":[{"place-content":B()}],"place-items":[{"place-items":[...P(),"baseline"]}],"place-self":[{"place-self":["auto",...P()]}],p:[{p:J()}],px:[{px:J()}],py:[{py:J()}],ps:[{ps:J()}],pe:[{pe:J()}],pt:[{pt:J()}],pr:[{pr:J()}],pb:[{pb:J()}],pl:[{pl:J()}],m:[{m:nt()}],mx:[{mx:nt()}],my:[{my:nt()}],ms:[{ms:nt()}],me:[{me:nt()}],mt:[{mt:nt()}],mr:[{mr:nt()}],mb:[{mb:nt()}],ml:[{ml:nt()}],"space-x":[{"space-x":J()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":J()}],"space-y-reverse":["space-y-reverse"],size:[{size:at()}],w:[{w:[h,"screen",...at()]}],"min-w":[{"min-w":[h,"screen","none",...at()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...at()]}],h:[{h:["screen",...at()]}],"min-h":[{"min-h":["screen","none",...at()]}],"max-h":[{"max-h":["screen",...at()]}],"font-size":[{text:["base",t,Im,Io]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ve,I_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",iI,_e]}],"font-family":[{font:[uV,_e,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ve,_e]}],"line-clamp":[{"line-clamp":[Be,"none",ve,I_]}],leading:[{leading:[l,...J()]}],"list-image":[{"list-image":["none",ve,_e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ve,_e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:se()}],"text-color":[{text:se()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...k(),"wavy"]}],"text-decoration-thickness":[{decoration:[Be,"from-font","auto",ve,Io]}],"text-decoration-color":[{decoration:se()}],"underline-offset":[{"underline-offset":[Be,"auto",ve,_e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:J()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve,_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve,_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),cV,aV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",hV,sV]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},bo,ve,_e],radial:["",ve,_e],conic:[bo,ve,_e]},dV,oV]}],"bg-color":[{bg:se()}],"gradient-from-pos":[{from:Se()}],"gradient-via-pos":[{via:Se()}],"gradient-to-pos":[{to:Se()}],"gradient-from":[{from:se()}],"gradient-via":[{via:se()}],"gradient-to":[{to:se()}],rounded:[{rounded:pe()}],"rounded-s":[{"rounded-s":pe()}],"rounded-e":[{"rounded-e":pe()}],"rounded-t":[{"rounded-t":pe()}],"rounded-r":[{"rounded-r":pe()}],"rounded-b":[{"rounded-b":pe()}],"rounded-l":[{"rounded-l":pe()}],"rounded-ss":[{"rounded-ss":pe()}],"rounded-se":[{"rounded-se":pe()}],"rounded-ee":[{"rounded-ee":pe()}],"rounded-es":[{"rounded-es":pe()}],"rounded-tl":[{"rounded-tl":pe()}],"rounded-tr":[{"rounded-tr":pe()}],"rounded-br":[{"rounded-br":pe()}],"rounded-bl":[{"rounded-bl":pe()}],"border-w":[{border:Ne()}],"border-w-x":[{"border-x":Ne()}],"border-w-y":[{"border-y":Ne()}],"border-w-s":[{"border-s":Ne()}],"border-w-e":[{"border-e":Ne()}],"border-w-t":[{"border-t":Ne()}],"border-w-r":[{"border-r":Ne()}],"border-w-b":[{"border-b":Ne()}],"border-w-l":[{"border-l":Ne()}],"divide-x":[{"divide-x":Ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...k(),"hidden","none"]}],"divide-style":[{divide:[...k(),"hidden","none"]}],"border-color":[{border:se()}],"border-color-x":[{"border-x":se()}],"border-color-y":[{"border-y":se()}],"border-color-s":[{"border-s":se()}],"border-color-e":[{"border-e":se()}],"border-color-t":[{"border-t":se()}],"border-color-r":[{"border-r":se()}],"border-color-b":[{"border-b":se()}],"border-color-l":[{"border-l":se()}],"divide-color":[{divide:se()}],"outline-style":[{outline:[...k(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Be,ve,_e]}],"outline-w":[{outline:["",Be,Im,Io]}],"outline-color":[{outline:[n]}],shadow:[{shadow:["","none",_,fV,lV]}],"shadow-color":[{shadow:se()}],"inset-shadow":[{"inset-shadow":["none",ve,_e,v]}],"inset-shadow-color":[{"inset-shadow":se()}],"ring-w":[{ring:Ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:se()}],"ring-offset-w":[{"ring-offset":[Be,Io]}],"ring-offset-color":[{"ring-offset":se()}],"inset-ring-w":[{"inset-ring":Ne()}],"inset-ring-color":[{"inset-ring":se()}],opacity:[{opacity:[Be,ve,_e]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],filter:[{filter:["","none",ve,_e]}],blur:[{blur:Te()}],brightness:[{brightness:[Be,ve,_e]}],contrast:[{contrast:[Be,ve,_e]}],"drop-shadow":[{"drop-shadow":["","none",w,ve,_e]}],grayscale:[{grayscale:["",Be,ve,_e]}],"hue-rotate":[{"hue-rotate":[Be,ve,_e]}],invert:[{invert:["",Be,ve,_e]}],saturate:[{saturate:[Be,ve,_e]}],sepia:[{sepia:["",Be,ve,_e]}],"backdrop-filter":[{"backdrop-filter":["","none",ve,_e]}],"backdrop-blur":[{"backdrop-blur":Te()}],"backdrop-brightness":[{"backdrop-brightness":[Be,ve,_e]}],"backdrop-contrast":[{"backdrop-contrast":[Be,ve,_e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Be,ve,_e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Be,ve,_e]}],"backdrop-invert":[{"backdrop-invert":["",Be,ve,_e]}],"backdrop-opacity":[{"backdrop-opacity":[Be,ve,_e]}],"backdrop-saturate":[{"backdrop-saturate":[Be,ve,_e]}],"backdrop-sepia":[{"backdrop-sepia":["",Be,ve,_e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":J()}],"border-spacing-x":[{"border-spacing-x":J()}],"border-spacing-y":[{"border-spacing-y":J()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ve,_e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Be,"initial",ve,_e]}],ease:[{ease:["linear","initial",V,ve,_e]}],delay:[{delay:[Be,ve,_e]}],animate:[{animate:["none",z,ve,_e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,ve,_e]}],"perspective-origin":[{"perspective-origin":me()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:Pe()}],"scale-x":[{"scale-x":Pe()}],"scale-y":[{"scale-y":Pe()}],"scale-z":[{"scale-z":Pe()}],"scale-3d":["scale-3d"],skew:[{skew:Oe()}],"skew-x":[{"skew-x":Oe()}],"skew-y":[{"skew-y":Oe()}],transform:[{transform:[ve,_e,"","none","gpu","cpu"]}],"transform-origin":[{origin:me()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ft()}],"translate-x":[{"translate-x":ft()}],"translate-y":[{"translate-y":ft()}],"translate-z":[{"translate-z":ft()}],"translate-none":["translate-none"],accent:[{accent:se()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:se()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve,_e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":J()}],"scroll-mx":[{"scroll-mx":J()}],"scroll-my":[{"scroll-my":J()}],"scroll-ms":[{"scroll-ms":J()}],"scroll-me":[{"scroll-me":J()}],"scroll-mt":[{"scroll-mt":J()}],"scroll-mr":[{"scroll-mr":J()}],"scroll-mb":[{"scroll-mb":J()}],"scroll-ml":[{"scroll-ml":J()}],"scroll-p":[{"scroll-p":J()}],"scroll-px":[{"scroll-px":J()}],"scroll-py":[{"scroll-py":J()}],"scroll-ps":[{"scroll-ps":J()}],"scroll-pe":[{"scroll-pe":J()}],"scroll-pt":[{"scroll-pt":J()}],"scroll-pr":[{"scroll-pr":J()}],"scroll-pb":[{"scroll-pb":J()}],"scroll-pl":[{"scroll-pl":J()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve,_e]}],fill:[{fill:["none",...se()]}],"stroke-w":[{stroke:[Be,Im,Io,I_]}],stroke:[{stroke:["none",...se()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},Mm=Qx(vV),EV=({divClassName:n,hideMessage:e,iconClassName:t,message:r,pClassName:a})=>Ae.jsxs("div",{className:Mm("fixed col gap-y-2.5 top-0 left-0 w-full h-screen items-center justify-center",n),children:[Ae.jsx(xx,{className:Mm("text-6xl animate-spin text-theme",t)}),!e&&Ae.jsx("p",{className:Mm("text-xl font-light animate-pulse",a),children:r??"is Loading..."})]});function yB(n){return nc({attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64Zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372Zm128.013 198.826c.023.007.042.018.083.059l45.02 45.019c.04.04.05.06.058.083a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082L557.254 512l127.861 127.862a.268.268 0 0 1 .05.06l.009.023a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082l-45.019 45.02c-.04.04-.06.05-.083.058a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059L512 557.254 384.14 685.115c-.042.041-.06.052-.084.059a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059l-45.02-45.019c-.04-.04-.05-.06-.058-.083a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082L466.745 512l-127.86-127.86a.268.268 0 0 1-.05-.061l-.009-.023a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082l45.019-45.02c.04-.04.06-.05.083-.058a.118.118 0 0 1 .07 0c.022.007.041.018.082.059L512 466.745l127.862-127.86c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(n)}function TV(n){return nc({attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926 224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512 166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(n)}function _B(n){return nc({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"},child:[]}]})(n)}function wV(n){return nc({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"},child:[]}]})(n)}function vB(n){return nc({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"},child:[]}]})(n)}const bV=({user:n})=>{const[e,t]=Q.useState(!1),r=Q.useMemo(()=>n?[{name:"홈",path:"/"},{name:"매칭중인팀",path:"/my?content=matching"},{name:"매칭된팀",path:"/my?content=my"},{name:"팀 찾기",path:"/find"},{name:"로그아웃"}]:[{name:"홈",path:"/"},{name:"회원가입",path:"/auth"},{name:"로그인",path:"/login"}],[n]),a=Bv(),{signout:l}=GS(),{pathname:u}=ds();return console.log(u),Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("header",{className:Mm(" z-50 bg-white/90 border-b border-border ",u==="/"?"relative":"fixed top-0 left-0 w-full"),children:Ae.jsxs("div",{className:"max-w-300 mt-auto row justify-between p-2.5",children:[Ae.jsx(Zm,{to:n?"/my":"/",className:"bg-transparent hover:text-theme",onClick:()=>t(!1),children:Ae.jsx("h1",{children:n?`${n.name}님 안녕하세요!`:"팀매칭앱"})}),Ae.jsxs("div",{className:"row gap-x-2.5",children:[u==="/find"&&Ae.jsx(Zm,{to:"/find/matching-teams",children:"공고등록"}),Ae.jsx("button",{onClick:()=>t(h=>!h),className:"w-10",children:e?Ae.jsx(TV,{}):Ae.jsx(wV,{})})]})]})}),e&&Ae.jsxs("nav",{className:"fixed top-0 right-0 w-full h-screen z-10 ",children:[Ae.jsx("span",{className:"absolute top-0 left-0 w-full h-screen ",onClick:()=>t(!1)}),Ae.jsx("ul",{className:"relative z-10 p-5 bg-white mt-[61px] border-t border-b border-border shadow-md sm:grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 max-w-300 mx-auto lg:border",children:r.map(h=>{const f=()=>{if(t(!1),h.path)return a(h.path);h.name==="로그아웃"&&confirm("로그아웃 하시겠습니까?")&&l().then(({message:p,success:_})=>{if(!_)alert(p);else{if(alert("로그아웃 되었습니다."),u==="/find")return;a("/")}})};return Ae.jsx("li",{children:Ae.jsx("button",{onClick:f,className:"w-full bg-transparent hover:bg-lightGray",children:h.name})},h.name)})})]}),Ae.jsx("main",{children:Ae.jsx(HN,{})})]})},IV=Q.lazy(()=>hs(()=>import("./page-Bz8Zhrw6.js"),__vite__mapDeps([0,1]))),AV=Q.lazy(()=>hs(()=>import("./page-BfLrwe6W.js"),__vite__mapDeps([2,1,3,4,5,6]))),SV=Q.lazy(()=>hs(()=>import("./page-BfoOVHMB.js"),__vite__mapDeps([7,5,3,6]))),RV=Q.lazy(()=>hs(()=>import("./page-CQifv6rn.js"),__vite__mapDeps([8,9,4,6,10,3,11,5]))),CV=Q.lazy(()=>hs(()=>import("./page-YnxTAmeY.js"),__vite__mapDeps([10,3,11,5]))),DV=Q.lazy(()=>hs(()=>import("./page-BXHNwGrc.js"),__vite__mapDeps([12,9,13,6,1]))),PV=Q.lazy(()=>hs(()=>import("./page-CP52Sqn7.js"),__vite__mapDeps([14,6,13,9]))),OV=Q.lazy(()=>hs(()=>import("./page-Dl0LDvN6.js"),__vite__mapDeps([15,6,3,4,1,11,5]))),NV=Q.lazy(()=>hs(()=>import("./page-DZsYRyaF.js"),__vite__mapDeps([16,6,9,3,11])));function xV(){const{initialized:n,user:e}=GS();return Ae.jsx(Q.Suspense,{fallback:Ae.jsx(EV,{message:"페이지가 로딩중입니다..."}),children:n?Ae.jsx(gx,{basename:"/find-crew",children:Ae.jsx(KN,{children:Ae.jsxs(Hn,{path:"/",element:Ae.jsx(bV,{user:e}),children:[Ae.jsx(Hn,{index:!0,Component:IV}),Ae.jsx(Hn,{path:"auth",Component:AV}),Ae.jsx(Hn,{path:"login",Component:SV}),Ae.jsxs(Hn,{path:"find",children:[Ae.jsx(Hn,{index:!0,Component:DV}),Ae.jsxs(Hn,{path:":id",children:[Ae.jsx(Hn,{index:!0,Component:PV}),e&&Ae.jsx(Hn,{path:"chat",element:Ae.jsx(NV,{...e})})]}),e&&Ae.jsx(Ae.Fragment,{children:Ae.jsx(Hn,{path:"matching-teams",element:Ae.jsx(OV,{})})})]}),e&&Ae.jsxs(Hn,{path:"my",children:[Ae.jsx(Hn,{index:!0,element:Ae.jsx(RV,{...e})}),Ae.jsx(Hn,{path:"account",element:Ae.jsx(CV,{...e})})]})]})})}):Ae.jsx("div",{className:"w-full h-screen col justify-center items-center bg-theme text-white",children:Ae.jsx("h1",{className:"text-5xl",children:"팀 매칭 앱"})})})}const VV=()=>{};var sI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},kV=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],f=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const l=n[t++],u=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},rR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,f=a+2<n.length,p=f?n[a+2]:0,_=l>>2,v=(l&3)<<4|h>>4;let w=(h&15)<<2|p>>6,R=p&63;f||(R=64,u||(w=64)),r.push(t[_],t[v],t[w],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||p==null||v==null)throw new MV;const w=l<<2|h>>4;if(r.push(w),p!==64){const R=h<<4&240|p>>2;if(r.push(R),v!==64){const C=p<<6&192|v;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LV=function(n){const e=nR(n);return rR.encodeByteArray(e,!0)},tp=function(n){return LV(n).replace(/\./g,"")},$v=function(n){try{return rR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function np(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!UV(t)||(n[t]=np(n[t],e[t]));return n}function UV(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=()=>iR().__FIREBASE_DEFAULTS__,FV=()=>{if(typeof process>"u"||typeof sI>"u")return;const n=sI.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&$v(n[1]);return e&&JSON.parse(e)},Wv=()=>{try{return VV()||zV()||FV()||BV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sR=()=>{var n;return(n=Wv())===null||n===void 0?void 0:n.config},qV=n=>{var e;return(e=Wv())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[tp(JSON.stringify(t)),tp(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function Yv(){var n;const e=(n=Wv())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KV(){return typeof window<"u"||aR()}function aR(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function QV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Xv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lR(){const n=At();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uR(){return!Yv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function td(){try{return typeof indexedDB=="object"}catch{return!1}}function $V(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="FirebaseError";class Un extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=WV,Object.setPrototypeOf(this,Un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sl.prototype.create)}}class sl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?YV(l,r):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Un(a,h,r)}}function YV(n,e){return n.replace(XV,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const XV=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ZV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ia(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],u=e[a];if(oI(l)&&oI(u)){if(!Ia(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function oI(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Mh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function cR(n,e){const t=new JV(n,e);return t.subscribe.bind(t)}class JV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ek(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=A_),a.error===void 0&&(a.error=A_),a.complete===void 0&&(a.complete=A_);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ek(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function A_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n){return n&&n._delegate?n._delegate:n}class _i{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new jV;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rk(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&u.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nk(n){return n===So?void 0:n}function rk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=[];var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const dR={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},ik=Fe.INFO,sk={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},ak=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=sk[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Op{constructor(e){this.name=e,this._logLevel=ik,this._logHandler=ak,this._userLogHandler=null,Zv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}function ok(n){Zv.forEach(e=>{e.setLogLevel(n)})}function lk(n,e){for(const t of Zv){let r=null;e&&e.level&&(r=dR[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(a,l,...u)=>{const h=u.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");l>=(r??a.logLevel)&&n({level:Fe[l].toLowerCase(),message:h,args:u,type:a.name})}}}const uk=(n,e)=>e.some(t=>n instanceof t);let lI,uI;function ck(){return lI||(lI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hk(){return uI||(uI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fR=new WeakMap,X_=new WeakMap,mR=new WeakMap,S_=new WeakMap,Jv=new WeakMap;function dk(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(va(n.result)),a()},u=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&fR.set(t,n)}).catch(()=>{}),Jv.set(e,n),e}function fk(n){if(X_.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});X_.set(n,e)}let Z_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return X_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return va(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mk(n){Z_=n(Z_)}function pk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(R_(this),e,...t);return mR.set(r,e.sort?e.sort():[e]),va(r)}:hk().includes(n)?function(...e){return n.apply(R_(this),e),va(fR.get(this))}:function(...e){return va(n.apply(R_(this),e))}}function gk(n){return typeof n=="function"?pk(n):(n instanceof IDBTransaction&&fk(n),uk(n,ck())?new Proxy(n,Z_):n)}function va(n){if(n instanceof IDBRequest)return dk(n);if(S_.has(n))return S_.get(n);const e=gk(n);return e!==n&&(S_.set(n,e),Jv.set(e,n)),e}const R_=n=>Jv.get(n);function yk(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=va(u);return r&&u.addEventListener("upgradeneeded",f=>{r(va(u.result),f.oldVersion,f.newVersion,va(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const _k=["get","getKey","getAll","getAllKeys","count"],vk=["put","add","delete","clear"],C_=new Map;function cI(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(C_.get(e))return C_.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=vk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||_k.includes(t)))return;const l=async function(u,...h){const f=this.transaction(u,a?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&f.done]))[0]};return C_.set(e,l),l}mk(n=>({...n,get:(e,t,r)=>cI(e,t)||n.get(e,t,r),has:(e,t)=>!!cI(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Tk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Tk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",J_="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Op("@firebase/app"),wk="@firebase/app-compat",bk="@firebase/analytics-compat",Ik="@firebase/analytics",Ak="@firebase/app-check-compat",Sk="@firebase/app-check",Rk="@firebase/auth",Ck="@firebase/auth-compat",Dk="@firebase/database",Pk="@firebase/data-connect",Ok="@firebase/database-compat",Nk="@firebase/functions",xk="@firebase/functions-compat",Vk="@firebase/installations",kk="@firebase/installations-compat",Mk="@firebase/messaging",Lk="@firebase/messaging-compat",Uk="@firebase/performance",zk="@firebase/performance-compat",Fk="@firebase/remote-config",Bk="@firebase/remote-config-compat",qk="@firebase/storage",jk="@firebase/storage-compat",Hk="@firebase/firestore",Gk="@firebase/vertexai",Kk="@firebase/firestore-compat",Qk="firebase",$k="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]",Wk={[rp]:"fire-core",[wk]:"fire-core-compat",[Ik]:"fire-analytics",[bk]:"fire-analytics-compat",[Sk]:"fire-app-check",[Ak]:"fire-app-check-compat",[Rk]:"fire-auth",[Ck]:"fire-auth-compat",[Dk]:"fire-rtdb",[Pk]:"fire-data-connect",[Ok]:"fire-rtdb-compat",[Nk]:"fire-fn",[xk]:"fire-fn-compat",[Vk]:"fire-iid",[kk]:"fire-iid-compat",[Mk]:"fire-fcm",[Lk]:"fire-fcm-compat",[Uk]:"fire-perf",[zk]:"fire-perf-compat",[Fk]:"fire-rc",[Bk]:"fire-rc-compat",[qk]:"fire-gcs",[jk]:"fire-gcs-compat",[Hk]:"fire-fst",[Kk]:"fire-fst-compat",[Gk]:"fire-vertex","fire-js":"fire-js",[Qk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new Map,Ou=new Map,Nu=new Map;function nd(n,e){try{n.container.addComponent(e)}catch(t){as.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function pR(n,e){n.container.addOrOverwriteComponent(e)}function Ra(n){const e=n.name;if(Nu.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;Nu.set(e,n);for(const t of Sa.values())nd(t,n);for(const t of Ou.values())nd(t,n);return!0}function gR(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yk(n,e,t=Aa){gR(n,e).clearInstance(t)}function yR(n){return n.options!==void 0}function gt(n){return n==null?!1:n.settings!==void 0}function Xk(){Nu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new sl("app","Firebase",Zk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _R=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(n,e){const t=$v(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class Jk extends _R{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,u={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,u,a);else{const h=e;super(h.options,u,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._serverConfig.authIdToken&&hI(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&hI(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Lr(rp,J_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){tE(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ar.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=$k;function eE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Aa,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw Ar.create("bad-app-name",{appName:String(a)});if(t||(t=sR()),!t)throw Ar.create("no-options");const l=Sa.get(a);if(l){if(Ia(t,l.options)&&Ia(r,l.config))return l;throw Ar.create("duplicate-app",{appName:a})}const u=new hR(a);for(const f of Nu.values())u.addComponent(f);const h=new _R(t,r,u);return Sa.set(a,h),h}function e2(n,e){if(KV()&&!aR())throw Ar.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;yR(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=p=>[...p].reduce((_,v)=>Math.imul(31,_)+v.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ar.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(r)),u=Ou.get(l);if(u)return u.incRefCount(e.releaseOnDeref),u;const h=new hR(l);for(const p of Nu.values())h.addComponent(p);const f=new Jk(t,e,l,h);return Ou.set(l,f),f}function t2(n=Aa){const e=Sa.get(n);if(!e&&n===Aa&&sR())return eE();if(!e)throw Ar.create("no-app",{appName:n});return e}function n2(){return Array.from(Sa.values())}async function tE(n){let e=!1;const t=n.name;Sa.has(t)?(e=!0,Sa.delete(t)):Ou.has(t)&&n.decRefCount()<=0&&(Ou.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Lr(n,e,t){var r;let a=(r=Wk[n])!==null&&r!==void 0?r:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${a}" with version "${e}":`];l&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(h.join(" "));return}Ra(new _i(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function vR(n,e){if(n!==null&&typeof n!="function")throw Ar.create("invalid-log-argument");lk(n,e)}function ER(n){ok(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="firebase-heartbeat-database",i2=1,rd="firebase-heartbeat-store";let D_=null;function TR(){return D_||(D_=yk(r2,i2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(rd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ar.create("idb-open",{originalErrorMessage:n.message})})),D_}async function s2(n){try{const t=(await TR()).transaction(rd),r=await t.objectStore(rd).get(wR(n));return await t.done,r}catch(e){if(e instanceof Un)as.warn(e.message);else{const t=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(t.message)}}}async function dI(n,e){try{const r=(await TR()).transaction(rd,"readwrite");await r.objectStore(rd).put(e,wR(n)),await r.done}catch(t){if(t instanceof Un)as.warn(t.message);else{const r=Ar.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});as.warn(r.message)}}}function wR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=1024,o2=30;class l2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new c2(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=fI();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>o2){const u=h2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){as.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=fI(),{heartbeatsToSend:r,unsentEntries:a}=u2(this._heartbeatsCache.heartbeats),l=tp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return as.warn(t),""}}}function fI(){return new Date().toISOString().substring(0,10)}function u2(n,e=a2){const t=[];let r=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),mI(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),mI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class c2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return td()?$V().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await s2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return dI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return dI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function mI(n){return tp(JSON.stringify({version:2,heartbeats:n})).length}function h2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(n){Ra(new _i("platform-logger",e=>new Ek(e),"PRIVATE")),Ra(new _i("heartbeat",e=>new l2(e),"PRIVATE")),Lr(rp,J_,n),Lr(rp,J_,"esm2017"),Lr("fire-js","")}d2("");const f2=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Un,SDK_VERSION:La,_DEFAULT_ENTRY_NAME:Aa,_addComponent:nd,_addOrOverwriteComponent:pR,_apps:Sa,_clearComponents:Xk,_components:Nu,_getProvider:gR,_isFirebaseApp:yR,_isFirebaseServerApp:gt,_registerComponent:Ra,_removeServiceInstance:Yk,_serverApps:Ou,deleteApp:tE,getApp:t2,getApps:n2,initializeApp:eE,initializeServerApp:e2,onLog:vR,registerVersion:Lr,setLogLevel:ER},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t){this._delegate=e,this.firebase=t,nd(e,new _i("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),tE(this._delegate)))}_getService(e,t=Aa){var r;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((r=a.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=Aa){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){nd(this._delegate,e)}_addOrOverwriteComponent(e){pR(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},pI=new sl("app-compat","Firebase",p2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(n){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:Lr,setLogLevel:ER,onLog:vR,apps:null,SDK_VERSION:La,INTERNAL:{registerComponent:h,removeApp:r,useAsService:f,modularAPIs:f2}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(p){delete e[p]}function a(p){if(p=p||Aa,!aI(e,p))throw pI.create("no-app",{appName:p});return e[p]}a.App=n;function l(p,_={}){const v=eE(p,_);if(aI(e,v.name))return e[v.name];const w=new n(v,t);return e[v.name]=w,w}function u(){return Object.keys(e).map(p=>e[p])}function h(p){const _=p.name,v=_.replace("-compat","");if(Ra(p)&&p.type==="PUBLIC"){const w=(R=a())=>{if(typeof R[v]!="function")throw pI.create("invalid-app-argument",{appName:_});return R[v]()};p.serviceProps!==void 0&&np(w,p.serviceProps),t[v]=w,n.prototype[v]=function(...R){return this._getService.bind(this,_).apply(this,p.multipleInstances?R:[])}}return p.type==="PUBLIC"?t[v]:null}function f(p,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(){const n=g2(m2);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:bR,extendNamespace:e,createSubscribe:cR,ErrorFactory:sl,deepExtend:np});function e(t){np(n,t)}return n}const y2=bR();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new Op("@firebase/app-compat"),_2="@firebase/app-compat",v2="0.2.52";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(n){Lr(_2,v2,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=iR();if(n.firebase!==void 0){gI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&gI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const fs=y2;E2();var T2="firebase",w2="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs.registerVersion(T2,w2,"app-compat");var yI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ea,IR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function A(){}A.prototype=S.prototype,x.D=S.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(O,M,B){for(var P=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)P[nt-2]=arguments[nt];return S.prototype[M].apply(O,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,S,A){A||(A=0);var O=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)O[M]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(M=0;16>M;++M)O[M]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=x.g[0],A=x.g[1],M=x.g[2];var B=x.g[3],P=S+(B^A&(M^B))+O[0]+3614090360&4294967295;S=A+(P<<7&4294967295|P>>>25),P=B+(M^S&(A^M))+O[1]+3905402710&4294967295,B=S+(P<<12&4294967295|P>>>20),P=M+(A^B&(S^A))+O[2]+606105819&4294967295,M=B+(P<<17&4294967295|P>>>15),P=A+(S^M&(B^S))+O[3]+3250441966&4294967295,A=M+(P<<22&4294967295|P>>>10),P=S+(B^A&(M^B))+O[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=B+(M^S&(A^M))+O[5]+1200080426&4294967295,B=S+(P<<12&4294967295|P>>>20),P=M+(A^B&(S^A))+O[6]+2821735955&4294967295,M=B+(P<<17&4294967295|P>>>15),P=A+(S^M&(B^S))+O[7]+4249261313&4294967295,A=M+(P<<22&4294967295|P>>>10),P=S+(B^A&(M^B))+O[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=B+(M^S&(A^M))+O[9]+2336552879&4294967295,B=S+(P<<12&4294967295|P>>>20),P=M+(A^B&(S^A))+O[10]+4294925233&4294967295,M=B+(P<<17&4294967295|P>>>15),P=A+(S^M&(B^S))+O[11]+2304563134&4294967295,A=M+(P<<22&4294967295|P>>>10),P=S+(B^A&(M^B))+O[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=B+(M^S&(A^M))+O[13]+4254626195&4294967295,B=S+(P<<12&4294967295|P>>>20),P=M+(A^B&(S^A))+O[14]+2792965006&4294967295,M=B+(P<<17&4294967295|P>>>15),P=A+(S^M&(B^S))+O[15]+1236535329&4294967295,A=M+(P<<22&4294967295|P>>>10),P=S+(M^B&(A^M))+O[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=B+(A^M&(S^A))+O[6]+3225465664&4294967295,B=S+(P<<9&4294967295|P>>>23),P=M+(S^A&(B^S))+O[11]+643717713&4294967295,M=B+(P<<14&4294967295|P>>>18),P=A+(B^S&(M^B))+O[0]+3921069994&4294967295,A=M+(P<<20&4294967295|P>>>12),P=S+(M^B&(A^M))+O[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=B+(A^M&(S^A))+O[10]+38016083&4294967295,B=S+(P<<9&4294967295|P>>>23),P=M+(S^A&(B^S))+O[15]+3634488961&4294967295,M=B+(P<<14&4294967295|P>>>18),P=A+(B^S&(M^B))+O[4]+3889429448&4294967295,A=M+(P<<20&4294967295|P>>>12),P=S+(M^B&(A^M))+O[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=B+(A^M&(S^A))+O[14]+3275163606&4294967295,B=S+(P<<9&4294967295|P>>>23),P=M+(S^A&(B^S))+O[3]+4107603335&4294967295,M=B+(P<<14&4294967295|P>>>18),P=A+(B^S&(M^B))+O[8]+1163531501&4294967295,A=M+(P<<20&4294967295|P>>>12),P=S+(M^B&(A^M))+O[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=B+(A^M&(S^A))+O[2]+4243563512&4294967295,B=S+(P<<9&4294967295|P>>>23),P=M+(S^A&(B^S))+O[7]+1735328473&4294967295,M=B+(P<<14&4294967295|P>>>18),P=A+(B^S&(M^B))+O[12]+2368359562&4294967295,A=M+(P<<20&4294967295|P>>>12),P=S+(A^M^B)+O[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=B+(S^A^M)+O[8]+2272392833&4294967295,B=S+(P<<11&4294967295|P>>>21),P=M+(B^S^A)+O[11]+1839030562&4294967295,M=B+(P<<16&4294967295|P>>>16),P=A+(M^B^S)+O[14]+4259657740&4294967295,A=M+(P<<23&4294967295|P>>>9),P=S+(A^M^B)+O[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=B+(S^A^M)+O[4]+1272893353&4294967295,B=S+(P<<11&4294967295|P>>>21),P=M+(B^S^A)+O[7]+4139469664&4294967295,M=B+(P<<16&4294967295|P>>>16),P=A+(M^B^S)+O[10]+3200236656&4294967295,A=M+(P<<23&4294967295|P>>>9),P=S+(A^M^B)+O[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=B+(S^A^M)+O[0]+3936430074&4294967295,B=S+(P<<11&4294967295|P>>>21),P=M+(B^S^A)+O[3]+3572445317&4294967295,M=B+(P<<16&4294967295|P>>>16),P=A+(M^B^S)+O[6]+76029189&4294967295,A=M+(P<<23&4294967295|P>>>9),P=S+(A^M^B)+O[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=B+(S^A^M)+O[12]+3873151461&4294967295,B=S+(P<<11&4294967295|P>>>21),P=M+(B^S^A)+O[15]+530742520&4294967295,M=B+(P<<16&4294967295|P>>>16),P=A+(M^B^S)+O[2]+3299628645&4294967295,A=M+(P<<23&4294967295|P>>>9),P=S+(M^(A|~B))+O[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=B+(A^(S|~M))+O[7]+1126891415&4294967295,B=S+(P<<10&4294967295|P>>>22),P=M+(S^(B|~A))+O[14]+2878612391&4294967295,M=B+(P<<15&4294967295|P>>>17),P=A+(B^(M|~S))+O[5]+4237533241&4294967295,A=M+(P<<21&4294967295|P>>>11),P=S+(M^(A|~B))+O[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=B+(A^(S|~M))+O[3]+2399980690&4294967295,B=S+(P<<10&4294967295|P>>>22),P=M+(S^(B|~A))+O[10]+4293915773&4294967295,M=B+(P<<15&4294967295|P>>>17),P=A+(B^(M|~S))+O[1]+2240044497&4294967295,A=M+(P<<21&4294967295|P>>>11),P=S+(M^(A|~B))+O[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=B+(A^(S|~M))+O[15]+4264355552&4294967295,B=S+(P<<10&4294967295|P>>>22),P=M+(S^(B|~A))+O[6]+2734768916&4294967295,M=B+(P<<15&4294967295|P>>>17),P=A+(B^(M|~S))+O[13]+1309151649&4294967295,A=M+(P<<21&4294967295|P>>>11),P=S+(M^(A|~B))+O[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=B+(A^(S|~M))+O[11]+3174756917&4294967295,B=S+(P<<10&4294967295|P>>>22),P=M+(S^(B|~A))+O[2]+718787259&4294967295,M=B+(P<<15&4294967295|P>>>17),P=A+(B^(M|~S))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(M+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+B&4294967295}r.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var A=S-this.blockSize,O=this.B,M=this.h,B=0;B<S;){if(M==0)for(;B<=A;)a(this,x,B),B+=this.blockSize;if(typeof x=="string"){for(;B<S;)if(O[M++]=x.charCodeAt(B++),M==this.blockSize){a(this,O),M=0;break}}else for(;B<S;)if(O[M++]=x[B++],M==this.blockSize){a(this,O),M=0;break}}this.h=M,this.o+=S},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var A=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=A&255,A/=256;for(this.u(x),x=Array(16),S=A=0;4>S;++S)for(var O=0;32>O;O+=8)x[A++]=this.g[S]>>>O&255;return x};function l(x,S){var A=h;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=S(x)}function u(x,S){this.h=S;for(var A=[],O=!0,M=x.length-1;0<=M;M--){var B=x[M]|0;O&&B==S||(A[M]=B,O=!1)}this.g=A}var h={};function f(x){return-128<=x&&128>x?l(x,function(S){return new u([S|0],0>S?-1:0)}):new u([x|0],0>x?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return v;if(0>x)return V(p(-x));for(var S=[],A=1,O=0;x>=A;O++)S[O]=x/A|0,A*=4294967296;return new u(S,0)}function _(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return V(_(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(S,8)),O=v,M=0;M<x.length;M+=8){var B=Math.min(8,x.length-M),P=parseInt(x.substring(M,M+B),S);8>B?(B=p(Math.pow(S,B)),O=O.j(B).add(p(P))):(O=O.j(A),O=O.add(p(P)))}return O}var v=f(0),w=f(1),R=f(16777216);n=u.prototype,n.m=function(){if(N(this))return-V(this).m();for(var x=0,S=1,A=0;A<this.g.length;A++){var O=this.i(A);x+=(0<=O?O:4294967296+O)*S,S*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C(this))return"0";if(N(this))return"-"+V(this).toString(x);for(var S=p(Math.pow(x,6)),A=this,O="";;){var M=ue(A,S).g;A=z(A,M.j(S));var B=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=M,C(A))return B+O;for(;6>B.length;)B="0"+B;O=B+O}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function C(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function N(x){return x.h==-1}n.l=function(x){return x=z(this,x),N(x)?-1:C(x)?0:1};function V(x){for(var S=x.g.length,A=[],O=0;O<S;O++)A[O]=~x.g[O];return new u(A,~x.h).add(w)}n.abs=function(){return N(this)?V(this):this},n.add=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],O=0,M=0;M<=S;M++){var B=O+(this.i(M)&65535)+(x.i(M)&65535),P=(B>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);O=P>>>16,B&=65535,P&=65535,A[M]=P<<16|B}return new u(A,A[A.length-1]&-2147483648?-1:0)};function z(x,S){return x.add(V(S))}n.j=function(x){if(C(this)||C(x))return v;if(N(this))return N(x)?V(this).j(V(x)):V(V(this).j(x));if(N(x))return V(this.j(V(x)));if(0>this.l(R)&&0>x.l(R))return p(this.m()*x.m());for(var S=this.g.length+x.g.length,A=[],O=0;O<2*S;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<x.g.length;M++){var B=this.i(O)>>>16,P=this.i(O)&65535,nt=x.i(M)>>>16,at=x.i(M)&65535;A[2*O+2*M]+=P*at,Y(A,2*O+2*M),A[2*O+2*M+1]+=B*at,Y(A,2*O+2*M+1),A[2*O+2*M+1]+=P*nt,Y(A,2*O+2*M+1),A[2*O+2*M+2]+=B*nt,Y(A,2*O+2*M+2)}for(O=0;O<S;O++)A[O]=A[2*O+1]<<16|A[2*O];for(O=S;O<2*S;O++)A[O]=0;return new u(A,0)};function Y(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function K(x,S){this.g=x,this.h=S}function ue(x,S){if(C(S))throw Error("division by zero");if(C(x))return new K(v,v);if(N(x))return S=ue(V(x),S),new K(V(S.g),V(S.h));if(N(S))return S=ue(x,V(S)),new K(V(S.g),S.h);if(30<x.g.length){if(N(x)||N(S))throw Error("slowDivide_ only works with positive integers.");for(var A=w,O=S;0>=O.l(x);)A=le(A),O=le(O);var M=J(A,1),B=J(O,1);for(O=J(O,2),A=J(A,2);!C(O);){var P=B.add(O);0>=P.l(x)&&(M=M.add(A),B=P),O=J(O,1),A=J(A,1)}return S=z(x,M.j(S)),new K(M,S)}for(M=v;0<=x.l(S);){for(A=Math.max(1,Math.floor(x.m()/S.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),B=p(A),P=B.j(S);N(P)||0<P.l(x);)A-=O,B=p(A),P=B.j(S);C(B)&&(B=w),M=M.add(B),x=z(x,P)}return new K(M,x)}n.A=function(x){return ue(this,x).h},n.and=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],O=0;O<S;O++)A[O]=this.i(O)&x.i(O);return new u(A,this.h&x.h)},n.or=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],O=0;O<S;O++)A[O]=this.i(O)|x.i(O);return new u(A,this.h|x.h)},n.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],O=0;O<S;O++)A[O]=this.i(O)^x.i(O);return new u(A,this.h^x.h)};function le(x){for(var S=x.g.length+1,A=[],O=0;O<S;O++)A[O]=x.i(O)<<1|x.i(O-1)>>>31;return new u(A,x.h)}function J(x,S){var A=S>>5;S%=32;for(var O=x.g.length-A,M=[],B=0;B<O;B++)M[B]=0<S?x.i(B+A)>>>S|x.i(B+A+1)<<32-S:x.i(B+A);return new u(M,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IR=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=_,Ea=u}).apply(typeof yI<"u"?yI:typeof self<"u"?self:typeof window<"u"?window:{});var Am=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AR,Lh,SR,Lm,ev,RR,CR,DR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,E){return d==Array.prototype||d==Object.prototype||(d[y]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Am=="object"&&Am];for(var y=0;y<d.length;++y){var E=d[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function a(d,y){if(y)e:{var E=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var q=d[I];if(!(q in E))break e;E=E[q]}d=d[d.length-1],I=E[d],y=y(I),y!=I&&y!=null&&e(E,d,{configurable:!0,writable:!0,value:y})}}function l(d,y){d instanceof String&&(d+="");var E=0,I=!1,q={next:function(){if(!I&&E<d.length){var W=E++;return{value:y(W,d[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}a("Array.prototype.values",function(d){return d||function(){return l(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function p(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function _(d,y,E){return d.call.apply(d.bind,arguments)}function v(d,y,E){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,I),d.apply(y,q)}}return function(){return d.apply(y,arguments)}}function w(d,y,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,w.apply(null,arguments)}function R(d,y){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function C(d,y){function E(){}E.prototype=y.prototype,d.aa=y.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(I,q,W){for(var ce=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ce[Ge-2]=arguments[Ge];return y.prototype[q].apply(I,ce)}}function N(d){const y=d.length;if(0<y){const E=Array(y);for(let I=0;I<y;I++)E[I]=d[I];return E}return[]}function V(d,y){for(let E=1;E<arguments.length;E++){const I=arguments[E];if(f(I)){const q=d.length||0,W=I.length||0;d.length=q+W;for(let ce=0;ce<W;ce++)d[q+ce]=I[ce]}else d.push(I)}}class z{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Y(d){return/^[\s\xa0]*$/.test(d)}function K(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function ue(d){return ue[" "](d),d}ue[" "]=function(){};var le=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function J(d,y,E){for(const I in d)y.call(E,d[I],I,d)}function x(d,y){for(const E in d)y.call(void 0,d[E],E,d)}function S(d){const y={};for(const E in d)y[E]=d[E];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(d,y){let E,I;for(let q=1;q<arguments.length;q++){I=arguments[q];for(E in I)d[E]=I[E];for(let W=0;W<A.length;W++)E=A[W],Object.prototype.hasOwnProperty.call(I,E)&&(d[E]=I[E])}}function M(d){var y=1;d=d.split(":");const E=[];for(;0<y&&d.length;)E.push(d.shift()),y--;return d.length&&E.push(d.join(":")),E}function B(d){h.setTimeout(()=>{throw d},0)}function P(){var d=Ne;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class nt{constructor(){this.h=this.g=null}add(y,E){const I=at.get();I.set(y,E),this.h?this.h.next=I:this.g=I,this.h=I}}var at=new z(()=>new se,d=>d.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,pe=!1,Ne=new nt,k=()=>{const d=h.Promise.resolve(void 0);Se=()=>{d.then(ae)}};var ae=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(E){B(E)}var y=at;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}pe=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};h.addEventListener("test",E,y),h.removeEventListener("test",E,y)}catch{}return d}();function Pe(d,y){if(me.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(le){e:{try{ue(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else E=="mouseover"?y=d.fromElement:E=="mouseout"&&(y=d.toElement);this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Oe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Pe.aa.h.call(this)}}C(Pe,me);var Oe={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),We=0;function Rt(d,y,E,I,q){this.listener=d,this.proxy=null,this.src=y,this.type=E,this.capture=!!I,this.ha=q,this.key=++We,this.da=this.fa=!1}function rt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Dn(d){this.src=d,this.g={},this.h=0}Dn.prototype.add=function(d,y,E,I,q){var W=d.toString();d=this.g[W],d||(d=this.g[W]=[],this.h++);var ce=ar(d,y,I,q);return-1<ce?(y=d[ce],E||(y.fa=!1)):(y=new Rt(y,this.src,W,!!I,q),y.fa=E,d.push(y)),y};function Ii(d,y){var E=y.type;if(E in d.g){var I=d.g[E],q=Array.prototype.indexOf.call(I,y,void 0),W;(W=0<=q)&&Array.prototype.splice.call(I,q,1),W&&(rt(y),d.g[E].length==0&&(delete d.g[E],d.h--))}}function ar(d,y,E,I){for(var q=0;q<d.length;++q){var W=d[q];if(!W.da&&W.listener==y&&W.capture==!!E&&W.ha==I)return q}return-1}var Es="closure_lm_"+(1e6*Math.random()|0),Ts={};function Ai(d,y,E,I,q){if(Array.isArray(y)){for(var W=0;W<y.length;W++)Ai(d,y[W],E,I,q);return null}return E=ef(E),d&&d[ft]?d.K(y,E,p(I)?!!I.capture:!1,q):yc(d,y,E,!1,I,q)}function yc(d,y,E,I,q,W){if(!y)throw Error("Invalid event type");var ce=p(q)?!!q.capture:!!q,Ge=_c(d);if(Ge||(d[Es]=Ge=new Dn(d)),E=Ge.add(y,E,I,ce,W),E.proxy)return E;if(I=hl(),E.proxy=I,I.src=d,I.listener=E,d.addEventListener)fe||(q=ce),q===void 0&&(q=!1),d.addEventListener(y.toString(),I,q);else if(d.attachEvent)d.attachEvent(fl(y.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function hl(){function d(E){return y.call(d.src,d.listener,E)}const y=yg;return d}function dl(d,y,E,I,q){if(Array.isArray(y))for(var W=0;W<y.length;W++)dl(d,y[W],E,I,q);else I=p(I)?!!I.capture:!!I,E=ef(E),d&&d[ft]?(d=d.i,y=String(y).toString(),y in d.g&&(W=d.g[y],E=ar(W,E,I,q),-1<E&&(rt(W[E]),Array.prototype.splice.call(W,E,1),W.length==0&&(delete d.g[y],d.h--)))):d&&(d=_c(d))&&(y=d.g[y.toString()],d=-1,y&&(d=ar(y,E,I,q)),(E=-1<d?y[d]:null)&&Ha(E))}function Ha(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[ft])Ii(y.i,d);else{var E=d.type,I=d.proxy;y.removeEventListener?y.removeEventListener(E,I,d.capture):y.detachEvent?y.detachEvent(fl(E),I):y.addListener&&y.removeListener&&y.removeListener(I),(E=_c(y))?(Ii(E,d),E.h==0&&(E.src=null,y[Es]=null)):rt(d)}}}function fl(d){return d in Ts?Ts[d]:Ts[d]="on"+d}function yg(d,y){if(d.da)d=!0;else{y=new Pe(y,this);var E=d.listener,I=d.ha||d.src;d.fa&&Ha(d),d=E.call(I,y)}return d}function _c(d){return d=d[Es],d instanceof Dn?d:null}var Bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ef(d){return typeof d=="function"?d:(d[Bn]||(d[Bn]=function(y){return d.handleEvent(y)}),d[Bn])}function Kt(){Te.call(this),this.i=new Dn(this),this.M=this,this.F=null}C(Kt,Te),Kt.prototype[ft]=!0,Kt.prototype.removeEventListener=function(d,y,E,I){dl(this,d,y,E,I)};function en(d,y){var E,I=d.F;if(I)for(E=[];I;I=I.F)E.push(I);if(d=d.M,I=y.type||y,typeof y=="string")y=new me(y,d);else if(y instanceof me)y.target=y.target||d;else{var q=y;y=new me(I,d),O(y,q)}if(q=!0,E)for(var W=E.length-1;0<=W;W--){var ce=y.g=E[W];q=Si(ce,I,!0,y)&&q}if(ce=y.g=d,q=Si(ce,I,!0,y)&&q,q=Si(ce,I,!1,y)&&q,E)for(W=0;W<E.length;W++)ce=y.g=E[W],q=Si(ce,I,!1,y)&&q}Kt.prototype.N=function(){if(Kt.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var E=d.g[y],I=0;I<E.length;I++)rt(E[I]);delete d.g[y],d.h--}}this.F=null},Kt.prototype.K=function(d,y,E,I){return this.i.add(String(d),y,!1,E,I)},Kt.prototype.L=function(d,y,E,I){return this.i.add(String(d),y,!0,E,I)};function Si(d,y,E,I){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,W=0;W<y.length;++W){var ce=y[W];if(ce&&!ce.da&&ce.capture==E){var Ge=ce.listener,$t=ce.ha||ce.src;ce.fa&&Ii(d.i,ce),q=Ge.call($t,I)!==!1&&q}}return q&&!I.defaultPrevented}function tf(d,y,E){if(typeof d=="function")E&&(d=w(d,E));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(d,y||0)}function vc(d){d.g=tf(()=>{d.g=null,d.i&&(d.i=!1,vc(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class _g extends Te{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:vc(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ga(d){Te.call(this),this.h=d,this.g={}}C(Ga,Te);var ws=[];function En(d){J(d.g,function(y,E){this.g.hasOwnProperty(E)&&Ha(y)},d),d.g={}}Ga.prototype.N=function(){Ga.aa.N.call(this),En(this)},Ga.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ec=h.JSON.stringify,Br=h.JSON.parse,Pn=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function Tc(){}Tc.prototype.h=null;function nf(d){return d.h||(d.h=d.i())}function rf(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bs(){me.call(this,"d")}C(bs,me);function Rr(){me.call(this,"c")}C(Rr,me);var or={},Is=null;function ml(){return Is=Is||new Kt}or.La="serverreachability";function wc(d){me.call(this,or.La,d)}C(wc,me);function As(d){const y=ml();en(y,new wc(y))}or.STAT_EVENT="statevent";function pl(d,y){me.call(this,or.STAT_EVENT,d),this.stat=y}C(pl,me);function Mt(d){const y=ml();en(y,new pl(y,d))}or.Ma="timingevent";function sf(d,y){me.call(this,or.Ma,d),this.size=y}C(sf,me);function Ss(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},y)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function af(d,y,E,I,q,W){d.info(function(){if(d.g)if(W)for(var ce="",Ge=W.split("&"),$t=0;$t<Ge.length;$t++){var Ke=Ge[$t].split("=");if(1<Ke.length){var rn=Ke[0];Ke=Ke[1];var Wt=rn.split("_");ce=2<=Wt.length&&Wt[1]=="type"?ce+(rn+"="+Ke+"&"):ce+(rn+"=redacted&")}}else ce=null;else ce=W;return"XMLHTTP REQ ("+I+") [attempt "+q+"]: "+y+`
`+E+`
`+ce})}function of(d,y,E,I,q,W,ce){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+q+"]: "+y+`
`+E+`
`+W+" "+ce})}function Cs(d,y,E,I){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+tn(d,E)+(I?" "+I:"")})}function jr(d,y){d.info(function(){return"TIMEOUT: "+y})}Rs.prototype.info=function(){};function tn(d,y){if(!d.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var I=E[d];if(!(2>I.length)){var q=I[1];if(Array.isArray(q)&&!(1>q.length)){var W=q[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ce=1;ce<q.length;ce++)q[ce]=""}}}}return Ec(E)}catch{return y}}var Qt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ka;function gl(){}C(gl,Tc),gl.prototype.g=function(){return new XMLHttpRequest},gl.prototype.i=function(){return{}},Ka=new gl;function Hr(d,y,E,I){this.j=d,this.i=y,this.l=E,this.R=I||1,this.U=new Ga(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bc}function bc(){this.i=null,this.g="",this.h=!1}var Ds={},Qa={};function Cr(d,y,E){d.L=1,d.v=Ya(Ct(y)),d.m=E,d.P=!0,Ci(d,null)}function Ci(d,y){d.F=Date.now(),Et(d),d.A=Ct(d.v);var E=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),Oi(E.i,"t",I),d.C=0,E=d.j.J,d.h=new bc,d.g=Tf(d.j,E?y:null,!d.m),0<d.O&&(d.M=new _g(w(d.Y,d,d.g),d.O)),y=d.U,E=d.g,I=d.ca;var q="readystatechange";Array.isArray(q)||(q&&(ws[0]=q.toString()),q=ws);for(var W=0;W<q.length;W++){var ce=Ai(E,q[W],I||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),As(),af(d.i,d.u,d.A,d.l,d.R,d.m)}Hr.prototype.ca=function(d){d=d.target;const y=this.M;y&&dr(d)==3?y.j():this.Y(d)},Hr.prototype.Y=function(d){try{if(d==this.g)e:{const Wt=dr(this.g);var y=this.g.Ba();const ki=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||ff(this.g)))){this.J||Wt!=4||y==7||(y==8||0>=ki?As(3):As(2)),yl(this);var E=this.g.Z();this.X=E;t:if(Ps(this)){var I=ff(this.g);d="";var q=I.length,W=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),Wn(this);var ce="";break t}this.h.i=new h.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,d+=this.h.i.decode(I[y],{stream:!(W&&y==q-1)});I.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=E==200,of(this.i,this.u,this.A,this.l,this.R,Wt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,$t=this.g;if((Ge=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Ge)){var Ke=Ge;break t}}Ke=null}if(E=Ke)Cs(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yn(this,E);else{this.o=!1,this.s=3,Mt(12),qn(this),Wn(this);break e}}if(this.P){E=!0;let dn;for(;!this.J&&this.C<ce.length;)if(dn=Os(this,ce),dn==Qa){Wt==4&&(this.s=4,Mt(14),E=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==Ds){this.s=4,Mt(15),Cs(this.i,this.l,ce,"[Invalid Chunk]"),E=!1;break}else Cs(this.i,this.l,dn,null),Yn(this,dn);if(Ps(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||ce.length!=0||this.h.h||(this.s=1,Mt(16),E=!1),this.o=this.o&&E,!E)Cs(this.i,this.l,ce,"[Invalid Chunked Response]"),qn(this),Wn(this);else if(0<ce.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),ro(rn),rn.M=!0,Mt(11))}}else Cs(this.i,this.l,ce,null),Yn(this,ce);Wt==4&&qn(this),this.o&&!this.J&&(Wt==4?_f(this.j,this):(this.o=!1,Et(this)))}else Ig(this.g),E==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),qn(this),Wn(this)}}}catch{}finally{}};function Ps(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Os(d,y){var E=d.C,I=y.indexOf(`
`,E);return I==-1?Qa:(E=Number(y.substring(E,I)),isNaN(E)?Ds:(I+=1,I+E>y.length?Qa:(y=y.slice(I,I+E),d.C=I+E,y)))}Hr.prototype.cancel=function(){this.J=!0,qn(this)};function Et(d){d.S=Date.now()+d.I,Ic(d,d.I)}function Ic(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ss(w(d.ba,d),y)}function yl(d){d.B&&(h.clearTimeout(d.B),d.B=null)}Hr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(jr(this.i,this.A),this.L!=2&&(As(),Mt(17)),qn(this),this.s=2,Wn(this)):Ic(this,this.S-d)};function Wn(d){d.j.G==0||d.J||_f(d.j,d)}function qn(d){yl(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,En(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Yn(d,y){try{var E=d.j;if(E.G!=0&&(E.g==d||Ns(E.h,d))){if(!d.K&&Ns(E.h,d)&&E.G==3){try{var I=E.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var q=I;if(q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Rl(E),Al(E);else break e;kc(E),Mt(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ss(w(E.Za,E),6e3));if(1>=lf(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Vi(E,11)}else if((d.K||E.g==d)&&Rl(E),!Y(y))for(q=E.Da.g.parse(y),y=0;y<q.length;y++){let Ke=q[y];if(E.T=Ke[0],Ke=Ke[1],E.G==2)if(Ke[0]=="c"){E.K=Ke[1],E.ia=Ke[2];const rn=Ke[3];rn!=null&&(E.la=rn,E.j.info("VER="+E.la));const Wt=Ke[4];Wt!=null&&(E.Aa=Wt,E.j.info("SVER="+E.Aa));const ki=Ke[5];ki!=null&&typeof ki=="number"&&0<ki&&(I=1.5*ki,E.L=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const dn=d.g;if(dn){const Xr=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xr){var W=I.h;W.g||Xr.indexOf("spdy")==-1&&Xr.indexOf("quic")==-1&&Xr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(xs(W,W.h),W.h=null))}if(I.D){const Lc=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Lc&&(I.ya=Lc,Ye(I.I,I.D,Lc))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),I=E;var ce=d;if(I.qa=Ef(I,I.J?I.ia:null,I.W),ce.K){lr(I.h,ce);var Ge=ce,$t=I.L;$t&&(Ge.I=$t),Ge.B&&(yl(Ge),Et(Ge)),I.g=ce}else gf(I);0<E.i.length&&Sl(E)}else Ke[0]!="stop"&&Ke[0]!="close"||Vi(E,7);else E.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Vi(E,7):xc(E):Ke[0]!="noop"&&E.l&&E.l.ta(Ke),E.v=0)}}As(4)}catch{}}var vg=class{constructor(d,y){this.g=d,this.map=y}};function Ac(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sc(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function lf(d){return d.h?1:d.g?d.g.size:0}function Ns(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function xs(d,y){d.g?d.g.add(y):d.h=y}function lr(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Ac.prototype.cancel=function(){if(this.i=On(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function On(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const E of d.g.values())y=y.concat(E.D);return y}return N(d.i)}function uf(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(f(d)){for(var y=[],E=d.length,I=0;I<E;I++)y.push(d[I]);return y}y=[],E=0;for(I in d)y[E++]=d[I];return y}function Eg(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(f(d)||typeof d=="string"){var y=[];d=d.length;for(var E=0;E<d;E++)y.push(E);return y}y=[],E=0;for(const I in d)y[E++]=I;return y}}}function $a(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(f(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var E=Eg(d),I=uf(d),q=I.length,W=0;W<q;W++)y.call(void 0,I[W],E&&E[W],d)}var Rc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _l(d,y){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var I=d[E].indexOf("="),q=null;if(0<=I){var W=d[E].substring(0,I);q=d[E].substring(I+1)}else W=d[E];y(W,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Di(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Di){this.h=d.h,Vs(this,d.j),this.o=d.o,this.g=d.g,Wa(this,d.s),this.l=d.l;var y=d.i,E=new Gr;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),vl(this,E),this.m=d.m}else d&&(y=String(d).match(Rc))?(this.h=!1,Vs(this,y[1]||"",!0),this.o=ks(y[2]||""),this.g=ks(y[3]||"",!0),Wa(this,y[4]),this.l=ks(y[5]||"",!0),vl(this,y[6]||"",!0),this.m=ks(y[7]||"")):(this.h=!1,this.i=new Gr(null,this.h))}Di.prototype.toString=function(){var d=[],y=this.j;y&&d.push(ur(y,Cc,!0),":");var E=this.g;return(E||y=="file")&&(d.push("//"),(y=this.o)&&d.push(ur(y,Cc,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(ur(E,E.charAt(0)=="/"?Dc:cf,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",ur(E,bg)),d.join("")};function Ct(d){return new Di(d)}function Vs(d,y,E){d.j=E?ks(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Wa(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function vl(d,y,E){y instanceof Gr?(d.i=y,Pc(d.i,d.h)):(E||(y=ur(y,wg)),d.i=new Gr(y,d.h))}function Ye(d,y,E){d.i.set(y,E)}function Ya(d){return Ye(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ks(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ur(d,y,E){return typeof d=="string"?(d=encodeURI(d).replace(y,Tg),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Tg(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Cc=/[#\/\?@]/g,cf=/[#\?:]/g,Dc=/[#\?]/g,wg=/[#\?@]/g,bg=/#/g;function Gr(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function cr(d){d.g||(d.g=new Map,d.h=0,d.i&&_l(d.i,function(y,E){d.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=Gr.prototype,n.add=function(d,y){cr(this),this.i=null,d=Ni(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(y),this.h+=1,this};function El(d,y){cr(d),y=Ni(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Pi(d,y){return cr(d),y=Ni(d,y),d.g.has(y)}n.forEach=function(d,y){cr(this),this.g.forEach(function(E,I){E.forEach(function(q){d.call(y,q,I,this)},this)},this)},n.na=function(){cr(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let I=0;I<y.length;I++){const q=d[I];for(let W=0;W<q.length;W++)E.push(y[I])}return E},n.V=function(d){cr(this);let y=[];if(typeof d=="string")Pi(this,d)&&(y=y.concat(this.g.get(Ni(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)y=y.concat(d[E])}return y},n.set=function(d,y){return cr(this),this.i=null,d=Ni(this,d),Pi(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},n.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Oi(d,y,E){El(d,y),0<E.length&&(d.i=null,d.g.set(Ni(d,y),N(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var I=y[E];const W=encodeURIComponent(String(I)),ce=this.V(I);for(I=0;I<ce.length;I++){var q=W;ce[I]!==""&&(q+="="+encodeURIComponent(String(ce[I]))),d.push(q)}}return this.i=d.join("&")};function Ni(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Pc(d,y){y&&!d.j&&(cr(d),d.i=null,d.g.forEach(function(E,I){var q=I.toLowerCase();I!=q&&(El(this,I),Oi(this,q,E))},d)),d.j=y}function hf(d,y){const E=new Rs;if(h.Image){const I=new Image;I.onload=R(hr,E,"TestLoadImage: loaded",!0,y,I),I.onerror=R(hr,E,"TestLoadImage: error",!1,y,I),I.onabort=R(hr,E,"TestLoadImage: abort",!1,y,I),I.ontimeout=R(hr,E,"TestLoadImage: timeout",!1,y,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else y(!1)}function Xa(d,y){const E=new Rs,I=new AbortController,q=setTimeout(()=>{I.abort(),hr(E,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:I.signal}).then(W=>{clearTimeout(q),W.ok?hr(E,"TestPingServer: ok",!0,y):hr(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),hr(E,"TestPingServer: error",!1,y)})}function hr(d,y,E,I,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),I(E)}catch{}}function Za(){this.g=new Pn}function Kr(d,y,E){const I=E||"";try{$a(d,function(q,W){let ce=q;p(q)&&(ce=Ec(q)),y.push(I+W+"="+encodeURIComponent(ce))})}catch(q){throw y.push(I+"type="+encodeURIComponent("_badmap")),q}}function Ms(d){this.l=d.Ub||null,this.j=d.eb||!1}C(Ms,Tc),Ms.prototype.g=function(){return new xi(this.l,this.j)},Ms.prototype.i=function(d){return function(){return d}}({});function xi(d,y){Kt.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(xi,Kt),n=xi.prototype,n.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,$r(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oc(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Oc(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Qr(this):$r(this),this.readyState==3&&Oc(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Qr(this))},n.Qa=function(d){this.g&&(this.response=d,Qr(this))},n.ga=function(){this.g&&Qr(this)};function Qr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,$r(d)}n.setRequestHeader=function(d,y){this.u.append(d,y)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=y.next();return d.join(`\r
`)};function $r(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Nc(d){let y="";return J(d,function(E,I){y+=I,y+=":",y+=E,y+=`\r
`}),y}function nn(d,y,E){e:{for(I in E){var I=!1;break e}I=!0}I||(E=Nc(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):Ye(d,y,E))}function tt(d){Kt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(tt,Kt);var Tl=/^https?$/i,Ja=["POST","PUT"];n=tt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,y,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ka.g(),this.v=this.o?nf(this.o):nf(Ka),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(W){df(this,W);return}if(d=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var q in I)E.set(q,I[q]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())E.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),q=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ja,y,void 0))||I||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ce]of E)this.g.setRequestHeader(W,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eo(this),this.u=!0,this.g.send(d),this.u=!1}catch(W){df(this,W)}};function df(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,wl(d),Wr(d)}function wl(d){d.A||(d.A=!0,en(d,"complete"),en(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,en(this,"complete"),en(this,"abort"),Wr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wr(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bl(this):this.bb())},n.bb=function(){bl(this)};function bl(d){if(d.h&&typeof u<"u"&&(!d.v[1]||dr(d)!=4||d.Z()!=2)){if(d.u&&dr(d)==4)tf(d.Ea,0,d);else if(en(d,"readystatechange"),dr(d)==4){d.h=!1;try{const ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var I;if(I=ce===0){var q=String(d.D).match(Rc)[1]||null;!q&&h.self&&h.self.location&&(q=h.self.location.protocol.slice(0,-1)),I=!Tl.test(q?q.toLowerCase():"")}E=I}if(E)en(d,"complete"),en(d,"success");else{d.m=6;try{var W=2<dr(d)?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.Z()+"]",wl(d)}}finally{Wr(d)}}}}function Wr(d,y){if(d.g){eo(d);const E=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||en(d,"ready");try{E.onreadystatechange=I}catch{}}}function eo(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function dr(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Br(y)}};function ff(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ig(d){const y={};d=(d.g&&2<=dr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(Y(d[I]))continue;var E=M(d[I]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=y[q]||[];y[q]=W,W.push(E)}x(y,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function to(d,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||y}function Il(d){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=to("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=to("baseRetryDelayMs",5e3,d),this.cb=to("retryDelaySeedMs",1e4,d),this.Wa=to("forwardChannelMaxRetries",2,d),this.wa=to("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ac(d&&d.concurrentRequestLimit),this.Da=new Za,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Il.prototype,n.la=8,n.G=1,n.connect=function(d,y,E,I){Mt(0),this.W=d,this.H=y||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.I=Ef(this,null,this.W),Sl(this)};function xc(d){if(mf(d),d.G==3){var y=d.U++,E=Ct(d.I);if(Ye(E,"SID",d.K),Ye(E,"RID",y),Ye(E,"TYPE","terminate"),no(d,E),y=new Hr(d,d.j,y),y.L=2,y.v=Ya(Ct(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&h.Image&&(new Image().src=y.v,E=!0),E||(y.g=Tf(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Et(y)}vf(d)}function Al(d){d.g&&(ro(d),d.g.cancel(),d.g=null)}function mf(d){Al(d),d.u&&(h.clearTimeout(d.u),d.u=null),Rl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function Sl(d){if(!Sc(d.h)&&!d.s){d.s=!0;var y=d.Ga;Se||k(),pe||(Se(),pe=!0),Ne.add(y,d),d.B=0}}function Ag(d,y){return lf(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ss(w(d.Ga,d,y),Mc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const q=new Hr(this,this.j,d);let W=this.o;if(this.S&&(W?(W=S(W),O(W,this.S)):W=this.S),this.m!==null||this.O||(q.H=W,W=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=pf(this,q,y),E=Ct(this.I),Ye(E,"RID",d),Ye(E,"CVER",22),this.D&&Ye(E,"X-HTTP-Session-Id",this.D),no(this,E),W&&(this.O?y="headers="+encodeURIComponent(String(Nc(W)))+"&"+y:this.m&&nn(E,this.m,W)),xs(this.h,q),this.Ua&&Ye(E,"TYPE","init"),this.P?(Ye(E,"$req",y),Ye(E,"SID","null"),q.T=!0,Cr(q,E,null)):Cr(q,E,y),this.G=2}}else this.G==3&&(d?Vc(this,d):this.i.length==0||Sc(this.h)||Vc(this))};function Vc(d,y){var E;y?E=y.l:E=d.U++;const I=Ct(d.I);Ye(I,"SID",d.K),Ye(I,"RID",E),Ye(I,"AID",d.T),no(d,I),d.m&&d.o&&nn(I,d.m,d.o),E=new Hr(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),y&&(d.i=y.D.concat(d.i)),y=pf(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),xs(d.h,E),Cr(E,I,y)}function no(d,y){d.H&&J(d.H,function(E,I){Ye(y,I,E)}),d.l&&$a({},function(E,I){Ye(y,I,E)})}function pf(d,y,E){E=Math.min(d.i.length,E);var I=d.l?w(d.l.Na,d.l,d):null;e:{var q=d.i;let W=-1;for(;;){const ce=["count="+E];W==-1?0<E?(W=q[0].g,ce.push("ofs="+W)):W=0:ce.push("ofs="+W);let Ge=!0;for(let $t=0;$t<E;$t++){let Ke=q[$t].g;const rn=q[$t].map;if(Ke-=W,0>Ke)W=Math.max(0,q[$t].g-100),Ge=!1;else try{Kr(rn,ce,"req"+Ke+"_")}catch{I&&I(rn)}}if(Ge){I=ce.join("&");break e}}}return d=d.i.splice(0,E),y.D=d,I}function gf(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;Se||k(),pe||(Se(),pe=!0),Ne.add(y,d),d.v=0}}function kc(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ss(w(d.Fa,d),Mc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,yf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ss(w(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),Al(this),yf(this))};function ro(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function yf(d){d.g=new Hr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=Ct(d.qa);Ye(y,"RID","rpc"),Ye(y,"SID",d.K),Ye(y,"AID",d.T),Ye(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ye(y,"TO",d.ja),Ye(y,"TYPE","xmlhttp"),no(d,y),d.m&&d.o&&nn(y,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Ya(Ct(y)),E.m=null,E.P=!0,Ci(E,d)}n.Za=function(){this.C!=null&&(this.C=null,Al(this),kc(this),Mt(19))};function Rl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function _f(d,y){var E=null;if(d.g==y){Rl(d),ro(d),d.g=null;var I=2}else if(Ns(d.h,y))E=y.D,lr(d.h,y),I=1;else return;if(d.G!=0){if(y.o)if(I==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var q=d.B;I=ml(),en(I,new sf(I,E)),Sl(d)}else gf(d);else if(q=y.s,q==3||q==0&&0<y.X||!(I==1&&Ag(d,y)||I==2&&kc(d)))switch(E&&0<E.length&&(y=d.h,y.i=y.i.concat(E)),q){case 1:Vi(d,5);break;case 4:Vi(d,10);break;case 3:Vi(d,6);break;default:Vi(d,2)}}}function Mc(d,y){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*y}function Vi(d,y){if(d.j.info("Error code "+y),y==2){var E=w(d.fb,d),I=d.Xa;const q=!I;I=new Di(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Vs(I,"https"),Ya(I),q?hf(I.toString(),E):Xa(I.toString(),E)}else Mt(2);d.G=0,d.l&&d.l.sa(y),vf(d),mf(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function vf(d){if(d.G=0,d.ka=[],d.l){const y=On(d.h);(y.length!=0||d.i.length!=0)&&(V(d.ka,y),V(d.ka,d.i),d.h.i.length=0,N(d.i),d.i.length=0),d.l.ra()}}function Ef(d,y,E){var I=E instanceof Di?Ct(E):new Di(E);if(I.g!="")y&&(I.g=y+"."+I.g),Wa(I,I.s);else{var q=h.location;I=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var W=new Di(null);I&&Vs(W,I),y&&(W.g=y),q&&Wa(W,q),E&&(W.l=E),I=W}return E=d.D,y=d.ya,E&&y&&Ye(I,E,y),Ye(I,"VER",d.la),no(d,I),I}function Tf(d,y,E){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new tt(new Ms({eb:E})):new tt(d.pa),y.Ha(d.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wf(){}n=wf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Cl(){}Cl.prototype.g=function(d,y){return new Nn(d,y)};function Nn(d,y){Kt.call(this),this.g=new Il(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!Y(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Y(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Yr(this)}C(Nn,Kt),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){xc(this.g)},Nn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Ec(d),d=E);y.i.push(new vg(y.Ya++,d)),y.G==3&&Sl(y)},Nn.prototype.N=function(){this.g.l=null,delete this.j,xc(this.g),delete this.g,Nn.aa.N.call(this)};function bf(d){bs.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const E in y){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}C(bf,bs);function If(){Rr.call(this),this.status=1}C(If,Rr);function Yr(d){this.g=d}C(Yr,wf),Yr.prototype.ua=function(){en(this.g,"a")},Yr.prototype.ta=function(d){en(this.g,new bf(d))},Yr.prototype.sa=function(d){en(this.g,new If)},Yr.prototype.ra=function(){en(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,DR=function(){return new Cl},CR=function(){return ml()},RR=or,ev={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qt.NO_ERROR=0,Qt.TIMEOUT=8,Qt.HTTP_ERROR=6,Lm=Qt,Ri.COMPLETE="complete",SR=Ri,rf.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",Kt.prototype.listen=Kt.prototype.K,Lh=rf,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,AR=tt}).apply(typeof Am<"u"?Am:typeof self<"u"?self:typeof window<"u"?window:{});const _I="@firebase/firestore",vI="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new Op("@firebase/firestore");function cu(){return Ca.logLevel}function b2(n){Ca.setLogLevel(n)}function ie(n,...e){if(Ca.logLevel<=Fe.DEBUG){const t=e.map(nE);Ca.debug(`Firestore (${ac}): ${n}`,...t)}}function Ut(n,...e){if(Ca.logLevel<=Fe.ERROR){const t=e.map(nE);Ca.error(`Firestore (${ac}): ${n}`,...t)}}function vi(n,...e){if(Ca.logLevel<=Fe.WARN){const t=e.map(nE);Ca.warn(`Firestore (${ac}): ${n}`,...t)}}function nE(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(n="Unexpected state"){const e=`FIRESTORE (${ac}) INTERNAL ASSERTION FAILED: `+n;throw Ut(e),new Error(e)}function Ee(n,e){n||ge()}function I2(n,e){n||ge()}function de(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Un{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class S2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class R2{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0);let r=this.i;const a=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let l=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _n,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const f=l;e.enqueueRetryable(async()=>{await f.promise,await a(this.currentUser)})},h=f=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _n)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new PR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new cn(e)}}class C2{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class D2{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new C2(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P2{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,gt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0);const r=l=>{l.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,ie("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new EI(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string"),this.R=t.token,new EI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=O2(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function De(n,e){return n<e?-1:n>e?1:0}function tv(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return De(r,a);{const l=rE(),u=N2(l.encode(TI(n,t)),l.encode(TI(e,t)));return u!==0?u:De(r,a)}}t+=r>65535?2:1}return De(n.length,e.length)}function TI(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function N2(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return De(n[t],e[t]);return De(n.length,e.length)}function xu(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function NR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=-62135596800,bI=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*bI);return new vt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wI)throw new ne($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bI}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-wI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new vt(0,0))}static max(){return new be(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="__name__";class ii{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(),r===void 0?r=e.length-t:r>e.length-t&&ge(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ii.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ii?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=ii.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const r=ii.isNumericId(e),a=ii.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?ii.extractNumericId(e).compare(ii.extractNumericId(t)):tv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ea.fromString(e.substring(4,e.length-2))}}class qe extends ii{construct(e,t,r){return new qe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new qe(t)}static emptyPath(){return new qe([])}}const x2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends ii{construct(e,t,r){return new yt(e,t,r)}static isValidIdentifier(e){return x2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===II}static keyField(){return new yt([II])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ne($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new ne($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ne($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(r+=h,a++):(l(),a++)}if(l(),u)throw new ne($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(t)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(qe.fromString(e))}static fromName(e){return new he(qe.fromString(e).popFirst(5))}static empty(){return new he(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new qe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=-1;class ip{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function nv(n){return n.fields.find(e=>e.kind===2)}function Ro(n){return n.fields.filter(e=>e.kind!==2)}ip.UNKNOWN_ID=-1;class Um{constructor(e,t){this.fieldPath=e,this.kind=t}}class id{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new id(0,sr.min())}}function xR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=be.fromTimestamp(r===1e9?new vt(t+1,0):new vt(t,r));return new sr(a,he.empty(),e)}function VR(n){return new sr(n.readTime,n.key,Vu)}class sr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new sr(be.min(),he.empty(),Vu)}static max(){return new sr(be.max(),he.empty(),Vu)}}function iE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(n){if(n.code!==$.FAILED_PRECONDITION||n.message!==kR)throw n;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):j.reject(t)}static resolve(e){return new j((t,r)=>{t(e)})}static reject(e){return new j((t,r)=>{r(e)})}static waitFor(e){return new j((t,r)=>{let a=0,l=0,u=!1;e.forEach(h=>{++a,h.next(()=>{++l,u&&l===a&&t()},f=>r(f))}),u=!0,l===a&&t()})}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next(a=>a?j.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new j((r,a)=>{const l=e.length,u=new Array(l);let h=0;for(let f=0;f<l;f++){const p=f;t(e[p]).next(_=>{u[p]=_,++h,h===l&&r(u)},_=>a(_))}})}static doWhile(e,t){return new j((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="SimpleDb";class Np{static open(e,t,r,a){try{return new Np(t,e.transaction(a,r))}catch(l){throw new qh(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new _n,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new qh(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const a=sE(r.target.error);this.m.reject(new qh(e,a))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(ie(nr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new k2(t)}}class gi{static delete(e){return ie(nr,"Removing database:",e),Do(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!td())return!1;if(gi.v())return!0;const e=At(),t=gi.C(e),r=0<t&&t<10,a=LR(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,gi.C(At())===12.2&&Ut("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(ie(nr,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new qh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new ne($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new ne($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new qh(e,u))},a.onupgradeneeded=l=>{ie(nr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.O.B(u,a.transaction,l.oldVersion,this.version).next(()=>{ie(nr,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const h=Np.open(this.db,e,l?"readonly":"readwrite",r),f=a(h).next(p=>(h.S(),p)).catch(p=>(h.abort(p),j.reject(p))).toPromise();return f.catch(()=>{}),await h.p,f}catch(h){const f=h,p=f.name!=="FirebaseError"&&u<3;if(ie(nr,"Transaction failed with error:",f.message,"Retrying:",p),this.close(),!p)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function LR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class V2{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return Do(this.q.delete())}}class qh extends ne{constructor(e,t){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function za(n){return n.name==="IndexedDbTransactionError"}class k2{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ie(nr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ie(nr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Do(r)}add(e){return ie(nr,"ADD",this.store.name,e,e),Do(this.store.add(e))}get(e){return Do(this.store.get(e)).next(t=>(t===void 0&&(t=null),ie(nr,"GET",this.store.name,e,t),t))}delete(e){return ie(nr,"DELETE",this.store.name,e),Do(this.store.delete(e))}count(){return ie(nr,"COUNT",this.store.name),Do(this.store.count())}G(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new j((u,h)=>{l.onerror=f=>{h(f.target.error)},l.onsuccess=f=>{u(f.target.result)}})}{const l=this.cursor(r),u=[];return this.j(l,(h,f)=>{u.push(f)}).next(()=>u)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new j((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}})}J(e,t){ie(nr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.j(a,(l,u,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.j(a,t)}X(e){const t=this.cursor({});return new j((r,a)=>{t.onerror=l=>{const u=sE(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}j(e,t){const r=[];return new j((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void a();const f=new V2(h),p=t(h.primaryKey,h.value,f);if(p instanceof j){const _=p.catch(v=>(f.done(),j.reject(v)));r.push(_)}f.isDone?a():f.K===null?h.continue():h.continue(f.K)}}).next(()=>j.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Do(n){return new j((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=sE(r.target.error);t(a)}})}let AI=!1;function sE(n){const e=gi.C(At());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AI||(AI=!0,setTimeout(()=>{throw r},0)),r}}return n}const jh="IndexBackfiller";class M2{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){ie(jh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();ie(jh,`Documents written: ${t}`)}catch(t){za(t)?ie(jh,"Ignoring IndexedDB error during index backfill: ",t):await Ua(t)}await this.te(6e4)})}}class L2{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let a=t,l=!0;return j.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!r.has(u))return ie(jh,`Processing collection: ${u}`),this.ie(e,u,a).next(h=>{a-=h,r.add(u)});l=!1})).next(()=>t-a)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(a,l)).next(h=>(ie(jh,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}se(e,t){let r=e;return t.changes.forEach((a,l)=>{const u=VR(l);iE(u,r)>0&&(r=u)}),new sr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Kn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=-1;function xd(n){return n==null}function sd(n){return n===0&&1/n==-1/0}function UR(n){return typeof n=="number"&&Number.isInteger(n)&&!sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="";function Rn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=SI(e)),e=U2(n.get(t),e);return SI(e)}function U2(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case sp:t+="";break;default:t+=l}}return t}function SI(n){return n+sp+""}function fi(n){const e=n.length;if(Ee(e>=2),e===2)return Ee(n.charAt(0)===sp&&n.charAt(1)===""),qe.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=n.indexOf(sp,l);switch((u<0||u>t)&&ge(),n.charAt(u+1)){case"":const h=n.substring(l,u);let f;a.length===0?f=h:(a+=h,f=a,a=""),r.push(f);break;case"":a+=n.substring(l,u),a+="\0";break;case"":a+=n.substring(l,u+1);break;default:ge()}l=u+2}return new qe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="remoteDocuments",Vd="owner",nu="owner",ad="mutationQueues",z2="userId",Mr="mutations",RI="batchId",Vo="userMutationsIndex",CI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(n,e){return[n,Rn(e)]}function zR(n,e,t){return[n,Rn(e),t]}const F2={},ku="documentMutations",ap="remoteDocumentsV14",B2=["prefixPath","collectionGroup","readTime","documentId"],Fm="documentKeyIndex",q2=["prefixPath","collectionGroup","documentId"],FR="collectionGroupIndex",j2=["collectionGroup","readTime","prefixPath","documentId"],od="remoteDocumentGlobal",rv="remoteDocumentGlobalKey",Mu="targets",BR="queryTargetsIndex",H2=["canonicalId","targetId"],Lu="targetDocuments",G2=["targetId","path"],aE="documentTargetsIndex",K2=["path","targetId"],op="targetGlobalKey",Ho="targetGlobal",ld="collectionParents",Q2=["collectionId","parent"],Uu="clientMetadata",$2="clientId",xp="bundles",W2="bundleId",Vp="namedQueries",Y2="name",oE="indexConfiguration",X2="indexId",iv="collectionGroupIndex",Z2="collectionGroup",lp="indexState",J2=["indexId","uid"],qR="sequenceNumberIndex",eM=["uid","sequenceNumber"],up="indexEntries",tM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jR="documentKeyIndex",nM=["indexId","uid","orderedDocumentKey"],kp="documentOverlays",rM=["userId","collectionPath","documentId"],sv="collectionPathOverlayIndex",iM=["userId","collectionPath","largestBatchId"],HR="collectionGroupOverlayIndex",sM=["userId","collectionGroup","largestBatchId"],lE="globals",aM="name",GR=[ad,Mr,ku,Co,Mu,Vd,Ho,Lu,Uu,od,ld,xp,Vp],oM=[...GR,kp],KR=[ad,Mr,ku,ap,Mu,Vd,Ho,Lu,Uu,od,ld,xp,Vp,kp],QR=KR,uE=[...QR,oE,lp,up],lM=uE,uM=[...uE,lE];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av extends MR{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Jt(n,e){const t=de(n);return gi.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $R(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||gn.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sm(this.root,e,this.comparator,!0)}}class Sm{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??gn.RED,this.left=a??gn.EMPTY,this.right=l??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new gn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return gn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,t,r,a,l){return this}insert(e,t,r){return new gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PI(this.data.getIterator())}getIteratorFrom(e){return new PI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new st(this.comparator);return t.data=e,t}}class PI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ru(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new Qn([])}unionWith(e){let t=new st(yt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new WR("Invalid base64 string: "+l):l}}(e);return new xt(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const hM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(n){if(Ee(!!n),typeof n=="string"){let e=0;const t=hM.exec(n);if(Ee(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ls(n){return typeof n=="string"?xt.fromBase64String(n):xt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="server_timestamp",XR="__type__",ZR="__previous_value__",JR="__local_write_time__";function Mp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[XR])===null||t===void 0?void 0:t.stringValue)===YR}function Lp(n){const e=n.mapValue.fields[ZR];return Mp(e)?Lp(e):e}function ud(n){const e=os(n.mapValue.fields[JR].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t,r,a,l,u,h,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p}}const ov="(default)";class Da{constructor(e,t){this.projectId=e,this.database=t||ov}static empty(){return new Da("","")}get isDefaultDatabase(){return this.database===ov}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="__type__",eC="__max__",ga={mapValue:{fields:{__type__:{stringValue:eC}}}},hE="__vector__",zu="value",Bm={nullValue:"NULL_VALUE"};function Pa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mp(n)?4:tC(n)?9007199254740991:Up(n)?10:11:ge()}function Ei(n,e){if(n===e)return!0;const t=Pa(n);if(t!==Pa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ud(n).isEqual(ud(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=os(a.timestampValue),h=os(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return ls(a.bytesValue).isEqual(ls(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return pt(a.geoPointValue.latitude)===pt(l.geoPointValue.latitude)&&pt(a.geoPointValue.longitude)===pt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return pt(a.integerValue)===pt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=pt(a.doubleValue),h=pt(l.doubleValue);return u===h?sd(u)===sd(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return xu(n.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(DI(u)!==DI(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Ei(u[f],h[f])))return!1;return!0}(n,e);default:return ge()}}function cd(n,e){return(n.values||[]).find(t=>Ei(t,e))!==void 0}function Oa(n,e){if(n===e)return 0;const t=Pa(n),r=Pa(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return function(l,u){const h=pt(l.integerValue||l.doubleValue),f=pt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return OI(n.timestampValue,e.timestampValue);case 4:return OI(ud(n),ud(e));case 5:return tv(n.stringValue,e.stringValue);case 6:return function(l,u){const h=ls(l),f=ls(u);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const h=l.split("/"),f=u.split("/");for(let p=0;p<h.length&&p<f.length;p++){const _=De(h[p],f[p]);if(_!==0)return _}return De(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const h=De(pt(l.latitude),pt(u.latitude));return h!==0?h:De(pt(l.longitude),pt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return NI(n.arrayValue,e.arrayValue);case 10:return function(l,u){var h,f,p,_;const v=l.fields||{},w=u.fields||{},R=(h=v[zu])===null||h===void 0?void 0:h.arrayValue,C=(f=w[zu])===null||f===void 0?void 0:f.arrayValue,N=De(((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0,((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0);return N!==0?N:NI(R,C)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===ga.mapValue&&u===ga.mapValue)return 0;if(l===ga.mapValue)return 1;if(u===ga.mapValue)return-1;const h=l.fields||{},f=Object.keys(h),p=u.fields||{},_=Object.keys(p);f.sort(),_.sort();for(let v=0;v<f.length&&v<_.length;++v){const w=tv(f[v],_[v]);if(w!==0)return w;const R=Oa(h[f[v]],p[_[v]]);if(R!==0)return R}return De(f.length,_.length)}(n.mapValue,e.mapValue);default:throw ge()}}function OI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);const t=os(n),r=os(e),a=De(t.seconds,r.seconds);return a!==0?a:De(t.nanos,r.nanos)}function NI(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Oa(t[a],r[a]);if(l)return l}return De(t.length,r.length)}function Fu(n){return lv(n)}function lv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=os(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ls(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return he.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=lv(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${lv(t.fields[u])}`;return a+"}"}(n.mapValue):ge()}function qm(n){switch(Pa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lp(n);return e?16+qm(e):16;case 5:return 2*n.stringValue.length;case 6:return ls(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+qm(l),0)}(n.arrayValue);case 10:case 11:return function(r){let a=0;return Fa(r.fields,(l,u)=>{a+=l.length+qm(u)}),a}(n.mapValue);default:throw ge()}}function Qo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uv(n){return!!n&&"integerValue"in n}function hd(n){return!!n&&"arrayValue"in n}function xI(n){return!!n&&"nullValue"in n}function VI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jm(n){return!!n&&"mapValue"in n}function Up(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[cE])===null||t===void 0?void 0:t.stringValue)===hE}function Hh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Fa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===eC}const nC={mapValue:{fields:{[cE]:{stringValue:hE},[zu]:{arrayValue:{}}}}};function fM(n){return"nullValue"in n?Bm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Qo(Da.empty(),he.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Up(n)?nC:{mapValue:{}}:ge()}function mM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Qo(Da.empty(),he.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?nC:"mapValue"in n?Up(n)?{mapValue:{}}:ga:ge()}function kI(n,e){const t=Oa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function MI(n,e){const t=Oa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hh(t)}setAll(e){let t=yt.emptyPath(),r={},a=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,a),r={},a=[],t=h.popLast()}u?r[h.lastSegment()]=Hh(u):a.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());jm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];jm(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Fa(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new yn(Hh(this.value))}}function rC(n){const e=[];return Fa(n.fields,(t,r)=>{const a=new yt([t]);if(jm(r)){const l=rC(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t,r,a,l,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new mt(e,0,be.min(),be.min(),be.min(),yn.empty(),0)}static newFoundDocument(e,t,r,a){return new mt(e,1,t,be.min(),r,a,0)}static newNoDocument(e,t){return new mt(e,2,t,be.min(),be.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new mt(e,3,t,be.min(),be.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t){this.position=e,this.inclusive=t}}function LI(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?r=he.comparator(he.fromName(u.referenceValue),t.key):r=Oa(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function UI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ei(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function pM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{}class je extends iC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new gM(e,t,r):t==="array-contains"?new vM(e,r):t==="in"?new cC(e,r):t==="not-in"?new EM(e,r):t==="array-contains-any"?new TM(e,r):new je(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new yM(e,r):new _M(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Oa(t,this.value)):t!==null&&Pa(this.value)===Pa(t)&&this.matchesComparison(Oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class it extends iC{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new it(e,t)}matches(e){return Bu(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Bu(n){return n.op==="and"}function cv(n){return n.op==="or"}function dE(n){return sC(n)&&Bu(n)}function sC(n){for(const e of n.filters)if(e instanceof it)return!1;return!0}function hv(n){if(n instanceof je)return n.field.canonicalString()+n.op.toString()+Fu(n.value);if(dE(n))return n.filters.map(e=>hv(e)).join(",");{const e=n.filters.map(t=>hv(t)).join(",");return`${n.op}(${e})`}}function aC(n,e){return n instanceof je?function(r,a){return a instanceof je&&r.op===a.op&&r.field.isEqual(a.field)&&Ei(r.value,a.value)}(n,e):n instanceof it?function(r,a){return a instanceof it&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,u,h)=>l&&aC(u,a.filters[h]),!0):!1}(n,e):void ge()}function oC(n,e){const t=n.filters.concat(e);return it.create(t,n.op)}function lC(n){return n instanceof je?function(t){return`${t.field.canonicalString()} ${t.op} ${Fu(t.value)}`}(n):n instanceof it?function(t){return t.op.toString()+" {"+t.getFilters().map(lC).join(" ,")+"}"}(n):"Filter"}class gM extends je{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class yM extends je{constructor(e,t){super(e,"in",t),this.keys=uC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _M extends je{constructor(e,t){super(e,"not-in",t),this.keys=uC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class vM extends je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hd(t)&&cd(t.arrayValue,this.value)}}class cC extends je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cd(this.value.arrayValue,t)}}class EM extends je{constructor(e,t){super(e,"not-in",t)}matches(e){if(cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!cd(this.value.arrayValue,t)}}class TM extends je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,t=null,r=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.le=null}}function dv(n,e=null,t=[],r=[],a=null,l=null,u=null){return new wM(n,e,t,r,a,l,u)}function $o(n){const e=de(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>hv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),xd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fu(r)).join(",")),e.le=t}return e.le}function kd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UI(n.startAt,e.startAt)&&UI(n.endAt,e.endAt)}function cp(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function hp(n,e){return n.filters.filter(t=>t instanceof je&&t.field.isEqual(e))}function zI(n,e,t){let r=Bm,a=!0;for(const l of hp(n,e)){let u=Bm,h=!0;switch(l.op){case"<":case"<=":u=fM(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,h=!1;break;case"!=":case"not-in":u=Bm}kI({value:r,inclusive:a},{value:u,inclusive:h})<0&&(r=u,a=h)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];kI({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function FI(n,e,t){let r=ga,a=!0;for(const l of hp(n,e)){let u=ga,h=!0;switch(l.op){case">=":case">":u=mM(l.value),h=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,h=!1;break;case"!=":case"not-in":u=ga}MI({value:r,inclusive:a},{value:u,inclusive:h})>0&&(r=u,a=h)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];MI({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t=null,r=[],a=[],l=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=f,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function hC(n,e,t,r,a,l,u,h){return new ms(n,e,t,r,a,l,u,h)}function oc(n){return new ms(n)}function BI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fE(n){return n.collectionGroup!==null}function gu(n){const e=de(n);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new st(yt.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new dd(l,r))}),t.has(yt.keyField().canonicalString())||e.he.push(new dd(yt.keyField(),r))}return e.he}function zn(n){const e=de(n);return e.Pe||(e.Pe=bM(e,gu(n))),e.Pe}function bM(n,e){if(n.limitType==="F")return dv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new dd(a.field,l)});const t=n.endAt?new Na(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Na(n.startAt.position,n.startAt.inclusive):null;return dv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function fv(n,e){const t=n.filters.concat([e]);return new ms(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function dp(n,e,t){return new ms(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Md(n,e){return kd(zn(n),zn(e))&&n.limitType===e.limitType}function dC(n){return`${$o(zn(n))}|lt:${n.limitType}`}function hu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>lC(a)).join(", ")}]`),xd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Fu(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Fu(a)).join(",")),`Target(${r})`}(zn(n))}; limitType=${n.limitType})`}function Ld(n,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):he.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(n,e)&&function(r,a){for(const l of gu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(r,a){return!(r.startAt&&!function(u,h,f){const p=LI(u,h,f);return u.inclusive?p<=0:p<0}(r.startAt,gu(r),a)||r.endAt&&!function(u,h,f){const p=LI(u,h,f);return u.inclusive?p>=0:p>0}(r.endAt,gu(r),a))}(n,e)}function fC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mC(n){return(e,t)=>{let r=!1;for(const a of gu(n)){const l=IM(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function IM(n,e,t){const r=n.field.isKeyField()?he.comparator(e.key,t.key):function(l,u,h){const f=u.data.field(l),p=h.data.field(l);return f!==null&&p!==null?Oa(f,p):ge()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Fa(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return $R(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=new dt(he.comparator);function $n(){return AM}const pC=new dt(he.comparator);function Uh(...n){let e=pC;for(const t of n)e=e.insert(t.key,t);return e}function gC(n){let e=pC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function mi(){return Gh()}function yC(){return Gh()}function Gh(){return new ps(n=>n.toString(),(n,e)=>n.isEqual(e))}const SM=new dt(he.comparator),RM=new st(he.comparator);function ke(...n){let e=RM;for(const t of n)e=e.add(t);return e}const CM=new st(De);function mE(){return CM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(e)?"-0":e}}function _C(n){return{integerValue:""+n}}function vC(n,e){return UR(e)?_C(e):pE(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this._=void 0}}function DM(n,e,t){return n instanceof qu?function(a,l){const u={fields:{[XR]:{stringValue:YR},[JR]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Mp(l)&&(l=Lp(l)),l&&(u.fields[ZR]=l),{mapValue:u}}(t,e):n instanceof Wo?TC(n,e):n instanceof Yo?wC(n,e):function(a,l){const u=EC(a,l),h=qI(u)+qI(a.Ie);return uv(u)&&uv(a.Ie)?_C(h):pE(a.serializer,h)}(n,e)}function PM(n,e,t){return n instanceof Wo?TC(n,e):n instanceof Yo?wC(n,e):t}function EC(n,e){return n instanceof ju?function(r){return uv(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class qu extends zp{}class Wo extends zp{constructor(e){super(),this.elements=e}}function TC(n,e){const t=bC(e);for(const r of n.elements)t.some(a=>Ei(a,r))||t.push(r);return{arrayValue:{values:t}}}class Yo extends zp{constructor(e){super(),this.elements=e}}function wC(n,e){let t=bC(e);for(const r of n.elements)t=t.filter(a=>!Ei(a,r));return{arrayValue:{values:t}}}class ju extends zp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function qI(n){return pt(n.integerValue||n.doubleValue)}function bC(n){return hd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t){this.field=e,this.transform=t}}function OM(n,e){return n.field.isEqual(e.field)&&function(r,a){return r instanceof Wo&&a instanceof Wo||r instanceof Yo&&a instanceof Yo?xu(r.elements,a.elements,Ei):r instanceof ju&&a instanceof ju?Ei(r.Ie,a.Ie):r instanceof qu&&a instanceof qu}(n.transform,e.transform)}class NM{constructor(e,t){this.version=e,this.transformResults=t}}class _t{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _t}static exists(e){return new _t(void 0,e)}static updateTime(e){return new _t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}let Fp=class{};function IC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uc(n.key,_t.none()):new lc(n.key,n.data,_t.none());{const t=n.data,r=yn.empty();let a=new st(yt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new gs(n.key,r,new Qn(a.toArray()),_t.none())}}function xM(n,e,t){n instanceof lc?function(a,l,u){const h=a.value.clone(),f=HI(a.fieldTransforms,l,u.transformResults);h.setAll(f),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof gs?function(a,l,u){if(!Hm(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=HI(a.fieldTransforms,l,u.transformResults),f=l.data;f.setAll(AC(a)),f.setAll(h),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Kh(n,e,t,r){return n instanceof lc?function(l,u,h,f){if(!Hm(l.precondition,u))return h;const p=l.value.clone(),_=GI(l.fieldTransforms,f,u);return p.setAll(_),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof gs?function(l,u,h,f){if(!Hm(l.precondition,u))return h;const p=GI(l.fieldTransforms,f,u),_=u.data;return _.setAll(AC(l)),_.setAll(p),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(l,u,h){return Hm(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function VM(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=EC(r.transform,a||null);l!=null&&(t===null&&(t=yn.empty()),t.set(r.field,l))}return t||null}function jI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&xu(r,a,(l,u)=>OM(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class lc extends Fp{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class gs extends Fp{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function AC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function HI(n,e,t){const r=new Map;Ee(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);r.set(l.field,PM(u,h,t[a]))}return r}function GI(n,e,t){const r=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);r.set(a.field,DM(l,u,e))}return r}class uc extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gE extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&xM(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Kh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yC();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const f=IC(u,h);f!==null&&r.set(a.key,f),u.isValidDocument()||u.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&xu(this.mutations,e.mutations,(t,r)=>jI(t,r))&&xu(this.baseMutations,e.baseMutations,(t,r)=>jI(t,r))}}class _E{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ee(e.mutations.length===r.length);let a=function(){return SM}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new _E(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,$e;function SC(n){switch(n){case $.OK:return ge();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ge()}}function RC(n){if(n===void 0)return Ut("GRPC error has no .code"),$.UNKNOWN;switch(n){case Ht.OK:return $.OK;case Ht.CANCELLED:return $.CANCELLED;case Ht.UNKNOWN:return $.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return $.INTERNAL;case Ht.UNAVAILABLE:return $.UNAVAILABLE;case Ht.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ht.NOT_FOUND:return $.NOT_FOUND;case Ht.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ht.ABORTED:return $.ABORTED;case Ht.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ht.DATA_LOSS:return $.DATA_LOSS;default:return ge()}}($e=Ht||(Ht={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new Ea([4294967295,4294967295],0);function KI(n){const e=rE().encode(n),t=new IR;return t.update(e),new Uint8Array(t.digest())}function QI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ea([t,r],0),new Ea([a,l],0)]}class EE{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zh(`Invalid padding: ${t}`);if(r<0)throw new zh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zh(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ea.fromNumber(this.Ee)}Ae(e,t,r){let a=e.add(t.multiply(Ea.fromNumber(r)));return a.compare(MM)===1&&(a=new Ea([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=KI(e),[r,a]=QI(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(r,a,l);if(!this.Re(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new EE(l,a,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const t=KI(e),[r,a]=QI(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(r,a,l);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class zh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Fd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new zd(be.min(),a,new dt(De),$n(),ke())}}class Fd{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Fd(r,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t,r,a){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=a}}class CC{constructor(e,t){this.targetId=e,this.ge=t}}class DC{constructor(e,t,r=xt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class $I{constructor(){this.pe=0,this.ye=WI(),this.we=xt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ke(),t=ke(),r=ke();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ge()}}),new Fd(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=WI()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ee(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class LM{constructor(e){this.ke=e,this.qe=new Map,this.Qe=$n(),this.$e=Rm(),this.Ue=Rm(),this.Ke=new dt(De)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,r=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(cp(l))if(r===0){const u=new he(l.path);this.ze(t,u,mt.newNoDocument(u,be.min()))}else Ee(r===1);else{const u=this.et(t);if(u!==r){const h=this.tt(e),f=h?this.nt(h,e,u):1;if(f!==0){this.Ye(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=ls(r).toUint8Array()}catch(f){if(f instanceof WR)return vi("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new EE(u,a,l)}catch(f){return vi(f instanceof zh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ee===0?null:h}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,u)=>{const h=this.Xe(u);if(h){if(l.current&&cp(h.target)){const f=new he(h.target.path);this._t(f).has(u)||this.ut(u,f)||this.ze(u,f,mt.newNoDocument(f,e))}l.ve&&(t.set(u,l.Fe()),l.Me())}});let r=ke();this.Ue.forEach((l,u)=>{let h=!0;u.forEachWhile(f=>{const p=this.Xe(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(l))}),this.Qe.forEach((l,u)=>u.setReadTime(e));const a=new zd(e,t,this.Ke,this.Qe,r);return this.Qe=$n(),this.$e=Rm(),this.Ue=Rm(),this.Ke=new dt(De),a}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new $I,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new st(De),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new st(De),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new $I),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Rm(){return new dt(he.comparator)}function WI(){return new dt(he.comparator)}const UM={asc:"ASCENDING",desc:"DESCENDING"},zM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FM={and:"AND",or:"OR"};class BM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mv(n,e){return n.useProto3Json||xd(e)?e:{value:e}}function Hu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qM(n,e){return Hu(n,e.toTimestamp())}function zt(n){return Ee(!!n),be.fromTimestamp(function(t){const r=os(t);return new vt(r.seconds,r.nanos)}(n))}function TE(n,e){return pv(n,e).canonicalString()}function pv(n,e){const t=function(a){return new qe(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function OC(n){const e=qe.fromString(n);return Ee(BC(e)),e}function fd(n,e){return TE(n.databaseId,e.path)}function yi(n,e){const t=OC(e);if(t.get(1)!==n.databaseId.projectId)throw new ne($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(VC(t))}function NC(n,e){return TE(n.databaseId,e)}function xC(n){const e=OC(n);return e.length===4?qe.emptyPath():VC(e)}function gv(n){return new qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VC(n){return Ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function YI(n,e,t){return{name:fd(n,e),fields:t.value.mapValue.fields}}function kC(n,e,t){const r=yi(n,e.name),a=zt(e.updateTime),l=e.createTime?zt(e.createTime):be.min(),u=new yn({mapValue:{fields:e.fields}}),h=mt.newFoundDocument(r,a,l,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function jM(n,e){return"found"in e?function(r,a){Ee(!!a.found),a.found.name,a.found.updateTime;const l=yi(r,a.found.name),u=zt(a.found.updateTime),h=a.found.createTime?zt(a.found.createTime):be.min(),f=new yn({mapValue:{fields:a.found.fields}});return mt.newFoundDocument(l,u,h,f)}(n,e):"missing"in e?function(r,a){Ee(!!a.missing),Ee(!!a.readTime);const l=yi(r,a.missing),u=zt(a.readTime);return mt.newNoDocument(l,u)}(n,e):ge()}function HM(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,_){return p.useProto3Json?(Ee(_===void 0||typeof _=="string"),xt.fromBase64String(_||"")):(Ee(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),xt.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const _=p.code===void 0?$.UNKNOWN:RC(p.code);return new ne(_,p.message||"")}(u);t=new DC(r,a,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=yi(n,r.document.name),l=zt(r.document.updateTime),u=r.document.createTime?zt(r.document.createTime):be.min(),h=new yn({mapValue:{fields:r.document.fields}}),f=mt.newFoundDocument(a,l,u,h),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Gm(p,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=yi(n,r.document),l=r.readTime?zt(r.readTime):be.min(),u=mt.newNoDocument(a,l),h=r.removedTargetIds||[];t=new Gm([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=yi(n,r.document),l=r.removedTargetIds||[];t=new Gm([],l,a,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new kM(a,l),h=r.targetId;t=new CC(h,u)}}return t}function md(n,e){let t;if(e instanceof lc)t={update:YI(n,e.key,e.value)};else if(e instanceof uc)t={delete:fd(n,e.key)};else if(e instanceof gs)t={update:YI(n,e.key,e.data),updateMask:YM(e.fieldMask)};else{if(!(e instanceof gE))return ge();t={verify:fd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,u){const h=u.transform;if(h instanceof qu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Wo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Yo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ju)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw ge()}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:qM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge()}(n,e.precondition)),t}function yv(n,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?_t.updateTime(zt(l.updateTime)):l.exists!==void 0?_t.exists(l.exists):_t.none()}(e.currentDocument):_t.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(u,h){let f=null;if("setToServerValue"in h)Ee(h.setToServerValue==="REQUEST_TIME"),f=new qu;else if("appendMissingElements"in h){const _=h.appendMissingElements.values||[];f=new Wo(_)}else if("removeAllFromArray"in h){const _=h.removeAllFromArray.values||[];f=new Yo(_)}else"increment"in h?f=new ju(u,h.increment):ge();const p=yt.fromServerFormat(h.fieldPath);return new Ud(p,f)}(n,a)):[];if(e.update){e.update.name;const a=yi(n,e.update.name),l=new yn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(f){const p=f.fieldPaths||[];return new Qn(p.map(_=>yt.fromServerFormat(_)))}(e.updateMask);return new gs(a,l,u,t,r)}return new lc(a,l,t,r)}if(e.delete){const a=yi(n,e.delete);return new uc(a,t)}if(e.verify){const a=yi(n,e.verify);return new gE(a,t)}return ge()}function GM(n,e){return n&&n.length>0?(Ee(e!==void 0),n.map(t=>function(a,l){let u=a.updateTime?zt(a.updateTime):zt(l);return u.isEqual(be.min())&&(u=zt(l)),new NM(u,a.transformResults||[])}(t,e))):[]}function MC(n,e){return{documents:[NC(n,e.path)]}}function LC(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=NC(n,a);const l=function(p){if(p.length!==0)return FC(it.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(p){if(p.length!==0)return p.map(_=>function(w){return{field:du(w.field),direction:QM(w.dir)}}(_))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=mv(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:a}}function UC(n){let e=xC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ee(r===1);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(v){const w=zC(v);return w instanceof it&&dE(w)?w.getFilters():[w]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(w=>function(C){return new dd(fu(C.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(w))}(t.orderBy));let h=null;t.limit&&(h=function(v){let w;return w=typeof v=="object"?v.value:v,xd(w)?null:w}(t.limit));let f=null;t.startAt&&(f=function(v){const w=!!v.before,R=v.values||[];return new Na(R,w)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const w=!v.before,R=v.values||[];return new Na(R,w)}(t.endAt)),hC(e,a,u,l,h,"F",f,p)}function KM(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fu(t.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=fu(t.unaryFilter.field);return je.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fu(t.unaryFilter.field);return je.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fu(t.unaryFilter.field);return je.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(n):n.fieldFilter!==void 0?function(t){return je.create(fu(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return it.create(t.compositeFilter.filters.map(r=>zC(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge()}}(t.compositeFilter.op))}(n):ge()}function QM(n){return UM[n]}function $M(n){return zM[n]}function WM(n){return FM[n]}function du(n){return{fieldPath:n.canonicalString()}}function fu(n){return yt.fromServerFormat(n.fieldPath)}function FC(n){return n instanceof je?function(t){if(t.op==="=="){if(VI(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NAN"}};if(xI(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(VI(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NOT_NAN"}};if(xI(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:du(t.field),op:$M(t.op),value:t.value}}}(n):n instanceof it?function(t){const r=t.getFilters().map(a=>FC(a));return r.length===1?r[0]:{compositeFilter:{op:WM(t.op),filters:r}}}(n):ge()}function YM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t,r,a,l=be.min(),u=be.min(),h=xt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.Tt=e}}function XM(n,e){let t;if(e.document)t=kC(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),a=Zo(e.noDocument.readTime);t=mt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge();{const r=he.fromSegments(e.unknownDocument.path),a=Zo(e.unknownDocument.version);t=mt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const l=new vt(a[0],a[1]);return be.fromTimestamp(l)}(e.readTime)),t}function XI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,u){return{name:fd(l,u.key),fields:u.data.value.mapValue.fields,updateTime:Hu(l,u.version.toTimestamp()),createTime:Hu(l,u.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Xo(e.version)};else{if(!e.isUnknownDocument())return ge();r.unknownDocument={path:t.path.toArray(),version:Xo(e.version)}}return r}function fp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Xo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zo(n){const e=new vt(n.seconds,n.nanoseconds);return be.fromTimestamp(e)}function Po(n,e){const t=(e.baseMutations||[]).map(l=>yv(n.Tt,l));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const h=e.mutations[l+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>yv(n.Tt,l)),a=vt.fromMillis(e.localWriteTimeMs);return new yE(e.batchId,a,t,r)}function Fh(n){const e=Zo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Zo(n.lastLimboFreeSnapshotVersion):be.min();let r;return r=function(l){return l.documents!==void 0}(n.query)?function(l){return Ee(l.documents.length===1),zn(oc(xC(l.documents[0])))}(n.query):function(l){return zn(UC(l))}(n.query),new Ji(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,xt.fromBase64String(n.resumeToken))}function jC(n,e){const t=Xo(e.snapshotVersion),r=Xo(e.lastLimboFreeSnapshotVersion);let a;a=cp(e.target)?MC(n.Tt,e.target):LC(n.Tt,e.target).ht;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$o(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function wE(n){const e=UC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dp(e,e.limit,"L"):e}function P_(n,e){return new vE(e.largestBatchId,yv(n.Tt,e.overlayMutation))}function ZI(n,e){const t=e.path.lastSegment();return[n,Rn(e.path.popLast()),t]}function JI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Xo(r.readTime),documentKey:Rn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{getBundleMetadata(e,t){return eA(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Zo(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return eA(e).put(function(a){return{bundleId:a.id,createTime:Xo(zt(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return tA(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:wE(l.bundledQuery),readTime:Zo(l.readTime)}}(r)})}saveNamedQuery(e,t){return tA(e).put(function(a){return{name:a.name,readTime:Xo(zt(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function eA(n){return Jt(n,xp)}function tA(n){return Jt(n,Vp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new Bp(e,r)}getOverlay(e,t){return Sh(e).get(ZI(this.userId,t)).next(r=>r?P_(this.serializer,r):null)}getOverlays(e,t){const r=mi();return j.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,u)=>{const h=new vE(t,u);a.push(this.Et(e,h))}),j.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(u=>a.add(Rn(u.getCollectionPath())));const l=[];return a.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Sh(e).J(sv,h))}),j.waitFor(l)}getOverlaysForCollection(e,t,r){const a=mi(),l=Rn(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Sh(e).G(sv,u).next(h=>{for(const f of h){const p=P_(this.serializer,f);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=mi();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sh(e).Z({index:HR,range:h},(f,p,_)=>{const v=P_(this.serializer,p);l.size()<a||v.largestBatchId===u?(l.set(v.getKey(),v),u=v.largestBatchId):_.done()}).next(()=>l)}Et(e,t){return Sh(e).put(function(a,l,u){const[h,f,p]=ZI(l,u.mutation.key);return{userId:l,collectionPath:f,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:md(a.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function Sh(n){return Jt(n,kp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{dt(e){return Jt(e,lE)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?xt.fromUint8Array(r):xt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),sd(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=os(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(ls(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?tC(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Up(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ge()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const a of Object.keys(r))this.wt(a,t),this.Rt(r[a],t)}vt(e,t){var r,a;const l=e.fields||{};this.ft(t,53);const u=zu,h=((a=(r=l[u].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.ft(t,15),t.gt(pt(h)),this.wt(u,t),this.Rt(l[u],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const a of r)this.Rt(a,t)}Dt(e,t){this.ft(t,37),he.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}Oo.xt=new Oo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=255;function eL(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function nA(n){const e=64-function(r){let a=0;for(let l=0;l<8;++l){const u=eL(255&r[l]);if(a+=u,u!==8)break}return a}(n);return Math.ceil(e/8)}class tL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const a=t.codePointAt(0);this.Nt(240|a>>>18),this.Nt(128|63&a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const a=t.codePointAt(0);this.kt(240|a>>>18),this.kt(128|63&a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a)}}this.qt()}Ut(e){const t=this.Kt(e),r=nA(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Gt(e){const t=this.Kt(e),r=nA(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}zt(){this.jt(iu),this.jt(255)}Ht(){this.Jt(iu),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===iu?(this.jt(iu),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===iu?(this.Jt(iu),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class nL{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class rL{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Rh{constructor(){this.Zt=new tL,this.Xt=new nL(this.Zt),this.en=new rL(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new No(this.indexId,this.documentKey,this.arrayValue,r)}}function ia(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=rA(n.arrayValue,e.arrayValue),t!==0?t:(t=rA(n.directionalValue,e.directionalValue),t!==0?t:he.comparator(n.documentKey,e.documentKey)))}function rA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.rn=new st((t,r)=>yt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(Ee(e.collectionGroup===this.collectionId),this.an)return!1;const t=nv(e);if(t!==void 0&&!this.cn(t))return!1;const r=Ro(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.cn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.rn.size>0){const h=this.rn.getIterator().getNext();if(!a.has(h.field.canonicalString())){const f=r[l];if(!this.ln(h,f)||!this.hn(this.sn[u++],f))return!1}++l}for(;l<r.length;++l){const h=r[l];if(u>=this.sn.length||!this.hn(this.sn[u++],h))return!1}return!0}Pn(){if(this.an)return null;let e=new st(yt.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Um(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Um(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Um(r.field,r.dir==="asc"?0:1)));return new ip(ip.UNKNOWN_ID,this.collectionId,t,id.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(n){var e,t;if(Ee(n instanceof je||n instanceof it),n instanceof je){if(n instanceof cC){const a=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>je.create(n.field,"==",l)))||[];return it.create(a,"or")}return n}const r=n.filters.map(a=>HC(a));return it.create(r,n.op)}function iL(n){if(n.getFilters().length===0)return[];const e=Ev(HC(n));return Ee(GC(e)),_v(e)||vv(e)?[e]:e.getFilters()}function _v(n){return n instanceof je}function vv(n){return n instanceof it&&dE(n)}function GC(n){return _v(n)||vv(n)||function(t){if(t instanceof it&&cv(t)){for(const r of t.getFilters())if(!_v(r)&&!vv(r))return!1;return!0}return!1}(n)}function Ev(n){if(Ee(n instanceof je||n instanceof it),n instanceof je)return n;if(n.filters.length===1)return Ev(n.filters[0]);const e=n.filters.map(r=>Ev(r));let t=it.create(e,n.op);return t=mp(t),GC(t)?t:(Ee(t instanceof it),Ee(Bu(t)),Ee(t.filters.length>1),t.filters.reduce((r,a)=>bE(r,a)))}function bE(n,e){let t;return Ee(n instanceof je||n instanceof it),Ee(e instanceof je||e instanceof it),t=n instanceof je?e instanceof je?function(a,l){return it.create([a,l],"and")}(n,e):sA(n,e):e instanceof je?sA(e,n):function(a,l){if(Ee(a.filters.length>0&&l.filters.length>0),Bu(a)&&Bu(l))return oC(a,l.getFilters());const u=cv(a)?a:l,h=cv(a)?l:a,f=u.filters.map(p=>bE(p,h));return it.create(f,"or")}(n,e),mp(t)}function sA(n,e){if(Bu(e))return oC(e,n.getFilters());{const t=e.filters.map(r=>bE(n,r));return it.create(t,"or")}}function mp(n){if(Ee(n instanceof je||n instanceof it),n instanceof je)return n;const e=n.getFilters();if(e.length===1)return mp(e[0]);if(sC(n))return n;const t=e.map(a=>mp(a)),r=[];return t.forEach(a=>{a instanceof je?r.push(a):a instanceof it&&(a.op===n.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:it.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.Tn=new IE}addToCollectionParentIndex(e,t){return this.Tn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(sr.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(sr.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class IE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new st(qe.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new st(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="IndexedDbIndexManager",Cm=new Uint8Array(0);class aL{constructor(e,t){this.databaseId=t,this.In=new IE,this.En=new ps(r=>$o(r),(r,a)=>kd(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const l={collectionId:r,parent:Rn(a)};return oA(e).put(l)}return j.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[NR(t),""],!1,!0);return oA(e).G(a).next(l=>{for(const u of l){if(u.collectionId!==t)break;r.push(fi(u.parent))}return r})}addFieldIndex(e,t){const r=Ch(e),a=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])}}(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=au(e);return l.next(h=>{u.put(JI(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=Ch(e),a=au(e),l=su(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ch(e),r=su(e),a=au(e);return t.J().next(()=>r.J()).next(()=>a.J())}createTargetIndexes(e,t){return j.forEach(this.dn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const l=new iA(r).Pn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=su(e);let a=!0;const l=new Map;return j.forEach(this.dn(t),u=>this.An(e,u).next(h=>{a&&(a=!!h),l.set(u,h)})).next(()=>{if(a){let u=ke();const h=[];return j.forEach(l,(f,p)=>{ie(aA,`Using index ${function(K){return`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map(ue=>`${ue.fieldPath}:${ue.kind}`).join(",")}`}(f)} to execute ${$o(t)}`);const _=function(K,ue){const le=nv(ue);if(le===void 0)return null;for(const J of hp(K,le.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null}(p,f),v=function(K,ue){const le=new Map;for(const J of Ro(ue))for(const x of hp(K,J.fieldPath))switch(x.op){case"==":case"in":le.set(J.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return le.set(J.fieldPath.canonicalString(),x.value),Array.from(le.values())}return null}(p,f),w=function(K,ue){const le=[];let J=!0;for(const x of Ro(ue)){const S=x.kind===0?zI(K,x.fieldPath,K.startAt):FI(K,x.fieldPath,K.startAt);le.push(S.value),J&&(J=S.inclusive)}return new Na(le,J)}(p,f),R=function(K,ue){const le=[];let J=!0;for(const x of Ro(ue)){const S=x.kind===0?FI(K,x.fieldPath,K.endAt):zI(K,x.fieldPath,K.endAt);le.push(S.value),J&&(J=S.inclusive)}return new Na(le,J)}(p,f),C=this.Rn(f,p,w),N=this.Rn(f,p,R),V=this.Vn(f,p,v),z=this.mn(f.indexId,_,C,w.inclusive,N,R.inclusive,V);return j.forEach(z,Y=>r.H(Y,t.limit).next(K=>{K.forEach(ue=>{const le=he.fromSegments(ue.documentKey);u.has(le)||(u=u.add(le),h.push(le))})}))}).next(()=>h)}return j.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=iL(it.create(e.filters,"and")).map(r=>dv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,a,l,u,h){const f=(t!=null?t.length:1)*Math.max(r.length,l.length),p=f/(t!=null?t.length:1),_=[];for(let v=0;v<f;++v){const w=t?this.fn(t[v/p]):Cm,R=this.gn(e,w,r[v%p],a),C=this.pn(e,w,l[v%p],u),N=h.map(V=>this.gn(e,w,V,!0));_.push(...this.createRange(R,C,N))}return _}gn(e,t,r,a){const l=new No(e,he.empty(),t,r);return a?l:l.nn()}pn(e,t,r,a){const l=new No(e,he.empty(),t,r);return a?l.nn():l}An(e,t){const r=new iA(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let u=null;for(const h of l)r.un(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;const a=this.dn(t);return j.forEach(a,l=>this.An(e,l).next(u=>{u?r!==0&&u.fields.length<function(f){let p=new st(yt.comparator),_=!1;for(const v of f.filters)for(const w of v.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?_=!0:p=p.add(w.field));for(const v of f.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(_?1:0)}(l)&&(r=1):r=0})).next(()=>function(u){return u.limit!==null}(t)&&a.length>1&&r===2?1:r)}yn(e,t){const r=new Rh;for(const a of Ro(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.tn(a.kind);Oo.xt.At(l,u)}return r.Yt()}fn(e){const t=new Rh;return Oo.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new Rh;return Oo.xt.At(Qo(this.databaseId,t),r.tn(function(l){const u=Ro(l);return u.length===0?0:u[u.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let a=[];a.push(new Rh);let l=0;for(const u of Ro(e)){const h=r[l++];for(const f of a)if(this.Sn(t,u.fieldPath)&&hd(h))a=this.bn(a,u,h);else{const p=f.tn(u.kind);Oo.xt.At(h,p)}}return this.Dn(a)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const h of a){const f=new Rh;f.seed(h.Yt()),Oo.xt.At(u,f.tn(t.kind)),l.push(f)}return l}Sn(e,t){return!!e.filters.find(r=>r instanceof je&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Ch(e),a=au(e);return(t?r.G(iv,IDBKeyRange.bound(t,t)):r.G()).next(l=>{const u=[];return j.forEach(l,h=>a.get([h.indexId,this.uid]).next(f=>{u.push(function(_,v){const w=v?new id(v.sequenceNumber,new sr(Zo(v.readTime),new he(fi(v.documentKey)),v.largestBatchId)):id.empty(),R=_.fields.map(([C,N])=>new Um(yt.fromServerFormat(C),N));return new ip(_.indexId,_.collectionGroup,R,w)}(h,f))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:De(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Ch(e),l=au(e);return this.vn(e).next(u=>a.G(iv,IDBKeyRange.bound(t,t)).next(h=>j.forEach(h,f=>l.put(JI(f.indexId,this.uid,u,r)))))}updateIndexEntries(e,t){const r=new Map;return j.forEach(t,(a,l)=>{const u=r.get(a.collectionGroup);return(u?j.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next(h=>(r.set(a.collectionGroup,h),j.forEach(h,f=>this.Cn(e,a,f).next(p=>{const _=this.Fn(l,f);return p.isEqual(_)?j.resolve():this.Mn(e,l,f,p,_)}))))})}xn(e,t,r,a){return su(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,a){return su(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const a=su(e);let l=new st(ia);return a.Z({index:jR,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(u,h)=>{l=l.add(new No(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>l)}Fn(e,t){let r=new st(ia);const a=this.yn(t,e);if(a==null)return r;const l=nv(t);if(l!=null){const u=e.data.field(l.fieldPath);if(hd(u))for(const h of u.arrayValue.values||[])r=r.add(new No(t.indexId,e.key,this.fn(h),a))}else r=r.add(new No(t.indexId,e.key,Cm,a));return r}Mn(e,t,r,a,l){ie(aA,"Updating index entries for document '%s'",t.key);const u=[];return function(f,p,_,v,w){const R=f.getIterator(),C=p.getIterator();let N=ru(R),V=ru(C);for(;N||V;){let z=!1,Y=!1;if(N&&V){const K=_(N,V);K<0?Y=!0:K>0&&(z=!0)}else N!=null?Y=!0:z=!0;z?(v(V),V=ru(C)):Y?(w(N),N=ru(R)):(N=ru(R),V=ru(C))}}(a,l,ia,h=>{u.push(this.xn(e,t,r,h))},h=>{u.push(this.On(e,t,r,h))}),j.waitFor(u)}vn(e){let t=1;return au(e).Z({index:qR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>ia(u,h)).filter((u,h,f)=>!h||ia(u,f[h-1])!==0);const a=[];a.push(e);for(const u of r){const h=ia(u,e),f=ia(u,t);if(h===0)a[0]=e.nn();else if(h>0&&f<0)a.push(u),a.push(u.nn());else if(f>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Nn(a[u],a[u+1]))return[];const h=[a[u].indexId,this.uid,a[u].arrayValue,a[u].directionalValue,Cm,[]],f=[a[u+1].indexId,this.uid,a[u+1].arrayValue,a[u+1].directionalValue,Cm,[]];l.push(IDBKeyRange.bound(h,f))}return l}Nn(e,t){return ia(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lA)}getMinOffset(e,t){return j.mapArray(this.dn(t),r=>this.An(e,r).next(a=>a||ge())).next(lA)}}function oA(n){return Jt(n,ld)}function su(n){return Jt(n,up)}function Ch(n){return Jt(n,oE)}function au(n){return Jt(n,lp)}function lA(n){Ee(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;iE(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new sr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KC=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(n,e,t){const r=n.store(Mr),a=n.store(ku),l=[],u=IDBKeyRange.only(t.batchId);let h=0;const f=r.Z({range:u},(_,v,w)=>(h++,w.delete()));l.push(f.next(()=>{Ee(h===1)}));const p=[];for(const _ of t.mutations){const v=zR(e,_.key.path,t.batchId);l.push(a.delete(v)),p.push(_.key)}return j.waitFor(l).next(()=>p)}function pp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ge();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(KC,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);class qp{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Bn={}}static It(e,t,r,a){Ee(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new qp(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sa(e).Z({index:Vo,range:r},(a,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=mu(e),u=sa(e);return u.add({}).next(h=>{Ee(typeof h=="number");const f=new yE(h,t,r,a),p=function(R,C,N){const V=N.baseMutations.map(Y=>md(R.Tt,Y)),z=N.mutations.map(Y=>md(R.Tt,Y));return{userId:C,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:V,mutations:z}}(this.serializer,this.userId,f),_=[];let v=new st((w,R)=>De(w.canonicalString(),R.canonicalString()));for(const w of a){const R=zR(this.userId,w.key.path,h);v=v.add(w.key.path.popLast()),_.push(u.put(p)),_.push(l.put(R,F2))}return v.forEach(w=>{_.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Bn[h]=f.keys()}),j.waitFor(_).next(()=>f)})}lookupMutationBatch(e,t){return sa(e).get(t).next(r=>r?(Ee(r.userId===this.userId),Po(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?j.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Bn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return sa(e).Z({index:Vo,range:a},(u,h,f)=>{h.userId===this.userId&&(Ee(h.batchId>=r),l=Po(this.serializer,h)),f.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ta;return sa(e).Z({index:Vo,range:t,reverse:!0},(a,l,u)=>{r=l.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ta],[this.userId,Number.POSITIVE_INFINITY]);return sa(e).G(Vo,t).next(r=>r.map(a=>Po(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=zm(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return mu(e).Z({range:a},(u,h,f)=>{const[p,_,v]=u,w=fi(_);if(p===this.userId&&t.path.isEqual(w))return sa(e).get(v).next(R=>{if(!R)throw ge();Ee(R.userId===this.userId),l.push(Po(this.serializer,R))});f.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new st(De);const a=[];return t.forEach(l=>{const u=zm(this.userId,l.path),h=IDBKeyRange.lowerBound(u),f=mu(e).Z({range:h},(p,_,v)=>{const[w,R,C]=p,N=fi(R);w===this.userId&&l.path.isEqual(N)?r=r.add(C):v.done()});a.push(f)}),j.waitFor(a).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=zm(this.userId,r),u=IDBKeyRange.lowerBound(l);let h=new st(De);return mu(e).Z({range:u},(f,p,_)=>{const[v,w,R]=f,C=fi(w);v===this.userId&&r.isPrefixOf(C)?C.length===a&&(h=h.add(R)):_.done()}).next(()=>this.kn(e,h))}kn(e,t){const r=[],a=[];return t.forEach(l=>{a.push(sa(e).get(l).next(u=>{if(u===null)throw ge();Ee(u.userId===this.userId),r.push(Po(this.serializer,u))}))}),j.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return QC(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),j.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return j.resolve();const r=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),a=[];return mu(e).Z({range:r},(l,u,h)=>{if(l[0]===this.userId){const f=fi(l[1]);a.push(f)}else h.done()}).next(()=>{Ee(a.length===0)})})}containsKey(e,t){return $C(e,this.userId,t)}Qn(e){return WC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ta,lastStreamToken:""})}}function $C(n,e,t){const r=zm(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return mu(n).Z({range:l,Y:!0},(h,f,p)=>{const[_,v,w]=h;_===e&&v===a&&(u=!0),p.done()}).next(()=>u)}function sa(n){return Jt(n,Mr)}function mu(n){return Jt(n,ku)}function WC(n){return Jt(n,ad)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Jo(0)}static Kn(){return new Jo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Jo(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>be.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Gn(e,a)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ou(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(Ee(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return ou(e).Z((u,h)=>{const f=Fh(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(a++,l.push(this.removeTargetData(e,f)))}).next(()=>j.waitFor(l)).next(()=>a)}forEachTarget(e,t){return ou(e).Z((r,a)=>{const l=Fh(a);t(l)})}Wn(e){return cA(e).get(op).next(t=>(Ee(t!==null),t))}Gn(e,t){return cA(e).put(op,t)}zn(e,t){return ou(e).put(jC(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$o(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return ou(e).Z({range:a,index:BR},(u,h,f)=>{const p=Fh(h);kd(t,p.target)&&(l=p,f.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=ca(e);return t.forEach(u=>{const h=Rn(u.path);a.push(l.put({targetId:r,path:h})),a.push(this.referenceDelegate.addReference(e,r,u))}),j.waitFor(a)}removeMatchingKeys(e,t,r){const a=ca(e);return j.forEach(t,l=>{const u=Rn(l.path);return j.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=ca(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=ca(e);let l=ke();return a.Z({range:r,Y:!0},(u,h,f)=>{const p=fi(u[1]),_=new he(p);l=l.add(_)}).next(()=>l)}containsKey(e,t){const r=Rn(t.path),a=IDBKeyRange.bound([r],[NR(r)],!1,!0);let l=0;return ca(e).Z({index:aE,Y:!0,range:a},([u,h],f,p)=>{u!==0&&(l++,p.done())}).next(()=>l>0)}lt(e,t){return ou(e).get(t).next(r=>r?Fh(r):null)}}function ou(n){return Jt(n,Mu)}function cA(n){return Jt(n,Ho)}function ca(n){return Jt(n,Lu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="LruGarbageCollector",lL=1048576;function dA([n,e],[t,r]){const a=De(n,t);return a===0?De(e,r):a}class uL{constructor(e){this.Hn=e,this.buffer=new st(dA),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();dA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ie(hA,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){za(t)?ie(hA,"Ignoring IndexedDB error during garbage collection: ",t):await Ua(t)}await this.er(3e5)})}}class cL{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Kn.ae);const r=new uL(t);return this.tr.forEachTarget(e,a=>r.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>r.Zn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(uA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uA):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,a,l,u,h,f,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(r=v,h=Date.now(),this.removeTargets(e,r,t))).next(v=>(l=v,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),cu()<=Fe.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(f-h)+`ms
	Removed ${v} documents in `+(p-f)+`ms
Total Duration: ${p-_}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function XC(n,e){return new cL(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,t){this.db=e,this.garbageCollector=XC(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,a)=>t(a))}addReference(e,t,r){return Dm(e,r)}removeReference(e,t,r){return Dm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Dm(e,t)}ar(e,t){return function(a,l){let u=!1;return WC(a).X(h=>$C(a,h,l).next(f=>(f&&(u=!0),j.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this._r(e,(u,h)=>{if(h<=t){const f=this.ar(e,u).next(p=>{if(!p)return l++,r.getEntry(e,u).next(()=>(r.removeEntry(u,be.min()),ca(e).delete(function(v){return[0,Rn(v.path)]}(u))))});a.push(f)}}).next(()=>j.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Dm(e,t)}_r(e,t){const r=ca(e);let a,l=Kn.ae;return r.Z({index:aE},([u,h],{path:f,sequenceNumber:p})=>{u===0?(l!==Kn.ae&&t(new he(fi(a)),l),l=p,a=f):l=Kn.ae}).next(()=>{l!==Kn.ae&&t(new he(fi(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dm(n,e){return ca(n).put(function(r,a){return{targetId:0,path:Rn(r.path),sequenceNumber:a}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.changes=new ps(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ao(e).put(r)}removeEntry(e,t,r){return Ao(e).delete(function(l,u){const h=l.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],fp(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=mt.newInvalidDocument(t);return Ao(e).Z({index:Fm,range:IDBKeyRange.only(Dh(t))},(a,l)=>{r=this.cr(t,l)}).next(()=>r)}lr(e,t){let r={size:0,document:mt.newInvalidDocument(t)};return Ao(e).Z({index:Fm,range:IDBKeyRange.only(Dh(t))},(a,l)=>{r={document:this.cr(t,l),size:pp(l)}}).next(()=>r)}getEntries(e,t){let r=$n();return this.hr(e,t,(a,l)=>{const u=this.cr(a,l);r=r.insert(a,u)}).next(()=>r)}Pr(e,t){let r=$n(),a=new dt(he.comparator);return this.hr(e,t,(l,u)=>{const h=this.cr(l,u);r=r.insert(l,h),a=a.insert(l,pp(u))}).next(()=>({documents:r,Tr:a}))}hr(e,t,r){if(t.isEmpty())return j.resolve();let a=new st(pA);t.forEach(f=>a=a.add(f));const l=IDBKeyRange.bound(Dh(a.first()),Dh(a.last())),u=a.getIterator();let h=u.getNext();return Ao(e).Z({index:Fm,range:l},(f,p,_)=>{const v=he.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&pA(h,v)<0;)r(h,null),h=u.getNext();h&&h.isEqual(v)&&(r(h,p),h=u.hasNext()?u.getNext():null),h?_.W(Dh(h)):_.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),fp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ao(e).G(IDBKeyRange.bound(h,f,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let _=$n();for(const v of p){const w=this.cr(he.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);w.isFoundDocument()&&(Ld(t,w)||a.has(w.key))&&(_=_.insert(w.key,w))}return _})}getAllFromCollectionGroup(e,t,r,a){let l=$n();const u=mA(t,r),h=mA(t,sr.max());return Ao(e).Z({index:FR,range:IDBKeyRange.bound(u,h,!0)},(f,p,_)=>{const v=this.cr(he.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(v.key,v),l.size===a&&_.done()}).next(()=>l)}newChangeBuffer(e){return new fL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fA(e).get(rv).next(t=>(Ee(!!t),t))}ur(e,t){return fA(e).put(rv,t)}cr(e,t){if(t){const r=XM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(be.min())))return r}return mt.newInvalidDocument(e)}}function JC(n){return new dL(n)}class fL extends ZC{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new ps(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new st((l,u)=>De(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const h=this.Er.get(l);if(t.push(this.Ir.removeEntry(e,l,h.readTime)),u.isValidDocument()){const f=XI(this.Ir.serializer,u);a=a.add(l.path.popLast());const p=pp(f);r+=p-h.size,t.push(this.Ir.addEntry(e,l,f))}else if(r-=h.size,this.trackRemovals){const f=XI(this.Ir.serializer,u.convertToNoDocument(be.min()));t.push(this.Ir.addEntry(e,l,f))}}),a.forEach(l=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Ir.updateMetadata(e,r)),j.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:a})=>(a.forEach((l,u)=>{this.Er.set(l,{size:u,readTime:r.get(l).readTime})}),r))}}function fA(n){return Jt(n,od)}function Ao(n){return Jt(n,ap)}function Dh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mA(n,e){const t=e.documentKey.path.toArray();return[n,fp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pA(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=De(t[l],r[l]),a)return a;return a=De(t.length,r.length),a||(a=De(t[t.length-2],r[r.length-2]),a||De(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&Kh(r.mutation,a,Qn.empty(),vt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ke()){const a=mi();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let u=Uh();return l.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=mi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ke()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,a){let l=$n();const u=Gh(),h=function(){return Gh()}();return t.forEach((f,p)=>{const _=r.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof gs)?l=l.insert(p.key,p):_!==void 0?(u.set(p.key,_.mutation.getFieldMask()),Kh(_.mutation,p,_.mutation.getFieldMask(),vt.now())):u.set(p.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,l).next(f=>(f.forEach((p,_)=>u.set(p,_)),t.forEach((p,_)=>{var v;return h.set(p,new mL(_,(v=u.get(p))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Gh();let a=new dt((u,h)=>u-h),l=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(f=>{const p=t.get(f);if(p===null)return;let _=r.get(f)||Qn.empty();_=h.applyToLocalView(p,_),r.set(f,_);const v=(a.get(h.batchId)||ke()).add(f);a=a.insert(h.batchId,v)})}).next(()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,_=f.value,v=yC();_.forEach(w=>{if(!l.has(w)){const R=IC(t.get(w),r.get(w));R!==null&&v.set(w,R),l=l.add(w)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return j.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(u){return he.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):j.resolve(mi());let h=Vu,f=l;return u.next(p=>j.forEach(p,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),l.get(_)?j.resolve():this.remoteDocumentCache.getEntry(e,_).next(w=>{f=f.insert(_,w)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,f,p,ke())).next(_=>({batchId:h,changes:gC(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let a=Uh();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=Uh();return this.indexManager.getCollectionParents(e,l).next(h=>j.forEach(h,f=>{const p=function(v,w){return new ms(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next(_=>{_.forEach((v,w)=>{u=u.insert(v,w)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(u=>{l.forEach((f,p)=>{const _=p.getKey();u.get(_)===null&&(u=u.insert(_,mt.newInvalidDocument(_)))});let h=Uh();return u.forEach((f,p)=>{const _=l.get(f);_!==void 0&&Kh(_.mutation,p,Qn.empty(),vt.now()),Ld(t,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return j.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:zt(a.createTime)}}(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:wE(a.bundledQuery),readTime:zt(a.readTime)}}(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this.overlays=new dt(he.comparator),this.Rr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mi();return j.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.Et(e,t,l)}),j.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Rr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const a=mi(),l=t.length+1,u=new he(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&f.largestBatchId>r&&a.set(f.getKey(),f)}return j.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new dt((p,_)=>p-_);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=l.get(p.largestBatchId);_===null&&(_=mi(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=mi(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,_)=>h.set(p,_)),!(h.size()>=a)););return j.resolve(h)}Et(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Rr.get(a.largestBatchId).delete(r.key);this.Rr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new vE(t,r));let l=this.Rr.get(t);l===void 0&&(l=ke(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.Vr=new st(un.mr),this.gr=new st(un.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new un(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new un(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new he(new qe([])),r=new un(t,e),a=new un(t,e+1),l=[];return this.gr.forEachInRange([r,a],u=>{this.wr(u),l.push(u.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new he(new qe([])),r=new un(t,e),a=new un(t,e+1);let l=ke();return this.gr.forEachInRange([r,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new un(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class un{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return he.comparator(e.key,t.key)||De(e.Cr,t.Cr)}static pr(e,t){return De(e.Cr,t.Cr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new st(un.mr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new yE(l,t,r,a);this.mutationQueue.push(u);for(const h of a)this.Mr=this.Mr.add(new un(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return j.resolve(u)}lookupMutationBatch(e,t){return j.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Nr(r),l=a<0?0:a;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Ta:this.Fr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new un(t,0),a=new un(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,a],u=>{const h=this.Or(u.Cr);l.push(h)}),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new st(De);return t.forEach(a=>{const l=new un(a,0),u=new un(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,u],h=>{r=r.add(h.Cr)})}),j.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;he.isDocumentKey(l)||(l=l.child(""));const u=new un(new he(l),0);let h=new st(De);return this.Mr.forEachWhile(f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(h=h.add(f.Cr)),!0)},u),j.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(r=>{const a=this.Or(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Ee(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return j.forEach(t.mutations,a=>{const l=new un(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new un(t,0),a=this.Mr.firstAfterOrEqual(r);return j.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.kr=e,this.docs=function(){return new dt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let r=$n();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():mt.newInvalidDocument(a))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=$n();const u=t.path,h=new he(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:_}}=f.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||iE(VR(_),r)<=0||(a.has(_.key)||Ld(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ge()}qr(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new EL(this)}getSize(e){return j.resolve(this.size)}}class EL extends ZC{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.persistence=e,this.Qr=new ps(t=>$o(t),kd),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.$r=0,this.Ur=new AE,this.targetCount=0,this.Kr=Jo.Un()}forEachTarget(e,t){return this.Qr.forEach((r,a)=>t(a)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),j.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Jo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.zn(t),j.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Qr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),j.waitFor(l).next(()=>a)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Kn(0),this.zr=!1,this.zr=!0,this.jr=new yL,this.referenceDelegate=e(this),this.Hr=new TL(this),this.indexManager=new sL,this.remoteDocumentCache=function(a){return new vL(a)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new qC(t),this.Yr=new pL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new _L(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);const a=new wL(this.Gr.next());return this.referenceDelegate.Zr(),r(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return j.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class wL extends MR{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.ti=new AE,this.ni=null}static ri(e){return new jp(e)}get ii(){if(this.ni)return this.ni;throw ge()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),j.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ii,r=>{const a=he.fromPath(r);return this.si(e,a).next(l=>{l||t.removeEntry(a,be.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return j.or([()=>j.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class gp{constructor(e,t){this.persistence=e,this.oi=new ps(r=>Rn(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=XC(this,t)}static ri(e,t){return new gp(e,t)}Zr(){}Xr(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return j.forEach(this.oi,(r,a)=>this.ar(e,r,a).next(l=>l?j.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,u=>this.ar(e,u,t).next(h=>{h||(r++,l.removeEntry(u,be.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),j.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qm(e.data.value)),t}ar(e,t,r){return j.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return j.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e){this.serializer=e}B(e,t,r,a){const l=new Np("createOrUpgrade",t);r<1&&a>=1&&(function(f){f.createObjectStore(Vd)}(e),function(f){f.createObjectStore(ad,{keyPath:z2}),f.createObjectStore(Mr,{keyPath:RI,autoIncrement:!0}).createIndex(Vo,CI,{unique:!0}),f.createObjectStore(ku)}(e),gA(e),function(f){f.createObjectStore(Co)}(e));let u=j.resolve();return r<3&&a>=3&&(r!==0&&(function(f){f.deleteObjectStore(Lu),f.deleteObjectStore(Mu),f.deleteObjectStore(Ho)}(e),gA(e)),u=u.next(()=>function(f){const p=f.store(Ho),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return p.put(op,_)}(l))),r<4&&a>=4&&(r!==0&&(u=u.next(()=>function(f,p){return p.store(Mr).G().next(v=>{f.deleteObjectStore(Mr),f.createObjectStore(Mr,{keyPath:RI,autoIncrement:!0}).createIndex(Vo,CI,{unique:!0});const w=p.store(Mr),R=v.map(C=>w.put(C));return j.waitFor(R)})}(e,l))),u=u.next(()=>{(function(f){f.createObjectStore(Uu,{keyPath:$2})})(e)})),r<5&&a>=5&&(u=u.next(()=>this._i(l))),r<6&&a>=6&&(u=u.next(()=>(function(f){f.createObjectStore(od)}(e),this.ai(l)))),r<7&&a>=7&&(u=u.next(()=>this.ui(l))),r<8&&a>=8&&(u=u.next(()=>this.ci(e,l))),r<9&&a>=9&&(u=u.next(()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(u=u.next(()=>this.li(l))),r<11&&a>=11&&(u=u.next(()=>{(function(f){f.createObjectStore(xp,{keyPath:W2})})(e),function(f){f.createObjectStore(Vp,{keyPath:Y2})}(e)})),r<12&&a>=12&&(u=u.next(()=>{(function(f){const p=f.createObjectStore(kp,{keyPath:rM});p.createIndex(sv,iM,{unique:!1}),p.createIndex(HR,sM,{unique:!1})})(e)})),r<13&&a>=13&&(u=u.next(()=>function(f){const p=f.createObjectStore(ap,{keyPath:B2});p.createIndex(Fm,q2),p.createIndex(FR,j2)}(e)).next(()=>this.hi(e,l)).next(()=>e.deleteObjectStore(Co))),r<14&&a>=14&&(u=u.next(()=>this.Pi(e,l))),r<15&&a>=15&&(u=u.next(()=>function(f){f.createObjectStore(oE,{keyPath:X2,autoIncrement:!0}).createIndex(iv,Z2,{unique:!1}),f.createObjectStore(lp,{keyPath:J2}).createIndex(qR,eM,{unique:!1}),f.createObjectStore(up,{keyPath:tM}).createIndex(jR,nM,{unique:!1})}(e))),r<16&&a>=16&&(u=u.next(()=>{t.objectStore(lp).clear()}).next(()=>{t.objectStore(up).clear()})),r<17&&a>=17&&(u=u.next(()=>{(function(f){f.createObjectStore(lE,{keyPath:aM})})(e)})),u}ai(e){let t=0;return e.store(Co).Z((r,a)=>{t+=pp(a)}).next(()=>{const r={byteSize:t};return e.store(od).put(rv,r)})}_i(e){const t=e.store(ad),r=e.store(Mr);return t.G().next(a=>j.forEach(a,l=>{const u=IDBKeyRange.bound([l.userId,Ta],[l.userId,l.lastAcknowledgedBatchId]);return r.G(Vo,u).next(h=>j.forEach(h,f=>{Ee(f.userId===l.userId);const p=Po(this.serializer,f);return QC(e,l.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(Lu),r=e.store(Co);return e.store(Ho).get(op).next(a=>{const l=[];return r.Z((u,h)=>{const f=new qe(u),p=function(v){return[0,Rn(v)]}(f);l.push(t.get(p).next(_=>_?j.resolve():(v=>t.put({targetId:0,path:Rn(v),sequenceNumber:a.highestListenSequenceNumber}))(f)))}).next(()=>j.waitFor(l))})}ci(e,t){e.createObjectStore(ld,{keyPath:Q2});const r=t.store(ld),a=new IE,l=u=>{if(a.add(u)){const h=u.lastSegment(),f=u.popLast();return r.put({collectionId:h,parent:Rn(f)})}};return t.store(Co).Z({Y:!0},(u,h)=>{const f=new qe(u);return l(f.popLast())}).next(()=>t.store(ku).Z({Y:!0},([u,h,f],p)=>{const _=fi(h);return l(_.popLast())}))}li(e){const t=e.store(Mu);return t.Z((r,a)=>{const l=Fh(a),u=jC(this.serializer,l);return t.put(u)})}hi(e,t){const r=t.store(Co),a=[];return r.Z((l,u)=>{const h=t.store(ap),f=function(v){return v.document?new he(qe.fromString(v.document.name).popFirst(5)):v.noDocument?he.fromSegments(v.noDocument.path):v.unknownDocument?he.fromSegments(v.unknownDocument.path):ge()}(u).path.toArray(),p={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(h.put(p))}).next(()=>j.waitFor(a))}Pi(e,t){const r=t.store(Mr),a=JC(this.serializer),l=new SE(jp.ri,this.serializer.Tt);return r.G().next(u=>{const h=new Map;return u.forEach(f=>{var p;let _=(p=h.get(f.userId))!==null&&p!==void 0?p:ke();Po(this.serializer,f).keys().forEach(v=>_=_.add(v)),h.set(f.userId,_)}),j.forEach(h,(f,p)=>{const _=new cn(p),v=Bp.It(this.serializer,_),w=l.getIndexManager(_),R=qp.It(_,this.serializer,w,l.referenceDelegate);return new e1(a,R,v,w).recalculateAndSaveOverlaysForDocumentKeys(new av(t,Kn.ae),f).next()})})}}function gA(n){n.createObjectStore(Lu,{keyPath:G2}).createIndex(aE,K2,{unique:!0}),n.createObjectStore(Mu,{keyPath:"targetId"}).createIndex(BR,H2,{unique:!0}),n.createObjectStore(Ho)}const aa="IndexedDbPersistence",O_=18e5,N_=5e3,x_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",t1="main";class RE{constructor(e,t,r,a,l,u,h,f,p,_,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=l,this.window=u,this.document=h,this.Ii=p,this.Ei=_,this.di=v,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=w=>Promise.resolve(),!RE.D())throw new ne($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hL(this,a),this.gi=t+t1,this.serializer=new qC(f),this.pi=new gi(this.gi,this.di,new bL(this.serializer)),this.jr=new JM,this.Hr=new oL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=JC(this.serializer),this.Yr=new ZM,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,_===!1&&Ut(aa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne($.FAILED_PRECONDITION,x_);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Kn(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(za(e))return ie(aa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie(aa,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Ph(e).get(nu).next(t=>j.resolve(this.Ni(t)))}Bi(e){return Pm(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,O_)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Jt(t,Uu);return r.G().next(a=>{const l=this.qi(a,O_),u=a.filter(h=>l.indexOf(h)===-1);return j.forEach(u,h=>r.delete(h.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?j.resolve(!0):Ph(e).get(nu).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,N_)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new ne($.FAILED_PRECONDITION,x_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pm(e).G().next(r=>this.qi(r,N_).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,h=this.networkEnabled===a.networkEnabled;if(l||u&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ie(aa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Vd,Uu],e=>{const t=new av(e,Kn.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>Pm(e).G().next(t=>this.qi(t,O_).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return qp.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aL(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Bp.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){ie(aa,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(f){return f===17?uM:f===16?lM:f===15?uE:f===14?QR:f===13?KR:f===12?oM:f===11?GR:void ge()}(this.di);let u;return this.pi.runTransaction(e,a,l,h=>(u=new av(h,this.Gr?this.Gr.next():Kn.ae),t==="readwrite-primary"?this.Fi(u).next(f=>!!f||this.Mi(u)).next(f=>{if(!f)throw Ut(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new ne($.FAILED_PRECONDITION,kR);return r(u)}).next(f=>this.Oi(u).next(()=>f)):this.ji(u).next(()=>r(u)))).then(h=>(u.raiseOnCommittedEvent(),h))}ji(e){return Ph(e).get(nu).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,N_)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ne($.FAILED_PRECONDITION,x_)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ph(e).put(nu,t)}static D(){return gi.D()}xi(e){const t=Ph(e);return t.get(nu).next(r=>this.Ni(r)?(ie(aa,"Releasing primary lease."),t.delete(nu)):j.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ut(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;uR()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return ie(aa,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ut(aa,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Ut("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ph(n){return Jt(n,Vd)}function Pm(n){return Jt(n,Uu)}function CE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=a}static Yi(e,t){let r=ke(),a=ke();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new DE(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return uR()?8:LR(At())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ss(e,t,a,r).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new IL;return this._s(e,t,u).next(h=>{if(l.result=h,this.Xi)return this.us(e,t,u,h.size)})}).next(()=>l.result)}us(e,t,r,a){return r.documentReadCount<this.es?(cu()<=Fe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",hu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),j.resolve()):(cu()<=Fe.DEBUG&&ie("QueryEngine","Query:",hu(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ts*a?(cu()<=Fe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",hu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(t))):j.resolve())}rs(e,t){if(BI(t))return j.resolve(null);let r=zn(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=dp(t,null,"F"),r=zn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const u=ke(...l);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const p=this.cs(t,h);return this.ls(t,p,u,f.readTime)?this.rs(e,dp(t,null,"F")):this.hs(e,p,t,f)}))})))}ss(e,t,r,a){return BI(t)||a.isEqual(be.min())?j.resolve(null):this.ns.getDocuments(e,r).next(l=>{const u=this.cs(t,l);return this.ls(t,u,r,a)?j.resolve(null):(cu()<=Fe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),hu(t)),this.hs(e,u,t,xR(a,Vu)).next(h=>h))})}cs(e,t){let r=new st(mC(e));return t.forEach((a,l)=>{Ld(e,l)&&(r=r.add(l))}),r}ls(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,r){return cu()<=Fe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",hu(t)),this.ns.getDocumentsMatchingQuery(e,t,sr.min(),r)}hs(e,t,r,a){return this.ns.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="LocalStore",AL=3e8;class SL{constructor(e,t,r,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new dt(De),this.Is=new ps(l=>$o(l),kd),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function r1(n,e,t,r){return new SL(n,e,t,r)}async function i1(n,e){const t=de(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const u=[],h=[];let f=ke();for(const p of a){u.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}for(const p of l){h.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:h}))})})}function RL(n,e){const t=de(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,f,p,_){const v=p.batch,w=v.keys();let R=j.resolve();return w.forEach(C=>{R=R.next(()=>_.getEntry(f,C)).next(N=>{const V=p.docVersions.get(C);Ee(V!==null),N.version.compareTo(V)<0&&(v.applyToRemoteDocument(N,p),N.isValidDocument()&&(N.setReadTime(p.commitVersion),_.addEntry(N)))})}),R.next(()=>h.mutationQueue.removeMutationBatch(f,v))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=ke();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function s1(n){const e=de(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function CL(n,e){const t=de(n),r=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const h=[];e.targetChanges.forEach((_,v)=>{const w=a.get(v);if(!w)return;h.push(t.Hr.removeMatchingKeys(l,_.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(l,_.addedDocuments,v)));let R=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(xt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),a=a.insert(v,R),function(N,V,z){return N.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=AL?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(w,R,_)&&h.push(t.Hr.updateTargetData(l,R))});let f=$n(),p=ke();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),h.push(a1(l,u,e.documentUpdates).next(_=>{f=_.Vs,p=_.fs})),!r.isEqual(be.min())){const _=t.Hr.getLastRemoteSnapshotVersion(l).next(v=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));h.push(_)}return j.waitFor(h).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,f,p)).next(()=>f)}).then(l=>(t.Ts=a,l))}function a1(n,e,t){let r=ke(),a=ke();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let u=$n();return t.forEach((h,f)=>{const p=l.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),f.isNoDocument()&&f.version.isEqual(be.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):ie(PE,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{Vs:u,fs:a}})}function DL(n,e){const t=de(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ta),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gu(n,e){const t=de(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Hr.getTargetData(r,e).next(l=>l?(a=l,j.resolve(a)):t.Hr.allocateTargetId(r).next(u=>(a=new Ji(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ts.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Ku(n,e,t){const r=de(n),a=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!za(u))throw u;ie(PE,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ts=r.Ts.remove(e),r.Is.delete(a.target)}function yp(n,e,t){const r=de(n);let a=be.min(),l=ke();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,p,_){const v=de(f),w=v.Is.get(_);return w!==void 0?j.resolve(v.Ts.get(w)):v.Hr.getTargetData(p,_)}(r,u,zn(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(u,h.targetId).next(f=>{l=f})}).next(()=>r.Ps.getDocumentsMatchingQuery(u,e,t?a:be.min(),t?l:ke())).next(h=>(u1(r,fC(e),h),{documents:h,gs:l})))}function o1(n,e){const t=de(n),r=de(t.Hr),a=t.Ts.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.lt(l,e).next(u=>u?u.target:null))}function l1(n,e){const t=de(n),r=t.Es.get(e)||be.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ds.getAllFromCollectionGroup(a,e,xR(r,Vu),Number.MAX_SAFE_INTEGER)).then(a=>(u1(t,e,a),a))}function u1(n,e,t){let r=n.Es.get(e)||be.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Es.set(e,r)}async function PL(n,e,t,r){const a=de(n);let l=ke(),u=$n();for(const p of t){const _=e.ps(p.metadata.name);p.document&&(l=l.add(_));const v=e.ys(p);v.setReadTime(e.ws(p.metadata.readTime)),u=u.insert(_,v)}const h=a.ds.newChangeBuffer({trackRemovals:!0}),f=await Gu(a,function(_){return zn(oc(qe.fromString(`__bundle__/docs/${_}`)))}(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",p=>a1(p,h,u).next(_=>(h.apply(p),_)).next(_=>a.Hr.removeMatchingKeysForTargetId(p,f.targetId).next(()=>a.Hr.addMatchingKeys(p,l,f.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(p,_.Vs,_.fs)).next(()=>_.Vs)))}async function OL(n,e,t=ke()){const r=await Gu(n,zn(wE(e.bundledQuery))),a=de(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const u=zt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Yr.saveNamedQuery(l,e);const h=r.withResumeToken(xt.EMPTY_BYTE_STRING,u);return a.Ts=a.Ts.insert(h.targetId,h),a.Hr.updateTargetData(l,h).next(()=>a.Hr.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Hr.addMatchingKeys(l,t,r.targetId)).next(()=>a.Yr.saveNamedQuery(l,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="firestore_clients";function yA(n,e){return`${c1}_${n}_${e}`}const h1="firestore_mutations";function _A(n,e,t){let r=`${h1}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const d1="firestore_targets";function V_(n,e){return`${d1}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="SharedClientState";class _p{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ss(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new ne(a.error.code,a.error.message))),u?new _p(e,t,a.state,l):(Ut(li,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ne(r.error.code,r.error.message))),l?new Qh(e,r.state,a):(Ut(li,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=mE();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=UR(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new vp(e,l):(Ut(li,`Failed to parse client data for instance '${e}': ${t}`),null)}}class OE{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new OE(t.clientId,t.onlineState):(Ut(li,`Failed to parse online state: ${e}`),null)}}class Tv{constructor(){this.activeTargetIds=mE()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k_{constructor(e,t,r,a,l){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new dt(De),this.started=!1,this.Os=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ns=yA(this.persistenceKey,this.Cs),this.Bs=function(f){return`firestore_sequence_number_${f}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Tv),this.Ls=new RegExp(`^${c1}_${u}_([^_]*)$`),this.ks=new RegExp(`^${h1}_${u}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${d1}_${u}_(\\d+)$`),this.Qs=function(f){return`firestore_online_state_${f}`}(this.persistenceKey),this.$s=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const a=this.getItem(yA(this.persistenceKey,r));if(a){const l=vp.Ss(r,a);l&&(this.xs=this.xs.insert(l.clientId,l))}}this.Us();const t=this.storage.getItem(this.Qs);if(t){const r=this.Ks(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(V_(this.persistenceKey,e));if(a){const l=Qh.Ss(e,a);l&&(r=l.state)}}return t&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(V_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.js(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ie(li,"READ",e,t),t}setItem(e,t){ie(li,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ie(li,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(ie(li,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Ut("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Ks(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(l){let u=Kn.ae;if(l!=null)try{const h=JSON.parse(l);Ee(typeof h=="number"),u=h}catch(h){Ut(li,"Failed to read sequence number from WebStorage",h)}return u}(t.newValue);r!==Kn.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(a=>this.syncEngine.ao(a)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){const a=new _p(this.currentUser,e,t,r),l=_A(this.persistenceKey,this.currentUser,e);this.setItem(l,a.bs())}js(e){const t=_A(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const a=V_(this.persistenceKey,e),l=new Qh(e,t,r);this.setItem(a,l.bs())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return vp.Ss(r,t)}ro(e,t){const r=this.ks.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return _p.Ss(new cn(l),a,t)}so(e,t){const r=this.qs.exec(e),a=Number(r[1]);return Qh.Ss(a,t)}Ks(e){return OE.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);ie(li,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),a=this.Gs(this.xs),l=this.Gs(r),u=[],h=[];return l.forEach(f=>{a.has(f)||u.push(f)}),a.forEach(f=>{l.has(f)||h.push(f)}),this.syncEngine.lo(u,h).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=mE();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class f1{constructor(){this.ho=new Tv,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Tv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="ConnectivityMonitor";class EA{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ie(vA,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ie(vA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Om=null;function wv(){return Om===null?Om=function(){return 268435456+Math.round(2147483648*Math.random())}():Om++,"0x"+Om.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="RestConnection",xL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VL{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${a}`,this.wo=this.databaseId.database===ov?`project_id=${r}`:`project_id=${r}&database_id=${a}`}So(e,t,r,a,l){const u=wv(),h=this.bo(e,t.toUriEncodedString());ie(M_,`Sending RPC '${e}' ${u}:`,h,r);const f={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(f,a,l),this.vo(e,h,f,r).then(p=>(ie(M_,`Received RPC '${e}' ${u}: `,p),p),p=>{throw vi(M_,`RPC '${e}' ${u} failed with error: `,p,"url: ",h,"request:",r),p})}Co(e,t,r,a,l,u){return this.So(e,t,r,a,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ac}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}bo(e,t){const r=xL[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class ML extends VL{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,a){const l=wv();return new Promise((u,h)=>{const f=new AR;f.setWithCredentials(!0),f.listenOnce(SR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Lm.NO_ERROR:const _=f.getResponseJson();ie(In,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),u(_);break;case Lm.TIMEOUT:ie(In,`RPC '${e}' ${l} timed out`),h(new ne($.DEADLINE_EXCEEDED,"Request time out"));break;case Lm.HTTP_ERROR:const v=f.getStatus();if(ie(In,`RPC '${e}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const R=w==null?void 0:w.error;if(R&&R.status&&R.message){const C=function(V){const z=V.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(z)>=0?z:$.UNKNOWN}(R.status);h(new ne(C,R.message))}else h(new ne($.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ne($.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{ie(In,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(a);ie(In,`RPC '${e}' ${l} sending request:`,a),f.send(t,"POST",p,r,15)})}Wo(e,t,r){const a=wv(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=DR(),h=CR(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Do(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=l.join("");ie(In,`Creating RPC '${e}' stream ${a}: ${_}`,f);const v=u.createWebChannel(_,f);let w=!1,R=!1;const C=new kL({Fo:V=>{R?ie(In,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(w||(ie(In,`Opening RPC '${e}' stream ${a} transport.`),v.open(),w=!0),ie(In,`RPC '${e}' stream ${a} sending:`,V),v.send(V))},Mo:()=>v.close()}),N=(V,z,Y)=>{V.listen(z,K=>{try{Y(K)}catch(ue){setTimeout(()=>{throw ue},0)}})};return N(v,Lh.EventType.OPEN,()=>{R||(ie(In,`RPC '${e}' stream ${a} transport opened.`),C.Qo())}),N(v,Lh.EventType.CLOSE,()=>{R||(R=!0,ie(In,`RPC '${e}' stream ${a} transport closed`),C.Uo())}),N(v,Lh.EventType.ERROR,V=>{R||(R=!0,vi(In,`RPC '${e}' stream ${a} transport errored:`,V),C.Uo(new ne($.UNAVAILABLE,"The operation could not be completed")))}),N(v,Lh.EventType.MESSAGE,V=>{var z;if(!R){const Y=V.data[0];Ee(!!Y);const K=Y,ue=(K==null?void 0:K.error)||((z=K[0])===null||z===void 0?void 0:z.error);if(ue){ie(In,`RPC '${e}' stream ${a} received error:`,ue);const le=ue.status;let J=function(A){const O=Ht[A];if(O!==void 0)return RC(O)}(le),x=ue.message;J===void 0&&(J=$.INTERNAL,x="Unknown error status: "+le+" with message "+ue.message),R=!0,C.Uo(new ne(J,x)),v.close()}else ie(In,`RPC '${e}' stream ${a} received:`,Y),C.Ko(Y)}}),N(h,RR.STAT_EVENT,V=>{V.stat===ev.PROXY?ie(In,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===ev.NOPROXY&&ie(In,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return typeof window<"u"?window:null}function Km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(n){return new BM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-r);a>0&&ie("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="PersistentStream";class p1{constructor(e,t,r,a,l,u,h,f){this.Ti=e,this.n_=r,this.r_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new NE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Ut(t.toString()),Ut("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.i_===t&&this.V_(r,a)},r=>{e(()=>{const a=new ne($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(a)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{r(()=>this.m_(a))}),this.stream.onMessage(a=>{r(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ie(TA,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ie(TA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LL extends p1{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=HM(this.serializer,e),r=function(l){if(!("targetChange"in l))return be.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?zt(u.readTime):be.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=gv(this.serializer),t.addTarget=function(l,u){let h;const f=u.target;if(h=cp(f)?{documents:MC(l,f)}:{query:LC(l,f).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=PC(l,u.resumeToken);const p=mv(l,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(be.min())>0){h.readTime=Hu(l,u.snapshotVersion.toTimestamp());const p=mv(l,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=KM(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=gv(this.serializer),t.removeTarget=e,this.I_(t)}}class UL extends p1{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=GM(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=gv(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>md(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{}class FL extends zL{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new ne($.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.So(e,pv(t,r),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne($.UNKNOWN,l.toString())})}Co(e,t,r,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,pv(t,r),a,u,h,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ne($.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class BL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ut(t),this.N_=!1):ie("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="RemoteStore";class qL{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(u=>{r.enqueueAndForget(async()=>{Ba(this)&&(ie(el,"Restarting streams for network reachability change."),await async function(f){const p=de(f);p.W_.add(4),await cc(p),p.j_.set("Unknown"),p.W_.delete(4),await qd(p)}(this))})}),this.j_=new BL(r,a)}}async function qd(n){if(Ba(n))for(const e of n.G_)await e(!0)}async function cc(n){for(const e of n.G_)await e(!1)}function Hp(n,e){const t=de(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),kE(t)?VE(t):dc(t).c_()&&xE(t,e))}function Qu(n,e){const t=de(n),r=dc(t);t.K_.delete(e),r.c_()&&g1(t,e),t.K_.size===0&&(r.c_()?r.P_():Ba(t)&&t.j_.set("Unknown"))}function xE(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dc(n).y_(e)}function g1(n,e){n.H_.Ne(e),dc(n).w_(e)}function VE(n){n.H_=new LM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),dc(n).start(),n.j_.B_()}function kE(n){return Ba(n)&&!dc(n).u_()&&n.K_.size>0}function Ba(n){return de(n).W_.size===0}function y1(n){n.H_=void 0}async function jL(n){n.j_.set("Online")}async function HL(n){n.K_.forEach((e,t)=>{xE(n,e)})}async function GL(n,e){y1(n),kE(n)?(n.j_.q_(e),VE(n)):n.j_.set("Unknown")}async function KL(n,e,t){if(n.j_.set("Online"),e instanceof DC&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const h of l.targetIds)a.K_.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.K_.delete(h),a.H_.removeTarget(h))}(n,e)}catch(r){ie(el,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ep(n,r)}else if(e instanceof Gm?n.H_.We(e):e instanceof CC?n.H_.Ze(e):n.H_.je(e),!t.isEqual(be.min()))try{const r=await s1(n.localStore);t.compareTo(r)>=0&&await function(l,u){const h=l.H_.ot(u);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const _=l.K_.get(p);_&&l.K_.set(p,_.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,p)=>{const _=l.K_.get(f);if(!_)return;l.K_.set(f,_.withResumeToken(xt.EMPTY_BYTE_STRING,_.snapshotVersion)),g1(l,f);const v=new Ji(_.target,f,p,_.sequenceNumber);xE(l,v)}),l.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){ie(el,"Failed to raise snapshot:",r),await Ep(n,r)}}async function Ep(n,e,t){if(!za(e))throw e;n.W_.add(1),await cc(n),n.j_.set("Offline"),t||(t=()=>s1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ie(el,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await qd(n)})}function _1(n,e){return e().catch(t=>Ep(n,t,e))}async function hc(n){const e=de(n),t=xa(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Ta;for(;QL(e);)try{const a=await DL(e.localStore,r);if(a===null){e.U_.length===0&&t.P_();break}r=a.batchId,$L(e,a)}catch(a){await Ep(e,a)}v1(e)&&E1(e)}function QL(n){return Ba(n)&&n.U_.length<10}function $L(n,e){n.U_.push(e);const t=xa(n);t.c_()&&t.S_&&t.b_(e.mutations)}function v1(n){return Ba(n)&&!xa(n).u_()&&n.U_.length>0}function E1(n){xa(n).start()}async function WL(n){xa(n).C_()}async function YL(n){const e=xa(n);for(const t of n.U_)e.b_(t.mutations)}async function XL(n,e,t){const r=n.U_.shift(),a=_E.from(r,e,t);await _1(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await hc(n)}async function ZL(n,e){e&&xa(n).S_&&await async function(r,a){if(function(u){return SC(u)&&u!==$.ABORTED}(a.code)){const l=r.U_.shift();xa(r).h_(),await _1(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await hc(r)}}(n,e),v1(n)&&E1(n)}async function wA(n,e){const t=de(n);t.asyncQueue.verifyOperationInProgress(),ie(el,"RemoteStore received new credentials");const r=Ba(t);t.W_.add(3),await cc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await qd(t)}async function bv(n,e){const t=de(n);e?(t.W_.delete(2),await qd(t)):e||(t.W_.add(2),await cc(t),t.j_.set("Unknown"))}function dc(n){return n.J_||(n.J_=function(t,r,a){const l=de(t);return l.M_(),new LL(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{xo:jL.bind(null,n),No:HL.bind(null,n),Lo:GL.bind(null,n),p_:KL.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),kE(n)?VE(n):n.j_.set("Unknown")):(await n.J_.stop(),y1(n))})),n.J_}function xa(n){return n.Y_||(n.Y_=function(t,r,a){const l=de(t);return l.M_(),new UL(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:WL.bind(null,n),Lo:ZL.bind(null,n),D_:YL.bind(null,n),v_:XL.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await hc(n)):(await n.Y_.stop(),n.U_.length>0&&(ie(el,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,h=new ME(e,t,u,a,l);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fc(n,e){if(Ut("AsyncQueue",`${e}: ${n}`),za(n))return new ne($.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{static emptySet(e){return new yu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=Uh(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new yu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.Z_=new dt(he.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ge():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class $u{constructor(e,t,r,a,l,u,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new $u(e,t,yu.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class eU{constructor(){this.queries=IA(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const a=de(t),l=a.queries;a.queries=IA(),l.forEach((u,h)=>{for(const f of h.ta)f.onError(r)})})(this,new ne($.ABORTED,"Firestore shutting down"))}}function IA(){return new ps(n=>dC(n),Md)}async function LE(n,e){const t=de(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(r=2):(l=new JL,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=fc(u,`Initialization of query '${hu(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&zE(t)}async function UE(n,e){const t=de(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.ta.indexOf(e);u>=0&&(l.ta.splice(u,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function tU(n,e){const t=de(n);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.ta)h.oa(a)&&(r=!0);u.ea=a}}r&&zE(t)}function nU(n,e,t){const r=de(n),a=r.queries.get(e);if(a)for(const l of a.ta)l.onError(t);r.queries.delete(e)}function zE(n){n.ia.forEach(e=>{e.next()})}var Iv,AA;(AA=Iv||(Iv={}))._a="default",AA.Cache="cache";class FE{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new $u(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=$u.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Iv.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.serializer=e}ps(e){return yi(this.serializer,e)}ys(e){return e.metadata.exists?kC(this.serializer,e.document,!1):mt.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return zt(e)}}class iU{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=T1(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=qe.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new SA(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.ps(a.metadata.name);for(const u of a.metadata.queries){const h=(t.get(u)||ke()).add(l);t.set(u,h)}}return t}async complete(){const e=await PL(this.localStore,new SA(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await OL(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function T1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.key=e}}class b1{constructor(e){this.key=e}}class I1{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ke(),this.mutatedKeys=ke(),this.ya=mC(e),this.wa=new yu(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new bA,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,v)=>{const w=a.get(_),R=Ld(this.query,v)?v:null,C=!!w&&this.mutatedKeys.has(w.key),N=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let V=!1;w&&R?w.data.isEqual(R.data)?C!==N&&(r.track({type:3,doc:R}),V=!0):this.va(w,R)||(r.track({type:2,doc:R}),V=!0,(f&&this.ya(R,f)>0||p&&this.ya(R,p)<0)&&(h=!0)):!w&&R?(r.track({type:0,doc:R}),V=!0):w&&!R&&(r.track({type:1,doc:w}),V=!0,(f||p)&&(h=!0)),V&&(R?(u=u.add(R),l=N?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{wa:u,Da:r,ls:h,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((_,v)=>function(R,C){const N=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return N(R)-N(C)}(_.type,v.type)||this.ya(_.doc,v.doc)),this.Ca(r),a=a!=null&&a;const h=t&&!a?this.Fa():[],f=this.pa.size===0&&this.current&&!a?1:0,p=f!==this.ga;return this.ga=f,u.length!==0||p?{snapshot:new $u(this.query,e.wa,l,u,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new bA,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ke(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new b1(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new w1(r))}),t}Oa(e){this.fa=e.gs,this.pa=ke();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return $u.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const qa="SyncEngine";class sU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class aU{constructor(e){this.key=e,this.Ba=!1}}class oU{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new ps(h=>dC(h),Md),this.qa=new Map,this.Qa=new Set,this.$a=new dt(he.comparator),this.Ua=new Map,this.Ka=new AE,this.Wa={},this.Ga=new Map,this.za=Jo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function lU(n,e,t=!0){const r=Gp(n);let a;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await A1(r,e,t,!0),a}async function uU(n,e){const t=Gp(n);await A1(t,e,!0,!1)}async function A1(n,e,t,r){const a=await Gu(n.localStore,zn(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await BE(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&Hp(n.remoteStore,a),h}async function BE(n,e,t,r,a){n.Ha=(v,w,R)=>async function(N,V,z,Y){let K=V.view.ba(z);K.ls&&(K=await yp(N.localStore,V.query,!1).then(({documents:x})=>V.view.ba(x,K)));const ue=Y&&Y.targetChanges.get(V.targetId),le=Y&&Y.targetMismatches.get(V.targetId)!=null,J=V.view.applyChanges(K,N.isPrimaryClient,ue,le);return Av(N,V.targetId,J.Ma),J.snapshot}(n,v,w,R);const l=await yp(n.localStore,e,!0),u=new I1(e,l.gs),h=u.ba(l.documents),f=Fd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),p=u.applyChanges(h,n.isPrimaryClient,f);Av(n,t,p.Ma);const _=new sU(e,t,u);return n.ka.set(e,_),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function cU(n,e,t){const r=de(n),a=r.ka.get(e),l=r.qa.get(a.targetId);if(l.length>1)return r.qa.set(a.targetId,l.filter(u=>!Md(u,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ku(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Qu(r.remoteStore,a.targetId),Wu(r,a.targetId)}).catch(Ua)):(Wu(r,a.targetId),await Ku(r.localStore,a.targetId,!0))}async function hU(n,e){const t=de(n),r=t.ka.get(e),a=t.qa.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Qu(t.remoteStore,r.targetId))}async function dU(n,e,t){const r=GE(n);try{const a=await function(u,h){const f=de(u),p=vt.now(),_=h.reduce((R,C)=>R.add(C.key),ke());let v,w;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let C=$n(),N=ke();return f.ds.getEntries(R,_).next(V=>{C=V,C.forEach((z,Y)=>{Y.isValidDocument()||(N=N.add(z))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,C)).next(V=>{v=V;const z=[];for(const Y of h){const K=VM(Y,v.get(Y.key).overlayedDocument);K!=null&&z.push(new gs(Y.key,K,rC(K.value.mapValue),_t.exists(!0)))}return f.mutationQueue.addMutationBatch(R,p,z,h)}).next(V=>{w=V;const z=V.applyToLocalDocumentSet(v,N);return f.documentOverlayCache.saveOverlays(R,V.batchId,z)})}).then(()=>({batchId:w.batchId,changes:gC(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(u,h,f){let p=u.Wa[u.currentUser.toKey()];p||(p=new dt(De)),p=p.insert(h,f),u.Wa[u.currentUser.toKey()]=p}(r,a.batchId,t),await ys(r,a.changes),await hc(r.remoteStore)}catch(a){const l=fc(a,"Failed to persist write");t.reject(l)}}async function S1(n,e){const t=de(n);try{const r=await CL(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t.Ua.get(l);u&&(Ee(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.Ba=!0:a.modifiedDocuments.size>0?Ee(u.Ba):a.removedDocuments.size>0&&(Ee(u.Ba),u.Ba=!1))}),await ys(t,r,e)}catch(r){await Ua(r)}}function RA(n,e,t){const r=de(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ka.forEach((l,u)=>{const h=u.view.sa(e);h.snapshot&&a.push(h.snapshot)}),function(u,h){const f=de(u);f.onlineState=h;let p=!1;f.queries.forEach((_,v)=>{for(const w of v.ta)w.sa(h)&&(p=!0)}),p&&zE(f)}(r.eventManager,e),a.length&&r.La.p_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fU(n,e,t){const r=de(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Ua.get(e),l=a&&a.key;if(l){let u=new dt(he.comparator);u=u.insert(l,mt.newNoDocument(l,be.min()));const h=ke().add(l),f=new zd(be.min(),new Map,new dt(De),u,h);await S1(r,f),r.$a=r.$a.remove(l),r.Ua.delete(e),HE(r)}else await Ku(r.localStore,e,!1).then(()=>Wu(r,e,t)).catch(Ua)}async function mU(n,e){const t=de(n),r=e.batch.batchId;try{const a=await RL(t.localStore,e);jE(t,r,null),qE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ys(t,a)}catch(a){await Ua(a)}}async function pU(n,e,t){const r=de(n);try{const a=await function(u,h){const f=de(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return f.mutationQueue.lookupMutationBatch(p,h).next(v=>(Ee(v!==null),_=v.keys(),f.mutationQueue.removeMutationBatch(p,v))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,_,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>f.localDocuments.getDocuments(p,_))})}(r.localStore,e);jE(r,e,t),qE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ys(r,a)}catch(a){await Ua(a)}}async function gU(n,e){const t=de(n);Ba(t.remoteStore)||ie(qa,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(u){const h=de(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>h.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(r===Ta)return void e.resolve();const a=t.Ga.get(r)||[];a.push(e),t.Ga.set(r,a)}catch(r){const a=fc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function qE(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function jE(n,e,t){const r=de(n);let a=r.Wa[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Wa[r.currentUser.toKey()]=a}}function Wu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||R1(n,r)})}function R1(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Qu(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),HE(n))}function Av(n,e,t){for(const r of t)r instanceof w1?(n.Ka.addReference(r.key,e),yU(n,r)):r instanceof b1?(ie(qa,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||R1(n,r.key)):ge()}function yU(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ie(qa,"New document in limbo: "+t),n.Qa.add(r),HE(n))}function HE(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new he(qe.fromString(e)),r=n.za.next();n.Ua.set(r,new aU(t)),n.$a=n.$a.insert(t,r),Hp(n.remoteStore,new Ji(zn(oc(t.path)),r,"TargetPurposeLimboResolution",Kn.ae))}}async function ys(n,e,t){const r=de(n),a=[],l=[],u=[];r.ka.isEmpty()||(r.ka.forEach((h,f)=>{u.push(r.Ha(f,e,t).then(p=>{var _;if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(p){a.push(p);const v=DE.Yi(f.targetId,p);l.push(v)}}))}),await Promise.all(u),r.La.p_(a),await async function(f,p){const _=de(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>j.forEach(p,w=>j.forEach(w.Hi,R=>_.persistence.referenceDelegate.addReference(v,w.targetId,R)).next(()=>j.forEach(w.Ji,R=>_.persistence.referenceDelegate.removeReference(v,w.targetId,R)))))}catch(v){if(!za(v))throw v;ie(PE,"Failed to update sequence numbers: "+v)}for(const v of p){const w=v.targetId;if(!v.fromCache){const R=_.Ts.get(w),C=R.snapshotVersion,N=R.withLastLimboFreeSnapshotVersion(C);_.Ts=_.Ts.insert(w,N)}}}(r.localStore,l))}async function _U(n,e){const t=de(n);if(!t.currentUser.isEqual(e)){ie(qa,"User change. New user:",e.toKey());const r=await i1(t.localStore,e);t.currentUser=e,function(l,u){l.Ga.forEach(h=>{h.forEach(f=>{f.reject(new ne($.CANCELLED,u))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ys(t,r.Rs)}}function vU(n,e){const t=de(n),r=t.Ua.get(e);if(r&&r.Ba)return ke().add(r.key);{let a=ke();const l=t.qa.get(e);if(!l)return a;for(const u of l){const h=t.ka.get(u);a=a.unionWith(h.view.Sa)}return a}}async function EU(n,e){const t=de(n),r=await yp(t.localStore,e.query,!0),a=e.view.Oa(r);return t.isPrimaryClient&&Av(t,e.targetId,a.Ma),a}async function TU(n,e){const t=de(n);return l1(t.localStore,e).then(r=>ys(t,r))}async function wU(n,e,t,r){const a=de(n),l=await function(h,f){const p=de(h),_=de(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",v=>_.Ln(v,f).next(w=>w?p.localDocuments.getDocuments(v,w):j.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await hc(a.remoteStore):t==="acknowledged"||t==="rejected"?(jE(a,e,r||null),qE(a,e),function(h,f){de(de(h).mutationQueue).qn(f)}(a.localStore,e)):ge(),await ys(a,l)):ie(qa,"Cannot apply mutation batch with id: "+e)}async function bU(n,e){const t=de(n);if(Gp(t),GE(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await CA(t,r.toArray());t.ja=!0,await bv(t.remoteStore,!0);for(const l of a)Hp(t.remoteStore,l)}else if(e===!1&&t.ja!==!1){const r=[];let a=Promise.resolve();t.qa.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then(()=>(Wu(t,u),Ku(t.localStore,u,!0))),Qu(t.remoteStore,u)}),await a,await CA(t,r),function(u){const h=de(u);h.Ua.forEach((f,p)=>{Qu(h.remoteStore,p)}),h.Ka.Dr(),h.Ua=new Map,h.$a=new dt(he.comparator)}(t),t.ja=!1,await bv(t.remoteStore,!1)}}async function CA(n,e,t){const r=de(n),a=[],l=[];for(const u of e){let h;const f=r.qa.get(u);if(f&&f.length!==0){h=await Gu(r.localStore,zn(f[0]));for(const p of f){const _=r.ka.get(p),v=await EU(r,_);v.snapshot&&l.push(v.snapshot)}}else{const p=await o1(r.localStore,u);h=await Gu(r.localStore,p),await BE(r,C1(p),u,!1,h.resumeToken)}a.push(h)}return r.La.p_(l),a}function C1(n){return hC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function IU(n){return function(t){return de(de(t).persistence).zi()}(de(n).localStore)}async function AU(n,e,t,r){const a=de(n);if(a.ja)return void ie(qa,"Ignoring unexpected query state notification.");const l=a.qa.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await l1(a.localStore,fC(l[0])),h=zd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",xt.EMPTY_BYTE_STRING);await ys(a,u,h);break}case"rejected":await Ku(a.localStore,e,!0),Wu(a,e,r);break;default:ge()}}async function SU(n,e,t){const r=Gp(n);if(r.ja){for(const a of e){if(r.qa.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ie(qa,"Adding an already active target "+a);continue}const l=await o1(r.localStore,a),u=await Gu(r.localStore,l);await BE(r,C1(l),u.targetId,!1,u.resumeToken),Hp(r.remoteStore,u)}for(const a of t)r.qa.has(a)&&await Ku(r.localStore,a,!1).then(()=>{Qu(r.remoteStore,a),Wu(r,a)}).catch(Ua)}}function Gp(n){const e=de(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=S1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fU.bind(null,e),e.La.p_=tU.bind(null,e.eventManager),e.La.Ja=nU.bind(null,e.eventManager),e}function GE(n){const e=de(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pU.bind(null,e),e}function RU(n,e,t){const r=de(n);(async function(l,u,h){try{const f=await u.getMetadata();if(await function(R,C){const N=de(R),V=zt(C.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",z=>N.Yr.getBundleMetadata(z,C.id)).then(z=>!!z&&z.createTime.compareTo(V)>=0)}(l.localStore,f))return await u.close(),h._completeWith(function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}}(f)),Promise.resolve(new Set);h._updateProgress(T1(f));const p=new iU(f,l.localStore,u.serializer);let _=await u.Ya();for(;_;){const w=await p.Aa(_);w&&h._updateProgress(w),_=await u.Ya()}const v=await p.complete();return await ys(l,v.ma,void 0),await function(R,C){const N=de(R);return N.persistence.runTransaction("Save bundle","readwrite",V=>N.Yr.saveBundleMetadata(V,C))}(l.localStore,f),h._completeWith(v.progress),Promise.resolve(v.Va)}catch(f){return vi(qa,`Loading bundle failed with ${f}`),h._failWith(f),Promise.resolve(new Set)}})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}class pd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bd(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return r1(this.persistence,new n1,e.initialUser,this.serializer)}Xa(e){return new SE(jp.ri,this.serializer)}Za(e){return new f1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pd.provider={build:()=>new pd};class CU extends pd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ee(this.persistence.referenceDelegate instanceof gp);const r=this.persistence.referenceDelegate.garbageCollector;return new YC(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new SE(r=>gp.ri(r,t),this.serializer)}}class D1 extends pd{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await GE(this.ru.syncEngine),await hc(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return r1(this.persistence,new n1,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new YC(r,e.asyncQueue,t)}nu(e,t){const r=new L2(t,this.persistence);return new M2(e.asyncQueue,r)}Xa(e){const t=CE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new RE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,m1(),Km(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new f1}}class DU extends D1{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof k_&&(this.sharedClientState.syncEngine={uo:wU.bind(null,t),co:AU.bind(null,t),lo:SU.bind(null,t),zi:IU.bind(null,t),ao:TU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await bU(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=m1();if(!k_.D(t))throw new ne($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=CE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new k_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class gd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>RA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_U.bind(null,this.syncEngine),await bv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eU}()}createDatastore(e){const t=Bd(e.databaseInfo.databaseId),r=function(l){return new ML(l)}(e.databaseInfo);return function(l,u,h,f){return new FL(l,u,h,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,u,h){return new qL(r,a,l,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>RA(this.syncEngine,t,0),function(){return EA.D()?new EA:new NL}())}createSyncEngine(e,t){return function(a,l,u,h,f,p,_){const v=new oU(a,l,u,h,f,p);return _&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=de(a);ie(el,"RemoteStore shutting down."),l.W_.add(5),await cc(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}gd.provider={build:()=>new gd};function DA(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ut("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new _n,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const a=await this.lu(r);return new rU(JSON.parse(a),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ne($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const u=de(a),h={documents:l.map(v=>fd(u.serializer,v))},f=await u.Co("BatchGetDocuments",u.serializer.databaseId,qe.emptyPath(),h,l.length),p=new Map;f.forEach(v=>{const w=jM(u.serializer,v);p.set(w.key.toString(),w)});const _=[];return l.forEach(v=>{const w=p.get(v.toString());Ee(!!w),_.push(w)}),_}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const a=he.fromPath(r);this.mutations.push(new gE(a,this.precondition(a)))}),await async function(r,a){const l=de(r),u={writes:a.map(h=>md(l.serializer,h))};await l.So("Commit",l.serializer.databaseId,qe.emptyPath(),u)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ge();t=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ne($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(be.min())?_t.exists(!1):_t.updateTime(t):_t.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(be.min()))throw new ne($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _t.updateTime(t)}return _t.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Tu=r.maxAttempts,this.a_=new NE(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new OU(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(a=>{this.Au(a)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!xd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!SC(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="FirestoreClient";class xU{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=cn.UNAUTHENTICATED,this.clientId=OR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async u=>{ie(Va,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(ie(Va,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=fc(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function L_(n,e){n.asyncQueue.verifyOperationInProgress(),ie(Va,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async a=>{r.isEqual(a)||(await i1(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function PA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KE(n);ie(Va,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>wA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,a)=>wA(e.remoteStore,a)),n._onlineComponents=e}async function KE(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(Va,"Using user provided OfflineComponentProvider");try{await L_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===$.FAILED_PRECONDITION||a.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;vi("Error using user provided cache. Falling back to memory cache: "+t),await L_(n,new pd)}}else ie(Va,"Using default OfflineComponentProvider"),await L_(n,new CU(void 0));return n._offlineComponents}async function Qp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(Va,"Using user provided OnlineComponentProvider"),await PA(n,n._uninitializedComponentsProvider._online)):(ie(Va,"Using default OnlineComponentProvider"),await PA(n,new gd))),n._onlineComponents}function P1(n){return KE(n).then(e=>e.persistence)}function QE(n){return KE(n).then(e=>e.localStore)}function O1(n){return Qp(n).then(e=>e.remoteStore)}function $E(n){return Qp(n).then(e=>e.syncEngine)}function VU(n){return Qp(n).then(e=>e.datastore)}async function Yu(n){const e=await Qp(n),t=e.eventManager;return t.onListen=lU.bind(null,e.syncEngine),t.onUnlisten=cU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hU.bind(null,e.syncEngine),t}function kU(n){return n.asyncQueue.enqueue(async()=>{const e=await P1(n),t=await O1(n);return e.setNetworkEnabled(!0),function(a){const l=de(a);return l.W_.delete(0),qd(l)}(t)})}function MU(n){return n.asyncQueue.enqueue(async()=>{const e=await P1(n),t=await O1(n);return e.setNetworkEnabled(!1),async function(a){const l=de(a);l.W_.add(0),await cc(l),l.j_.set("Offline")}(t)})}function LU(n,e){const t=new _n;return n.asyncQueue.enqueueAndForget(async()=>async function(a,l,u){try{const h=await function(p,_){const v=de(p);return v.persistence.runTransaction("read document","readonly",w=>v.localDocuments.getDocument(w,_))}(a,l);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new ne($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const f=fc(h,`Failed to get document '${l} from cache`);u.reject(f)}}(await QE(n),e,t)),t.promise}function N1(n,e,t={}){const r=new _n;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,h,f,p){const _=new Kp({next:w=>{_.su(),u.enqueueAndForget(()=>UE(l,v));const R=w.docs.has(h);!R&&w.fromCache?p.reject(new ne($.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&w.fromCache&&f&&f.source==="server"?p.reject(new ne($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new FE(oc(h.path),_,{includeMetadataChanges:!0,Ta:!0});return LE(l,v)}(await Yu(n),n.asyncQueue,e,t,r)),r.promise}function UU(n,e){const t=new _n;return n.asyncQueue.enqueueAndForget(async()=>async function(a,l,u){try{const h=await yp(a,l,!0),f=new I1(l,h.gs),p=f.ba(h.documents),_=f.applyChanges(p,!1);u.resolve(_.snapshot)}catch(h){const f=fc(h,`Failed to execute query '${l} against cache`);u.reject(f)}}(await QE(n),e,t)),t.promise}function x1(n,e,t={}){const r=new _n;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,h,f,p){const _=new Kp({next:w=>{_.su(),u.enqueueAndForget(()=>UE(l,v)),w.fromCache&&f.source==="server"?p.reject(new ne($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new FE(h,_,{includeMetadataChanges:!0,Ta:!0});return LE(l,v)}(await Yu(n),n.asyncQueue,e,t,r)),r.promise}function zU(n,e){const t=new Kp(e);return n.asyncQueue.enqueueAndForget(async()=>function(a,l){de(a).ia.add(l),l.next()}(await Yu(n),t)),()=>{t.su(),n.asyncQueue.enqueueAndForget(async()=>function(a,l){de(a).ia.delete(l)}(await Yu(n),t))}}function FU(n,e,t,r){const a=function(u,h){let f;return f=typeof u=="string"?rE().encode(u):u,function(_,v){return new PU(_,v)}(function(_,v){if(_ instanceof Uint8Array)return DA(_,v);if(_ instanceof ArrayBuffer)return DA(new Uint8Array(_),v);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),h)}(t,Bd(e));n.asyncQueue.enqueueAndForget(async()=>{RU(await $E(n),a,r)})}function BU(n,e){return n.asyncQueue.enqueue(async()=>function(r,a){const l=de(r);return l.persistence.runTransaction("Get named query","readonly",u=>l.Yr.getNamedQuery(u,a))}(await QE(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n,e,t){if(!t)throw new ne($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function k1(n,e,t,r){if(e===!0&&r===!0)throw new ne($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NA(n){if(!he.isDocumentKey(n))throw new ne($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xA(n){if(he.isDocumentKey(n))throw new ne($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $p(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ge()}function et(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$p(n);throw new ne($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function M1(n,e){if(e<=0)throw new ne($.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="firestore.googleapis.com",VA=!0;class kA{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=L1,this.ssl=VA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:VA;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lL)throw new ne($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ne($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ne($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ne($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jd{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new A2;switch(r.type){case"firstParty":return new D2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=OA.get(t);r&&(ie("ComponentProvider","Removing Datastore"),OA.delete(t),r.terminate())}(this),Promise.resolve()}}function qU(n,e,t,r={}){var a;const l=(n=et(n,jd))._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;l.host!==L1&&l.host!==h&&vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:h,ssl:!1,emulatorOptions:r});if(!Ia(f,u)&&(n._setSettings(f),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=cn.MOCK_USER;else{p=HV(r.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ne($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new cn(v)}n._authCredentials=new S2(new PR(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fn=class U1{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new U1(this.firestore,e,this._query)}},It=class z1{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new z1(this.firestore,e,this._key)}},wa=class F1 extends Fn{constructor(e,t,r){super(e,t,oc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new he(e))}withConverter(e){return new F1(this.firestore,e,this._path)}};function B1(n,e,...t){if(n=Re(n),WE("collection","path",e),n instanceof jd){const r=qe.fromString(e,...t);return xA(r),new wa(n,null,r)}{if(!(n instanceof It||n instanceof wa))throw new ne($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qe.fromString(e,...t));return xA(r),new wa(n.firestore,null,r)}}function jU(n,e){if(n=et(n,jd),WE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ne($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fn(n,null,function(r){return new ms(qe.emptyPath(),r)}(e))}function Tp(n,e,...t){if(n=Re(n),arguments.length===1&&(e=OR.newId()),WE("doc","path",e),n instanceof jd){const r=qe.fromString(e,...t);return NA(r),new It(n,null,new he(r))}{if(!(n instanceof It||n instanceof wa))throw new ne($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qe.fromString(e,...t));return NA(r),new It(n.firestore,n instanceof wa?n.converter:null,new he(r))}}function q1(n,e){return n=Re(n),e=Re(e),(n instanceof It||n instanceof wa)&&(e instanceof It||e instanceof wa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function j1(n,e){return n=Re(n),e=Re(e),n instanceof Fn&&e instanceof Fn&&n.firestore===e.firestore&&Md(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="AsyncQueue";class LA{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new NE(this,"async_queue_retry"),this.Su=()=>{const r=Km();r&&ie(MA,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Km();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Km();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new _n;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!za(e))throw e;ie(MA,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const a=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw Ut("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=ME.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&ge()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Sv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(n,["next","error","complete"])}class HU{constructor(){this._progressObserver={},this._taskCompletionResolver=new _n,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=-1;let Ft=class extends jd{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new LA,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LA(e),this._firestoreClient=void 0,await e}}};function Cn(n){if(n._terminated)throw new ne($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||H1(n),n._firestoreClient}function H1(n){var e,t,r;const a=n._freezeSettings(),l=function(h,f,p,_){return new dM(h,f,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,V1(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new xU(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(n._componentsProvider))}function KU(n,e){vi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return G1(n,gd.provider,{build:r=>new D1(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function QU(n){vi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();G1(n,gd.provider,{build:t=>new DU(t,e.cacheSizeBytes)})}function G1(n,e,t){if((n=et(n,Ft))._firestoreClient||n._terminated)throw new ne($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ne($.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},H1(n)}function $U(n){if(n._initialized&&!n._terminated)throw new ne($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _n;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!gi.D())return Promise.resolve();const a=r+t1;await gi.delete(a)}(CE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function WU(n){return function(t){const r=new _n;return t.asyncQueue.enqueueAndForget(async()=>gU(await $E(t),r)),r.promise}(Cn(n=et(n,Ft)))}function YU(n){return kU(Cn(n=et(n,Ft)))}function XU(n){return MU(Cn(n=et(n,Ft)))}function ZU(n,e){const t=Cn(n=et(n,Ft)),r=new HU;return FU(t,n._databaseId,e,r),r}function JU(n,e){return BU(Cn(n=et(n,Ft)),e).then(t=>t?new Fn(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ti(xt.fromBase64String(e))}catch(t){throw new ne($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ti(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=/^__.*__$/;class t4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gs(e,this.data,this.fieldMask,t,this.fieldTransforms):new lc(e,this.data,t,this.fieldTransforms)}}class K1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Q1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class Yp{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Yp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.$u(e),a}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.Bu(),a}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return wp(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Q1(this.Lu)&&e4.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class n4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bd(e)}ju(e,t,r,a=!1){return new Yp({Lu:e,methodName:t,zu:r,path:yt.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ol(n){const e=n._freezeSettings(),t=Bd(n._databaseId);return new n4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xp(n,e,t,r,a,l={}){const u=n.ju(l.merge||l.mergeFields?2:0,e,t,a);rT("Data must be an object, but it was:",u,r);const h=Y1(r,u);let f,p;if(l.merge)f=new Qn(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const v of l.mergeFields){const w=Rv(e,v,t);if(!u.contains(w))throw new ne($.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Z1(_,w)||_.push(w)}f=new Qn(_),p=u.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,p=u.fieldTransforms;return new t4(new yn(h),f,p)}class Hd extends al{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hd}}function $1(n,e,t){return new Yp({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class XE extends al{_toFieldTransform(e){return new Ud(e.path,new qu)}isEqual(e){return e instanceof XE}}class ZE extends al{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=$1(this,e,!0),r=this.Hu.map(l=>ll(l,t)),a=new Wo(r);return new Ud(e.path,a)}isEqual(e){return e instanceof ZE&&Ia(this.Hu,e.Hu)}}class JE extends al{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=$1(this,e,!0),r=this.Hu.map(l=>ll(l,t)),a=new Yo(r);return new Ud(e.path,a)}isEqual(e){return e instanceof JE&&Ia(this.Hu,e.Hu)}}class eT extends al{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new ju(e.serializer,vC(e.serializer,this.Ju));return new Ud(e.path,t)}isEqual(e){return e instanceof eT&&this.Ju===e.Ju}}function tT(n,e,t,r){const a=n.ju(1,e,t);rT("Data must be an object, but it was:",a,r);const l=[],u=yn.empty();Fa(r,(f,p)=>{const _=iT(e,f,t);p=Re(p);const v=a.Uu(_);if(p instanceof Hd)l.push(_);else{const w=ll(p,v);w!=null&&(l.push(_),u.set(_,w))}});const h=new Qn(l);return new K1(u,h,a.fieldTransforms)}function nT(n,e,t,r,a,l){const u=n.ju(1,e,t),h=[Rv(e,r,t)],f=[a];if(l.length%2!=0)throw new ne($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)h.push(Rv(e,l[w])),f.push(l[w+1]);const p=[],_=yn.empty();for(let w=h.length-1;w>=0;--w)if(!Z1(p,h[w])){const R=h[w];let C=f[w];C=Re(C);const N=u.Uu(R);if(C instanceof Hd)p.push(R);else{const V=ll(C,N);V!=null&&(p.push(R),_.set(R,V))}}const v=new Qn(p);return new K1(_,v,u.fieldTransforms)}function W1(n,e,t,r=!1){return ll(t,n.ju(r?4:3,e))}function ll(n,e){if(X1(n=Re(n)))return rT("Unsupported field value:",e,n),Y1(n,e);if(n instanceof al)return function(r,a){if(!Q1(a.Lu))throw a.Wu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,a){const l=[];let u=0;for(const h of r){let f=ll(h,a.Ku(u));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),u++}return{arrayValue:{values:l}}}(n,e)}return function(r,a){if((r=Re(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vC(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=vt.fromDate(r);return{timestampValue:Hu(a.serializer,l)}}if(r instanceof vt){const l=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hu(a.serializer,l)}}if(r instanceof Wp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ti)return{bytesValue:PC(a.serializer,r._byteString)};if(r instanceof It){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:TE(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof YE)return function(u,h){return{mapValue:{fields:{[cE]:{stringValue:hE},[zu]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.Wu("VectorValues must only contain numeric values.");return pE(h.serializer,p)})}}}}}}(r,a);throw a.Wu(`Unsupported field value: ${$p(r)}`)}(n,e)}function Y1(n,e){const t={};return $R(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fa(n,(r,a)=>{const l=ll(a,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function X1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof Wp||n instanceof Ti||n instanceof It||n instanceof al||n instanceof YE)}function rT(n,e,t){if(!X1(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=$p(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Rv(n,e,t){if((e=Re(e))instanceof ka)return e._internalPath;if(typeof e=="string")return iT(n,e);throw wp("Field path arguments must be of type string or ",n,!1,void 0,t)}const r4=new RegExp("[~\\*/\\[\\]]");function iT(n,e,t){if(e.search(r4)>=0)throw wp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ka(...e.split("."))._internalPath}catch{throw wp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wp(n,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(l||u)&&(f+=" (found",l&&(f+=` in field ${r}`),u&&(f+=` in document ${a}`),f+=")"),new ne($.INVALID_ARGUMENT,h+n+f)}function Z1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class i4 extends yd{data(){return super.data()}}function Zp(n,e){return typeof e=="string"?iT(n,e):e instanceof ka?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sT{}class Gd extends sT{}function oa(n,e,...t){let r=[];e instanceof sT&&r.push(e),r=r.concat(t),function(l){const u=l.filter(f=>f instanceof aT).length,h=l.filter(f=>f instanceof Jp).length;if(u>1||u>0&&h>0)throw new ne($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)n=a._apply(n);return n}class Jp extends Gd{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Jp(e,t,r)}_apply(e){const t=this._parse(e);return tD(e._query,t),new Fn(e.firestore,e.converter,fv(e._query,t))}_parse(e){const t=ol(e.firestore);return function(l,u,h,f,p,_,v){let w;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ne($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){zA(v,_);const C=[];for(const N of v)C.push(UA(f,l,N));w={arrayValue:{values:C}}}else w=UA(f,l,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||zA(v,_),w=W1(h,u,v,_==="in"||_==="not-in");return je.create(p,_,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function s4(n,e,t){const r=e,a=Zp("where",n);return Jp._create(a,r,t)}class aT extends sT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new aT(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:it.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const h=l.getFlattenedFilters();for(const f of h)tD(u,f),u=fv(u,f)}(e._query,t),new Fn(e.firestore,e.converter,fv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class oT extends Gd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new oT(e,t)}_apply(e){const t=function(a,l,u){if(a.startAt!==null)throw new ne($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ne($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dd(l,u)}(e._query,this._field,this._direction);return new Fn(e.firestore,e.converter,function(a,l){const u=a.explicitOrderBy.concat([l]);return new ms(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function a4(n,e="asc"){const t=e,r=Zp("orderBy",n);return oT._create(r,t)}class eg extends Gd{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new eg(e,t,r)}_apply(e){return new Fn(e.firestore,e.converter,dp(e._query,this._limit,this._limitType))}}function o4(n){return M1("limit",n),eg._create("limit",n,"F")}function l4(n){return M1("limitToLast",n),eg._create("limitToLast",n,"L")}class tg extends Gd{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new tg(e,t,r)}_apply(e){const t=eD(e,this.type,this._docOrFields,this._inclusive);return new Fn(e.firestore,e.converter,function(a,l){return new ms(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function u4(...n){return tg._create("startAt",n,!0)}function c4(...n){return tg._create("startAfter",n,!1)}class ng extends Gd{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ng(e,t,r)}_apply(e){const t=eD(e,this.type,this._docOrFields,this._inclusive);return new Fn(e.firestore,e.converter,function(a,l){return new ms(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(e._query,t))}}function h4(...n){return ng._create("endBefore",n,!1)}function d4(...n){return ng._create("endAt",n,!0)}function eD(n,e,t,r){if(t[0]=Re(t[0]),t[0]instanceof yd)return function(l,u,h,f,p){if(!f)throw new ne($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const _=[];for(const v of gu(l))if(v.field.isKeyField())_.push(Qo(u,f.key));else{const w=f.data.field(v.field);if(Mp(w))throw new ne($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const R=v.field.canonicalString();throw new ne($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}_.push(w)}return new Na(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=ol(n.firestore);return function(u,h,f,p,_,v){const w=u.explicitOrderBy;if(_.length>w.length)throw new ne($.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let C=0;C<_.length;C++){const N=_[C];if(w[C].field.isKeyField()){if(typeof N!="string")throw new ne($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof N}`);if(!fE(u)&&N.indexOf("/")!==-1)throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${N}' contains a slash.`);const V=u.path.child(qe.fromString(N));if(!he.isDocumentKey(V))throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const z=new he(V);R.push(Qo(h,z))}else{const V=W1(f,p,N);R.push(V)}}return new Na(R,v)}(n._query,n.firestore._databaseId,a,e,t,r)}}function UA(n,e,t){if(typeof(t=Re(t))=="string"){if(t==="")throw new ne($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fE(e)&&t.indexOf("/")!==-1)throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qe.fromString(t));if(!he.isDocumentKey(r))throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qo(n,new he(r))}if(t instanceof It)return Qo(n,t._key);throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$p(t)}.`)}function zA(n,e){if(!Array.isArray(n)||n.length===0)throw new ne($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tD(n,e){const t=function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ne($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lT{convertValue(e,t="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Fa(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[zu].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(u=>pt(u.doubleValue));return new YE(l)}convertGeoPoint(e){return new Wp(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ud(e));default:return null}}convertTimestamp(e){const t=os(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qe.fromString(e);Ee(BC(r));const a=new Da(r.get(1),r.get(3)),l=new he(r.popFirst(5));return a.isEqual(t)||Ut(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class f4 extends lT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ti(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let us=class extends yd{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Zp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},$h=class extends us{data(e={}){return super.data(e)}},Ma=class{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ko(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $h(this._firestore,this._userDataWriter,r.key,r,new ko(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(h=>{const f=new $h(a._firestore,a._userDataWriter,h.doc.key,h.doc,new ko(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const f=new $h(a._firestore,a._userDataWriter,h.doc.key,h.doc,new ko(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),_=u.indexOf(h.doc.key)),{type:m4(h.type),doc:f,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function m4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}function nD(n,e){return n instanceof us&&e instanceof us?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ma&&e instanceof Ma&&n._firestore===e._firestore&&j1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(n){n=et(n,It);const e=et(n.firestore,Ft);return N1(Cn(e),n._key).then(t=>uT(e,n,t))}class ul extends lT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ti(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}}function g4(n){n=et(n,It);const e=et(n.firestore,Ft),t=Cn(e),r=new ul(e);return LU(t,n._key).then(a=>new us(e,r,n._key,a,new ko(a!==null&&a.hasLocalMutations,!0),n.converter))}function y4(n){n=et(n,It);const e=et(n.firestore,Ft);return N1(Cn(e),n._key,{source:"server"}).then(t=>uT(e,n,t))}function _4(n){n=et(n,Fn);const e=et(n.firestore,Ft),t=Cn(e),r=new ul(e);return J1(n._query),x1(t,n._query).then(a=>new Ma(e,r,n,a))}function v4(n){n=et(n,Fn);const e=et(n.firestore,Ft),t=Cn(e),r=new ul(e);return UU(t,n._query).then(a=>new Ma(e,r,n,a))}function E4(n){n=et(n,Fn);const e=et(n.firestore,Ft),t=Cn(e),r=new ul(e);return x1(t,n._query,{source:"server"}).then(a=>new Ma(e,r,n,a))}function FA(n,e,t){n=et(n,It);const r=et(n.firestore,Ft),a=rg(n.converter,e,t);return Kd(r,[Xp(ol(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,_t.none())])}function BA(n,e,t,...r){n=et(n,It);const a=et(n.firestore,Ft),l=ol(a);let u;return u=typeof(e=Re(e))=="string"||e instanceof ka?nT(l,"updateDoc",n._key,e,t,r):tT(l,"updateDoc",n._key,e),Kd(a,[u.toMutation(n._key,_t.exists(!0))])}function T4(n){return Kd(et(n.firestore,Ft),[new uc(n._key,_t.none())])}function w4(n,e){const t=et(n.firestore,Ft),r=Tp(n),a=rg(n.converter,e);return Kd(t,[Xp(ol(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,_t.exists(!1))]).then(()=>r)}function rD(n,...e){var t,r,a;n=Re(n);let l={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Sv(e[u])||(l=e[u],u++);const h={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Sv(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[u+2]=(a=v.complete)===null||a===void 0?void 0:a.bind(v)}let f,p,_;if(n instanceof It)p=et(n.firestore,Ft),_=oc(n._key.path),f={next:v=>{e[u]&&e[u](uT(p,n,v))},error:e[u+1],complete:e[u+2]};else{const v=et(n,Fn);p=et(v.firestore,Ft),_=v._query;const w=new ul(p);f={next:R=>{e[u]&&e[u](new Ma(p,w,v,R))},error:e[u+1],complete:e[u+2]},J1(n._query)}return function(w,R,C,N){const V=new Kp(N),z=new FE(R,V,C);return w.asyncQueue.enqueueAndForget(async()=>LE(await Yu(w),z)),()=>{V.su(),w.asyncQueue.enqueueAndForget(async()=>UE(await Yu(w),z))}}(Cn(p),_,h,f)}function b4(n,e){return zU(Cn(n=et(n,Ft)),Sv(e)?e:{next:e})}function Kd(n,e){return function(r,a){const l=new _n;return r.asyncQueue.enqueueAndForget(async()=>dU(await $E(r),a,l)),l.promise}(Cn(n),e)}function uT(n,e,t){const r=t.docs.get(e._key),a=new ul(n);return new us(n,a,e._key,r,new ko(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A4=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ol(e)}set(e,t,r){this._verifyNotCommitted();const a=ya(e,this._firestore),l=rg(a.converter,t,r),u=Xp(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,_t.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=ya(e,this._firestore);let u;return u=typeof(t=Re(t))=="string"||t instanceof ka?nT(this._dataReader,"WriteBatch.update",l._key,t,r,a):tT(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,_t.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ya(e,this._firestore);return this._mutations=this._mutations.concat(new uc(t._key,_t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ya(n,e){if((n=Re(n)).firestore!==e)throw new ne($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ol(e)}get(e){const t=ya(e,this._firestore),r=new f4(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return ge();const l=a[0];if(l.isFoundDocument())return new yd(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new yd(this._firestore,r,t._key,null,t.converter);throw ge()})}set(e,t,r){const a=ya(e,this._firestore),l=rg(a.converter,t,r),u=Xp(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,u),this}update(e,t,r,...a){const l=ya(e,this._firestore);let u;return u=typeof(t=Re(t))=="string"||t instanceof ka?nT(this._dataReader,"Transaction.update",l._key,t,r,a):tT(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=ya(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R4=class extends S4{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ya(e,this._firestore),r=new ul(this._firestore);return super.get(e).then(a=>new us(this._firestore,r,t._key,a._document,new ko(!1,!1),t.converter))}};function C4(n,e,t){n=et(n,Ft);const r=Object.assign(Object.assign({},I4),t);return function(l){if(l.maxAttempts<1)throw new ne($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(l,u,h){const f=new _n;return l.asyncQueue.enqueueAndForget(async()=>{const p=await VU(l);new NU(l.asyncQueue,p,h,u,f).Iu()}),f.promise}(Cn(n),a=>e(new R4(n,a)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(){return new Hd("deleteField")}function P4(){return new XE("serverTimestamp")}function O4(...n){return new ZE("arrayUnion",n)}function N4(...n){return new JE("arrayRemove",n)}function x4(n){return new eT("increment",n)}(function(e,t=!0){(function(a){ac=a})(La),Ra(new _i("firestore",(r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),h=new Ft(new R2(r.getProvider("auth-internal")),new P2(u,r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ne($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(p.options.projectId,_)}(u,a),u);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),Lr(_I,vI,e),Lr(_I,vI,"esm2017")})();const V4="@firebase/firestore-compat",k4="0.3.45";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){if(typeof Uint8Array>"u")throw new ne("unimplemented","Uint8Arrays are not available in this environment.")}function jA(){if(!cM())throw new ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}class _d{constructor(e){this._delegate=e}static fromBase64String(e){return jA(),new _d(Ti.fromBase64String(e))}static fromUint8Array(e){return qA(),new _d(Ti.fromUint8Array(e))}toBase64(){return jA(),this._delegate.toBase64()}toUint8Array(){return qA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n){return M4(n,["next","error","complete"])}function M4(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{enableIndexedDbPersistence(e,t){return KU(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return QU(e._delegate)}clearIndexedDbPersistence(e){return $U(e._delegate)}}class iD{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Da||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){qU(this._delegate,e,t,r)}enableNetwork(){return YU(this._delegate)}disableNetwork(){return XU(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,k1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return WU(this._delegate)}onSnapshotsInSync(e){return b4(this._delegate,e)}get app(){if(!this._appCompat)throw new ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xu(this,B1(this._delegate,e))}catch(t){throw Mn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ir(this,Tp(this._delegate,e))}catch(t){throw Mn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Td(this,jU(this._delegate,e))}catch(t){throw Mn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return C4(this._delegate,t=>e(new sD(this,t)))}batch(){return Cn(this._delegate),new aD(new A4(this._delegate,e=>Kd(this._delegate,e)))}loadBundle(e){return ZU(this._delegate,e)}namedQuery(e){return JU(this._delegate,e).then(t=>t?new Td(this,t):null)}}class ig extends lT{constructor(e){super(),this.firestore=e}convertBytes(e){return new _d(new Ti(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ir.forKey(t,this.firestore,null)}}function U4(n){b2(n)}class sD{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ig(e)}get(e){const t=Mo(e);return this._delegate.get(t).then(r=>new vd(this._firestore,new us(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Mo(e);return r?(cT("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Mo(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Mo(e);return this._delegate.delete(t),this}}class aD{constructor(e){this._delegate=e}set(e,t,r){const a=Mo(e);return r?(cT("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Mo(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Mo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class tl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $h(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ed(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=tl.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new tl(e,new ig(e),t),a.set(t,l)),l}}tl.INSTANCES=new WeakMap;class Ir{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ig(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ir(t,new It(t._delegate,r,new he(e)))}static forKey(e,t,r){return new Ir(t,new It(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xu(this.firestore,B1(this._delegate,e))}catch(t){throw Mn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Re(e),e instanceof It?q1(this._delegate,e):!1}set(e,t){t=cT("DocumentReference.set",t);try{return t?FA(this._delegate,e,t):FA(this._delegate,e)}catch(r){throw Mn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?BA(this._delegate,e):BA(this._delegate,e,t,...r)}catch(a){throw Mn(a,"updateDoc()","DocumentReference.update()")}}delete(){return T4(this._delegate)}onSnapshot(...e){const t=oD(e),r=lD(e,a=>new vd(this.firestore,new us(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return rD(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=g4(this._delegate):(e==null?void 0:e.source)==="server"?t=y4(this._delegate):t=p4(this._delegate),t.then(r=>new vd(this.firestore,new us(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ir(this.firestore,e?this._delegate.withConverter(tl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Mn(n,e,t){return n.message=n.message.replace(e,t),n}function oD(n){for(const e of n)if(typeof e=="object"&&!Cv(e))return e;return{}}function lD(n,e){var t,r;let a;return Cv(n[0])?a=n[0]:Cv(n[1])?a=n[1]:typeof n[0]=="function"?a={next:n[0],error:n[1],complete:n[2]}:a={next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(r=a.complete)===null||r===void 0?void 0:r.bind(a)}}class vd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ir(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return nD(this._delegate,e._delegate)}}class Ed extends vd{data(e){const t=this._delegate.data(e);return this._delegate._converter||I2(t!==void 0),t}}let Td=class ri{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ig(e)}where(e,t,r){try{return new ri(this.firestore,oa(this._delegate,s4(e,t,r)))}catch(a){throw Mn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ri(this.firestore,oa(this._delegate,a4(e,t)))}catch(r){throw Mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ri(this.firestore,oa(this._delegate,o4(e)))}catch(t){throw Mn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ri(this.firestore,oa(this._delegate,l4(e)))}catch(t){throw Mn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ri(this.firestore,oa(this._delegate,u4(...e)))}catch(t){throw Mn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ri(this.firestore,oa(this._delegate,c4(...e)))}catch(t){throw Mn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ri(this.firestore,oa(this._delegate,h4(...e)))}catch(t){throw Mn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ri(this.firestore,oa(this._delegate,d4(...e)))}catch(t){throw Mn(t,"endAt()","Query.endAt()")}}isEqual(e){return j1(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=v4(this._delegate):(e==null?void 0:e.source)==="server"?t=E4(this._delegate):t=_4(this._delegate),t.then(r=>new Dv(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=oD(e),r=lD(e,a=>new Dv(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return rD(this._delegate,t,r)}withConverter(e){return new ri(this.firestore,e?this._delegate.withConverter(tl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};class z4{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ed(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Dv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Td(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ed(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new z4(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ed(this._firestore,r))})}isEqual(e){return nD(this._delegate,e._delegate)}}class Xu extends Td{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ir(this.firestore,e):null}doc(e){try{return e===void 0?new Ir(this.firestore,Tp(this._delegate)):new Ir(this.firestore,Tp(this._delegate,e))}catch(t){throw Mn(t,"doc()","CollectionReference.doc()")}}add(e){return w4(this._delegate,e).then(t=>new Ir(this.firestore,t))}isEqual(e){return q1(this._delegate,e._delegate)}withConverter(e){return new Xu(this.firestore,e?this._delegate.withConverter(tl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Mo(n){return et(n,It)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(...e){this._delegate=new ka(...e)}static documentId(){return new hT(yt.keyField().canonicalString())}isEqual(e){return e=Re(e),e instanceof ka?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{static serverTimestamp(){const e=P4();return e._methodName="FieldValue.serverTimestamp",new xo(e)}static delete(){const e=D4();return e._methodName="FieldValue.delete",new xo(e)}static arrayUnion(...e){const t=O4(...e);return t._methodName="FieldValue.arrayUnion",new xo(t)}static arrayRemove(...e){const t=N4(...e);return t._methodName="FieldValue.arrayRemove",new xo(t)}static increment(e){const t=x4(e);return t._methodName="FieldValue.increment",new xo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4={Firestore:iD,GeoPoint:Wp,Timestamp:vt,Blob:_d,Transaction:sD,WriteBatch:aD,DocumentReference:Ir,DocumentSnapshot:vd,Query:Td,QueryDocumentSnapshot:Ed,QuerySnapshot:Dv,CollectionReference:Xu,FieldPath:hT,FieldValue:xo,setLogLevel:U4,CACHE_SIZE_UNLIMITED:GU};function B4(n,e){n.INTERNAL.registerComponent(new _i("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},F4)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(n){B4(n,(e,t)=>new iD(e,t,new L4)),n.registerVersion(V4,k4)}q4(fs);function dT(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}const Oh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},lu={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function uD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const H4=j4,G4=uD,cD=new sl("auth","Firebase",uD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=new Op("@firebase/auth");function K4(n,...e){bp.logLevel<=Fe.WARN&&bp.warn(`Auth (${La}): ${n}`,...e)}function Qm(n,...e){bp.logLevel<=Fe.ERROR&&bp.error(`Auth (${La}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n,...e){throw mT(n,...e)}function Zt(n,...e){return mT(n,...e)}function fT(n,e,t){const r=Object.assign(Object.assign({},G4()),{[e]:t});return new sl("auth","Firebase",r).create(e,{appName:n.name})}function hn(n){return fT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mc(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&vn(n,"argument-error"),fT(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mT(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return cD.create(n,...e)}function oe(n,e,...t){if(!n)throw mT(e,...t)}function pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qm(e),new Error(e)}function zr(n,e){n||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function pT(){return HA()==="http:"||HA()==="https:"}function HA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pT()||oR()||"connection"in navigator)?navigator.onLine:!0}function $4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=GV()||Xv()}get(){return Q4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n,e){zr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=new Qd(3e4,6e4);function Vt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function kt(n,e,t,r,a={}){return dD(n,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const h=sc(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},l);return QV()||(p.referrerPolicy="no-referrer"),hD.fetch()(fD(n,n.config.apiHost,t,h),p)})}async function dD(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},W4),e);try{const a=new Z4(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Bh(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Bh(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Bh(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw fT(n,_,p);vn(n,_)}}catch(a){if(a instanceof Un)throw a;vn(n,"network-request-failed",{message:String(a)})}}async function _s(n,e,t,r,a={}){const l=await kt(n,e,t,r,a);return"mfaPendingCredential"in l&&vn(n,"multi-factor-auth-required",{_serverResponse:l}),l}function fD(n,e,t,r){const a=`${e}${t}?${r}`;return n.config.emulator?gT(n.config,a):`${n.config.apiScheme}://${a}`}function X4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zt(this.auth,"network-request-failed")),Y4.get())})}}function Bh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Zt(n,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(n){return n!==void 0&&n.getResponse!==void 0}function KA(n){return n!==void 0&&n.enterprise!==void 0}class mD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return X4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J4(n){return(await kt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function pD(n,e){return kt(n,"GET","/v2/recaptchaConfig",Vt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e6(n,e){return kt(n,"POST","/v1/accounts:delete",e)}async function t6(n,e){return kt(n,"POST","/v1/accounts:update",e)}async function gD(n,e){return kt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n6(n,e=!1){const t=Re(n),r=await t.getIdToken(e),a=sg(r);oe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:Wh(U_(a.auth_time)),issuedAtTime:Wh(U_(a.iat)),expirationTime:Wh(U_(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function U_(n){return Number(n)*1e3}function sg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qm("JWT malformed, contained fewer than 3 sections"),null;try{const a=$v(t);return a?JSON.parse(a):(Qm("Failed to decode base64 JWT payload"),null)}catch(a){return Qm("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function QA(n){const e=sg(n);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cs(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Un&&r6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function r6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wh(this.lastLoginAt),this.creationTime=Wh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(n){var e;const t=n.auth,r=await n.getIdToken(),a=await cs(n,gD(t,{idToken:r}));oe(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?yD(l.providerUserInfo):[],h=a6(n.providerData,u),f=n.isAnonymous,p=!(n.email&&l.passwordHash)&&!(h!=null&&h.length),_=f?p:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Pv(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,v)}async function s6(n){const e=Re(n);await bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a6(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function yD(n){return n.map(e=>{var{providerId:t}=e,r=dT(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(n,e){const t=await dD(n,{},async()=>{const r=sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=fD(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",hD.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function l6(n,e){return kt(n,"POST","/v2/accounts:revokeToken",Vt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const t=QA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await o6(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new _u;return r&&(oe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(oe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(oe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _u,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(n,e){oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class es{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,l=dT(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Pv(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await cs(this,this.stsTokenManager.getToken(this.auth,e));return oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return n6(this,e)}reload(){return s6(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await bd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gt(this.auth.app))return Promise.reject(hn(this.auth));const e=await this.getIdToken();return await cs(this,e6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,l,u,h,f,p,_;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(a=t.email)!==null&&a!==void 0?a:void 0,R=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,C=(u=t.photoURL)!==null&&u!==void 0?u:void 0,N=(h=t.tenantId)!==null&&h!==void 0?h:void 0,V=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,z=(p=t.createdAt)!==null&&p!==void 0?p:void 0,Y=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:K,emailVerified:ue,isAnonymous:le,providerData:J,stsTokenManager:x}=t;oe(K&&x,e,"internal-error");const S=_u.fromJSON(this.name,x);oe(typeof K=="string",e,"internal-error"),la(v,e.name),la(w,e.name),oe(typeof ue=="boolean",e,"internal-error"),oe(typeof le=="boolean",e,"internal-error"),la(R,e.name),la(C,e.name),la(N,e.name),la(V,e.name),la(z,e.name),la(Y,e.name);const A=new es({uid:K,auth:e,email:w,emailVerified:ue,displayName:v,isAnonymous:le,photoURL:C,phoneNumber:R,tenantId:N,stsTokenManager:S,createdAt:z,lastLoginAt:Y});return J&&Array.isArray(J)&&(A.providerData=J.map(O=>Object.assign({},O))),V&&(A._redirectEventId=V),A}static async _fromIdTokenResponse(e,t,r=!1){const a=new _u;a.updateFromServerResponse(t);const l=new es({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await bd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];oe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?yD(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new _u;h.updateFromIdToken(r);const f=new es({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Pv(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new Map;function ir(n){zr(n instanceof Function,"Expected a class definition");let e=$A.get(n);return e?(zr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$A.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_D.type="NONE";const Zu=_D;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(n,e,t){return`firebase:${n}:${e}:${t}`}class vu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Go(this.userKey,a.apiKey,l),this.fullPersistenceKey=Go("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?es._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new vu(ir(Zu),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ir(Zu);const u=Go(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const _=await p._get(u);if(_){const v=es._fromJSON(e,_);p!==l&&(h=v),l=p;break}}catch{}const f=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new vu(l,e,r):(l=f[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new vu(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bD(e))return"Blackberry";if(ID(e))return"Webos";if(ED(e))return"Safari";if((e.includes("chrome/")||TD(e))&&!e.includes("edge/"))return"Chrome";if($d(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vD(n=At()){return/firefox\//i.test(n)}function ED(n=At()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TD(n=At()){return/crios\//i.test(n)}function wD(n=At()){return/iemobile/i.test(n)}function $d(n=At()){return/android/i.test(n)}function bD(n=At()){return/blackberry/i.test(n)}function ID(n=At()){return/webos/i.test(n)}function Wd(n=At()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function u6(n=At()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function c6(n=At()){var e;return Wd(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function h6(){return lR()&&document.documentMode===10}function AD(n=At()){return Wd(n)||$d(n)||ID(n)||bD(n)||/windows phone/i.test(n)||wD(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n,e=[]){let t;switch(n){case"Browser":t=WA(At());break;case"Worker":t=`${WA(At())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${La}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,h)=>{try{const f=e(l);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6(n,e={}){return kt(n,"GET","/v2/passwordPolicy",Vt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=6;class p6{constructor(e){var t,r,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:m6,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,l,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YA(this),this.idTokenSubscription=new YA(this),this.beforeStateQueue=new d6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ir(t)),this._initializationPromise=this.queue(async()=>{var r,a;if(!this._deleted&&(this.persistenceManager=await vu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gD(this,{idToken:e}),r=await es._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(gt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(a=f.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gt(this.app))return Promise.reject(hn(this));const t=e?Re(e):null;return t&&oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gt(this.app)?Promise.reject(hn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gt(this.app)?Promise.reject(hn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f6(this),t=new p6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await l6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ir(e)||this._popupRedirectResolver;oe(t,this,"argument-error"),this.redirectPersistenceManager=await vu.create(this,[ir(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,a);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(gt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&K4(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function St(n){return Re(n)}class YA{constructor(e){this.auth=e,this.observer=null,this.addObserver=cR(t=>this.observer=t)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y6(n){Yd=n}function yT(n){return Yd.loadJS(n)}function _6(){return Yd.recaptchaV2Script}function v6(){return Yd.recaptchaEnterpriseScript}function E6(){return Yd.gapiScript}function RD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=500,w6=6e4,Nm=1e12;class b6{constructor(e){this.auth=e,this.counter=Nm,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new S6(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Nm;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Nm;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Nm;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class I6{constructor(){this.enterprise=new A6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class A6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class S6{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;oe(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=R6(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},w6)},T6))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function R6(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const C6="recaptcha-enterprise",Yh="NO_RECAPTCHA";class CD{constructor(e){this.type=C6,this.auth=St(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{pD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new mD(f);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(f=>{h(f)})})}function a(l,u,h){const f=window.grecaptcha;KA(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(Yh)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new I6().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(h=>{if(!t&&KA(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=v6();f.length!==0&&(f+=h),yT(f).then(()=>{a(h,l,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function Nh(n,e,t,r=!1,a=!1){const l=new CD(n);let u;if(a)u=Yh;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function ba(n,e,t,r,a){var l,u;if(a==="EMAIL_PASSWORD_PROVIDER")if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await Nh(n,e,t,t==="getOobCode");return r(n,h)}else return r(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Nh(n,e,t,t==="getOobCode");return r(n,f)}else return Promise.reject(h)});else if(a==="PHONE_PROVIDER")if(!((u=n._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("PHONE_PROVIDER")){const h=await Nh(n,e,t);return r(n,h).catch(async f=>{var p;if(((p=n._getRecaptchaConfig())===null||p===void 0?void 0:p.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(f.code==="auth/missing-recaptcha-token"||f.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const _=await Nh(n,e,t,!1,!0);return r(n,_)}return Promise.reject(f)})}else{const h=await Nh(n,e,t,!1,!0);return r(n,h)}else return Promise.reject(a+" provider is not supported.")}async function D6(n){const e=St(n),t=await pD(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new mD(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new CD(e).verify()}function P6(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ir);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function O6(n,e,t){const r=St(n);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!(t!=null&&t.disableWarnings),l=DD(e),{host:u,port:h}=N6(e),f=h===null?"":`:${h}`,p={url:`${l}//${u}${f}/`},_=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe(Ia(p,r.config.emulator)&&Ia(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,a||x6()}function DD(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function N6(n){const e=DD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:XA(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:XA(u)}}}function XA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function x6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,t){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(n,e){return kt(n,"POST","/v1/accounts:resetPassword",Vt(n,e))}async function V6(n,e){return kt(n,"POST","/v1/accounts:update",e)}async function k6(n,e){return kt(n,"POST","/v1/accounts:signUp",e)}async function M6(n,e){return kt(n,"POST","/v1/accounts:update",Vt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L6(n,e){return _s(n,"POST","/v1/accounts:signInWithPassword",Vt(n,e))}async function ag(n,e){return kt(n,"POST","/v1/accounts:sendOobCode",Vt(n,e))}async function U6(n,e){return ag(n,e)}async function z6(n,e){return ag(n,e)}async function F6(n,e){return ag(n,e)}async function B6(n,e){return ag(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q6(n,e){return _s(n,"POST","/v1/accounts:signInWithEmailLink",Vt(n,e))}async function j6(n,e){return _s(n,"POST","/v1/accounts:signInWithEmailLink",Vt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends pc{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Id(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Id(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ba(e,t,"signInWithPassword",L6,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return q6(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ba(e,r,"signUpPassword",k6,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return j6(e,{idToken:t,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function is(n,e){return _s(n,"POST","/v1/accounts:signInWithIdp",Vt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="http://localhost";class wi extends pc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,l=dT(t,["providerId","signInMethod"]);if(!r||!a)return null;const u=new wi(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return is(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,is(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,is(e,t)}buildRequest(){const e={requestUri:H6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=sc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(n,e){return kt(n,"POST","/v1/accounts:sendVerificationCode",Vt(n,e))}async function G6(n,e){return _s(n,"POST","/v1/accounts:signInWithPhoneNumber",Vt(n,e))}async function K6(n,e){const t=await _s(n,"POST","/v1/accounts:signInWithPhoneNumber",Vt(n,e));if(t.temporaryProof)throw Bh(n,"account-exists-with-different-credential",t);return t}const Q6={USER_NOT_FOUND:"user-not-found"};async function $6(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return _s(n,"POST","/v1/accounts:signInWithPhoneNumber",Vt(n,t),Q6)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends pc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ko({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ko({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return G6(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return K6(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return $6(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l}=e;return!r&&!t&&!a&&!l?null:new Ko({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y6(n){const e=pu(Mh(n)).link,t=e?pu(Mh(e)).deep_link_id:null,r=pu(Mh(n)).deep_link_id;return(r?pu(Mh(r)).link:null)||r||t||e||n}class og{constructor(e){var t,r,a,l,u,h;const f=pu(Mh(e)),p=(t=f.apiKey)!==null&&t!==void 0?t:null,_=(r=f.oobCode)!==null&&r!==void 0?r:null,v=W6((a=f.mode)!==null&&a!==void 0?a:null);oe(p&&_&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=_,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=Y6(e);try{return new og(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.providerId=ja.PROVIDER_ID}static credential(e,t){return Id._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=og.parseLink(t);return oe(r,"argument-error"),Id._fromEmailAndCode(e,r.code,r.tenantId)}}ja.PROVIDER_ID="password";ja.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ja.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Eu extends gc{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return oe("providerId"in t&&"signInMethod"in t,"argument-error"),wi._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return oe(e.idToken||e.accessToken,"argument-error"),wi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Eu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Eu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:l,nonce:u,providerId:h}=e;if(!r&&!a&&!t&&!l||!h)return null;try{return new Eu(h)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends gc{constructor(){super("facebook.com")}static credential(e){return wi._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wi._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ci.credential(t,r)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends gc{constructor(){super("github.com")}static credential(e){return wi._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6="http://localhost";class Ju extends pc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return is(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,is(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,is(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:l}=t;return!r||!a||!l||r!==a?null:new Ju(r,l)}static _create(e,t){return new Ju(e,t)}buildRequest(){return{requestUri:X6,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="saml.";class Ip extends vs{constructor(e){oe(e.startsWith(Z6),"argument-error"),super(e)}static credentialFromResult(e){return Ip.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ip.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Ju.fromJSON(e);return oe(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Ju._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends gc{constructor(){super("twitter.com")}static credential(e,t){return wi._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return di.credential(t,r)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(n,e){return _s(n,"POST","/v1/accounts:signUp",Vt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await es._fromIdTokenResponse(e,r,a),u=JA(r);return new Sr({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=JA(r);return new Sr({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function JA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J6(n){var e;if(gt(n.app))return Promise.reject(hn(n));const t=St(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Sr({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await OD(t,{returnSecureToken:!0}),a=await Sr._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap extends Un{constructor(e,t,r,a){var l;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Ap.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Ap(e,t,r,a)}}function ND(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ap._fromErrorAndOperation(n,l,e,r):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ez(n,e){const t=Re(n);await lg(!0,t,e);const{providerUserInfo:r}=await t6(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=xD(r||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function _T(n,e,t=!1){const r=await cs(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sr._forOperation(n,"link",r)}async function lg(n,e,t){await bd(e);const r=xD(e.providerData),a=n===!1?"provider-already-linked":"no-such-provider";oe(r.has(t)===n,e.auth,a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(n,e,t=!1){const{auth:r}=n;if(gt(r.app))return Promise.reject(hn(r));const a="reauthenticate";try{const l=await cs(n,ND(r,a,e,n),t);oe(l.idToken,r,"internal-error");const u=sg(l.idToken);oe(u,r,"internal-error");const{sub:h}=u;return oe(n.uid===h,r,"user-mismatch"),Sr._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&vn(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(n,e,t=!1){if(gt(n.app))return Promise.reject(hn(n));const r="signIn",a=await ND(n,r,e),l=await Sr._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function ug(n,e){return kD(St(n),e)}async function MD(n,e){const t=Re(n);return await lg(!1,t,e.providerId),_T(t,e)}async function LD(n,e){return VD(Re(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tz(n,e){return _s(n,"POST","/v1/accounts:signInWithCustomToken",Vt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nz(n,e){if(gt(n.app))return Promise.reject(hn(n));const t=St(n),r=await tz(t,{token:e,returnSecureToken:!0}),a=await Sr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?vT._fromServerResponse(e,t):"totpInfo"in t?ET._fromServerResponse(e,t):vn(e,"internal-error")}}class vT extends Xd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new vT(t)}}class ET extends Xd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new ET(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(n,e,t){var r;oe(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),oe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),oe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(oe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(oe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(n){const e=St(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rz(n,e,t){const r=St(n),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&cg(r,a,t),await ba(r,a,"getOobCode",z6,"EMAIL_PASSWORD_PROVIDER")}async function iz(n,e,t){await PD(Re(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&TT(n),r})}async function sz(n,e){await M6(Re(n),{oobCode:e})}async function UD(n,e){const t=Re(n),r=await PD(t,{oobCode:e}),a=r.requestType;switch(oe(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(r.mfaInfo,t,"internal-error");default:oe(r.email,t,"internal-error")}let l=null;return r.mfaInfo&&(l=Xd._fromServerResponse(St(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:l},operation:a}}async function az(n,e){const{data:t}=await UD(Re(n),e);return t.email}async function oz(n,e,t){if(gt(n.app))return Promise.reject(hn(n));const r=St(n),u=await ba(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OD,"EMAIL_PASSWORD_PROVIDER").catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&TT(n),f}),h=await Sr._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function lz(n,e,t){return gt(n.app)?Promise.reject(hn(n)):ug(Re(n),ja.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&TT(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(n,e,t){const r=St(n),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(u,h){oe(h.handleCodeInApp,r,"argument-error"),h&&cg(r,u,h)}l(a,t),await ba(r,a,"getOobCode",F6,"EMAIL_PASSWORD_PROVIDER")}function cz(n,e){const t=og.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function hz(n,e,t){if(gt(n.app))return Promise.reject(hn(n));const r=Re(n),a=ja.credentialWithLink(e,t||wd());return oe(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ug(r,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dz(n,e){return kt(n,"POST","/v1/accounts:createAuthUri",Vt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fz(n,e){const t=pT()?wd():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await dz(Re(n),r);return a||[]}async function mz(n,e){const t=Re(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&cg(t.auth,a,e);const{email:l}=await U6(t.auth,a);l!==n.email&&await n.reload()}async function pz(n,e,t){const r=Re(n),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&cg(r.auth,l,t);const{email:u}=await B6(r.auth,l);u!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gz(n,e){return kt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yz(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Re(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await cs(r,gz(r.auth,l));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function _z(n,e){const t=Re(n);return gt(t.auth.app)?Promise.reject(hn(t.auth)):zD(t,e,null)}function vz(n,e){return zD(Re(n),null,e)}async function zD(n,e,t){const{auth:r}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const u=await cs(n,V6(r,l));await n._updateTokensIfNecessary(u,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(n){var e,t;if(!n)return null;const{providerId:r}=n,a=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},l=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const u=(t=(e=sg(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(u){const h=u!=="anonymous"&&u!=="custom"?u:null;return new Tu(l,h)}}if(!r)return null;switch(r){case"facebook.com":return new Tz(l,a);case"github.com":return new wz(l,a);case"google.com":return new bz(l,a);case"twitter.com":return new Iz(l,a,n.screenName||null);case"custom":case"anonymous":return new Tu(l,null);default:return new Tu(l,r,a)}}class Tu{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class FD extends Tu{constructor(e,t,r,a){super(e,t,r),this.username=a}}class Tz extends Tu{constructor(e,t){super(e,"facebook.com",t)}}class wz extends FD{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class bz extends Tu{constructor(e,t){super(e,"google.com",t)}}class Iz extends FD{constructor(e,t,r){super(e,"twitter.com",t,r)}}function Az(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:Ez(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Lo("enroll",e,t)}static _fromMfaPendingCredential(e){return new Lo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Lo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Lo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=St(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(h=>Xd._fromServerResponse(r,h));oe(a.mfaPendingCredential,r,"internal-error");const u=Lo._fromMfaPendingCredential(a.mfaPendingCredential);return new wT(u,l,async h=>{const f=await h._process(r,u);delete a.mfaInfo,delete a.mfaPendingCredential;const p=Object.assign(Object.assign({},a),{idToken:f.idToken,refreshToken:f.refreshToken});switch(t.operationType){case"signIn":const _=await Sr._fromIdTokenResponse(r,t.operationType,p);return await r._updateCurrentUser(_.user),_;case"reauthenticate":return oe(t.user,r,"internal-error"),Sr._forOperation(t.user,t.operationType,p);default:vn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Sz(n,e){var t;const r=Re(n),a=e;return oe(e.customData.operationType,r,"argument-error"),oe((t=a.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),wT._fromError(r,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:start",Vt(n,e))}function Rz(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(n,e))}function Cz(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(n,e))}class bT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Xd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new bT(e)}async getSession(){return Lo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),l=await cs(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await cs(this.user,Cz(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const z_=new WeakMap;function Dz(n){const e=Re(n);return z_.has(e)||z_.set(e,bT._fromUser(e)),z_.get(e)}const Sp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sp,"1"),this.storage.removeItem(Sp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz=1e3,Oz=10;class qD extends BD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);h6()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Oz):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Pz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qD.type="LOCAL";const IT=qD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD extends BD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jD.type="SESSION";const nl=jD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new hg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(u).map(async p=>p(t.origin,l)),f=await Nz(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,f)=>{const p=Zd("",20);a.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(v){const w=v;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(w.data.response);break;default:clearTimeout(_),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return window}function Vz(n){Gt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(){return typeof Gt().WorkerGlobalScope<"u"&&typeof Gt().importScripts=="function"}async function kz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mz(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Lz(){return AT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="firebaseLocalStorageDb",Uz=1,Rp="firebaseLocalStorage",GD="fbase_key";class Jd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dg(n,e){return n.transaction([Rp],e?"readwrite":"readonly").objectStore(Rp)}function zz(){const n=indexedDB.deleteDatabase(HD);return new Jd(n).toPromise()}function Ov(){const n=indexedDB.open(HD,Uz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Rp,{keyPath:GD})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Rp)?e(r):(r.close(),await zz(),e(await Ov()))})})}async function tS(n,e,t){const r=dg(n,!0).put({[GD]:e,value:t});return new Jd(r).toPromise()}async function Fz(n,e){const t=dg(n,!1).get(e),r=await new Jd(t).toPromise();return r===void 0?null:r.value}function nS(n,e){const t=dg(n,!0).delete(e);return new Jd(t).toPromise()}const Bz=800,qz=3;class KD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ov(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>qz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hg._getInstance(Lz()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await kz(),!this.activeServiceWorker)return;this.sender=new xz(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ov();return await tS(e,Sp,"1"),await nS(e,Sp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tS(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Fz(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=dg(a,!1).getAll();return new Jd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KD.type="LOCAL";const Ad=KD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n,e){return kt(n,"POST","/v2/accounts/mfaSignIn:start",Vt(n,e))}function jz(n,e){return kt(n,"POST","/v2/accounts/mfaSignIn:finalize",Vt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=RD("rcb"),Hz=new Qd(3e4,6e4);class Gz{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Gt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return oe(Kz(t),e,"argument-error"),this.shouldResolveImmediately(t)&&GA(Gt().grecaptcha)?Promise.resolve(Gt().grecaptcha):new Promise((r,a)=>{const l=Gt().setTimeout(()=>{a(Zt(e,"network-request-failed"))},Hz.get());Gt()[F_]=()=>{Gt().clearTimeout(l),delete Gt()[F_];const h=Gt().grecaptcha;if(!h||!GA(h)){a(Zt(e,"internal-error"));return}const f=h.render;h.render=(p,_)=>{const v=f(p,_);return this.counter++,v},this.hostLanguage=t,r(h)};const u=`${_6()}?${sc({onload:F_,render:"explicit",hl:t})}`;yT(u).catch(()=>{clearTimeout(l),a(Zt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Gt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Kz(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class Qz{async load(e){return new b6(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="recaptcha",$z={theme:"light",type:"image"};let Wz=class{constructor(e,t,r=Object.assign({},$z)){this.parameters=r,this.type=Xh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=St(e),this.isInvisible=this.parameters.size==="invisible",oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;oe(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qz:new Gz,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const l=u=>{u&&(this.tokenChangeListeners.delete(l),a(u))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Gt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){oe(pT()&&!AT(),this.auth,"internal-error"),await Yz(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await J4(this.auth);oe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Yz(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ko._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Xz(n,e,t){if(gt(n.app))return Promise.reject(hn(n));const r=St(n),a=await fg(r,e,Re(t));return new ST(a,l=>ug(r,l))}async function Zz(n,e,t){const r=Re(n);await lg(!1,r,"phone");const a=await fg(r.auth,e,Re(t));return new ST(a,l=>MD(r,l))}async function Jz(n,e,t){const r=Re(n);if(gt(r.auth.app))return Promise.reject(hn(r.auth));const a=await fg(r.auth,e,Re(t));return new ST(a,l=>LD(r,l))}async function fg(n,e,t){var r;if(!n._getRecaptchaConfig())try{await D6(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a){oe(l.type==="enroll",n,"internal-error");const u={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ba(n,u,"mfaSmsEnrollment",async(_,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===Yh){oe((t==null?void 0:t.type)===Xh,_,"argument-error");const w=await B_(_,v,t);return eS(_,w)}return eS(_,v)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneSessionInfo.sessionInfo}else{oe(l.type==="signin",n,"internal-error");const u=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;oe(u,n,"missing-multi-factor-info");const h={mfaPendingCredential:l.credential,mfaEnrollmentId:u,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ba(n,h,"mfaSmsSignIn",async(v,w)=>{if(w.phoneSignInInfo.captchaResponse===Yh){oe((t==null?void 0:t.type)===Xh,v,"argument-error");const R=await B_(v,w,t);return rS(v,R)}return rS(v,w)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ba(n,l,"sendVerificationCode",async(p,_)=>{if(_.captchaResponse===Yh){oe((t==null?void 0:t.type)===Xh,p,"argument-error");const v=await B_(p,_,t);return ZA(p,v)}return ZA(p,_)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).sessionInfo}}finally{t==null||t._reset()}}async function eF(n,e){const t=Re(n);if(gt(t.auth.app))return Promise.reject(hn(t.auth));await _T(t,e)}async function B_(n,e,t){oe(t.type===Xh,n,"argument-error");const r=await t.verify();oe(typeof r=="string",n,"argument-error");const a=Object.assign({},e);if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.captchaResponse,h=a.phoneEnrollmentInfo.clientType,f=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:u,clientType:h,recaptchaVersion:f}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,u=a.phoneSignInInfo.clientType,h=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:u,recaptchaVersion:h}}),a}else return Object.assign(a,{recaptchaToken:r}),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl=class $m{constructor(e){this.providerId=$m.PROVIDER_ID,this.auth=St(e)}verifyPhoneNumber(e,t){return fg(this.auth,e,Re(t))}static credential(e,t){return Ko._fromVerification(e,t)}static credentialFromResult(e){const t=e;return $m.credentialFromTaggedObject(t)}static credentialFromError(e){return $m.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Ko._fromTokenResponse(t,r):null}};rl.PROVIDER_ID="phone";rl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(n,e){return e?ir(e):(oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT extends pc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return is(e,this._buildIdpRequest())}_linkToIdToken(e,t){return is(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return is(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tF(n){return kD(n.auth,new RT(n),n.bypassAuthState)}function nF(n){const{auth:e,user:t}=n;return oe(t,e,"internal-error"),VD(t,new RT(n),n.bypassAuthState)}async function rF(n){const{auth:e,user:t}=n;return oe(t,e,"internal-error"),_T(t,new RT(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tF;case"linkViaPopup":case"linkViaRedirect":return rF;case"reauthViaPopup":case"reauthViaRedirect":return nF;default:vn(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=new Qd(2e3,1e4);async function sF(n,e,t){if(gt(n.app))return Promise.reject(Zt(n,"operation-not-supported-in-this-environment"));const r=St(n);mc(n,e,vs);const a=cl(r,t);return new ts(r,"signInViaPopup",e,a).executeNotNull()}async function aF(n,e,t){const r=Re(n);if(gt(r.auth.app))return Promise.reject(Zt(r.auth,"operation-not-supported-in-this-environment"));mc(r.auth,e,vs);const a=cl(r.auth,t);return new ts(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function oF(n,e,t){const r=Re(n);mc(r.auth,e,vs);const a=cl(r.auth,t);return new ts(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class ts extends QD{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,ts.currentPopupAction&&ts.currentPopupAction.cancel(),ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=Zd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iF.get())};e()}}ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF="pendingRedirect",Zh=new Map;class uF extends QD{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zh.get(this.auth._key());if(!e){try{const r=await cF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zh.set(this.auth._key(),e)}return this.bypassAuthState||Zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cF(n,e){const t=WD(e),r=$D(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function CT(n,e){return $D(n)._set(WD(e),"true")}function hF(){Zh.clear()}function DT(n,e){Zh.set(n._key(),e)}function $D(n){return ir(n._redirectPersistence)}function WD(n){return Go(lF,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(n,e,t){return fF(n,e,t)}async function fF(n,e,t){if(gt(n.app))return Promise.reject(hn(n));const r=St(n);mc(n,e,vs),await r._initializationPromise;const a=cl(r,t);return await CT(a,r),a._openRedirect(r,e,"signInViaRedirect")}function mF(n,e,t){return pF(n,e,t)}async function pF(n,e,t){const r=Re(n);if(mc(r.auth,e,vs),gt(r.auth.app))return Promise.reject(hn(r.auth));await r.auth._initializationPromise;const a=cl(r.auth,t);await CT(a,r.auth);const l=await YD(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",l)}function gF(n,e,t){return yF(n,e,t)}async function yF(n,e,t){const r=Re(n);mc(r.auth,e,vs),await r.auth._initializationPromise;const a=cl(r.auth,t);await lg(!1,r,e.providerId),await CT(a,r.auth);const l=await YD(r);return a._openRedirect(r.auth,e,"linkViaRedirect",l)}async function _F(n,e){return await St(n)._initializationPromise,mg(n,e,!1)}async function mg(n,e,t=!1){if(gt(n.app))return Promise.reject(hn(n));const r=St(n),a=cl(r,e),u=await new uF(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function YD(n){const e=Zd(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=10*60*1e3;class XD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ZD(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zt(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vF&&this.cachedEventUids.clear(),this.cachedEventUids.has(iS(e))}saveEventToCache(e){this.cachedEventUids.add(iS(e)),this.lastProcessedEventTime=Date.now()}}function iS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZD({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZD(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(n,e={}){return kt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wF=/^https?/;async function bF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await JD(n);for(const t of e)try{if(IF(t))return}catch{}vn(n,"unauthorized-domain")}function IF(n){const e=wd(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!wF.test(t))return!1;if(TF.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=new Qd(3e4,6e4);function sS(){const n=Gt().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function SF(n){return new Promise((e,t)=>{var r,a,l;function u(){sS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sS(),t(Zt(n,"network-request-failed"))},timeout:AF.get()})}if(!((a=(r=Gt().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Gt().gapi)===null||l===void 0)&&l.load)u();else{const h=RD("iframefcb");return Gt()[h]=()=>{gapi.load?u():t(Zt(n,"network-request-failed"))},yT(`${E6()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Wm=null,e})}let Wm=null;function RF(n){return Wm=Wm||SF(n),Wm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=new Qd(5e3,15e3),DF="__/auth/iframe",PF="emulator/auth/iframe",OF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xF(n){const e=n.config;oe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?gT(e,PF):`https://${n.config.authDomain}/${DF}`,r={apiKey:e.apiKey,appName:n.name,v:La},a=NF.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${sc(r).slice(1)}`}async function VF(n){const e=await RF(n),t=Gt().gapi;return oe(t,n,"internal-error"),e.open({where:document.body,url:xF(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OF,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=Zt(n,"network-request-failed"),h=Gt().setTimeout(()=>{l(u)},CF.get());function f(){Gt().clearTimeout(h),a(r)}r.ping(f).then(f,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MF=500,LF=600,UF="_blank",zF="http://localhost";class aS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FF(n,e,t,r=MF,a=LF){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},kF),{width:r.toString(),height:a.toString(),top:l,left:u}),p=At().toLowerCase();t&&(h=TD(p)?UF:t),vD(p)&&(e=e||zF,f.scrollbars="yes");const _=Object.entries(f).reduce((w,[R,C])=>`${w}${R}=${C},`,"");if(c6(p)&&h!=="_self")return BF(e||"",h),new aS(null);const v=window.open(e||"",h,_);oe(v,n,"popup-blocked");try{v.focus()}catch{}return new aS(v)}function BF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="__/auth/handler",jF="emulator/auth/handler",HF=encodeURIComponent("fac");async function Nv(n,e,t,r,a,l){oe(n.config.authDomain,n,"auth-domain-config-required"),oe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:La,eventId:a};if(e instanceof vs){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",ZV(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries(l||{}))u[_]=v}if(e instanceof gc){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),p=f?`#${HF}=${encodeURIComponent(f)}`:"";return`${GF(n)}?${sc(h).slice(1)}${p}`}function GF({config:n}){return n.emulator?gT(n,jF):`https://${n.authDomain}/${qF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="webStorageSupport";class KF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nl,this._completeRedirectFn=mg,this._overrideRedirectResult=DT}async _openPopup(e,t,r,a){var l;zr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Nv(e,t,r,wd(),a);return FF(e,u,Zd())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Nv(e,t,r,wd(),a);return Vz(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(zr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await VF(e),r=new XD(e);return t.register("authEvent",a=>(oe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(q_,{type:q_},a=>{var l;const u=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[q_];u!==void 0&&t(!!u),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return AD()||ED()||Wd()}}const QF=KF;class $F{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return pi("unexpected MultiFactorSessionType")}}}class PT extends $F{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new PT(e)}_finalizeEnroll(e,t,r){return Rz(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return jz(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class eP{constructor(){}static assertion(e){return PT._fromCredential(e)}}eP.FACTOR_ID="phone";var oS="@firebase/auth",lS="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XF(n){Ra(new _i("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;oe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SD(n)},p=new g6(r,a,l,f);return P6(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ra(new _i("auth-internal",e=>{const t=St(e.getProvider("auth").getImmediate());return(r=>new WF(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(oS,lS,YF(n)),Lr(oS,lS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=5*60;qV("authIdTokenMaxAge");function JF(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}y6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=Zt("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",JF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XF("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=2e3;async function t5(n,e,t){var r;const{BuildInfo:a}=il();zr(e.sessionId,"AuthEvent did not contain a session ID");const l=await a5(e.sessionId),u={};return Wd()?u.ibi=a.packageName:$d()?u.apn=a.packageName:vn(n,"operation-not-supported-in-this-environment"),a.displayName&&(u.appDisplayName=a.displayName),u.sessionId=l,Nv(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,u)}async function n5(n){const{BuildInfo:e}=il(),t={};Wd()?t.iosBundleId=e.packageName:$d()?t.androidPackageName=e.packageName:vn(n,"operation-not-supported-in-this-environment"),await JD(n,t)}function r5(n){const{cordova:e}=il();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(n):a=e.InAppBrowser.open(n,u6()?"_blank":"_system","location=yes"),t(a)})})}async function i5(n,e,t){const{cordova:r}=il();let a=()=>{};try{await new Promise((l,u)=>{let h=null;function f(){var v;l();const w=(v=r.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof w=="function"&&w(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function p(){h||(h=window.setTimeout(()=>{u(Zt(n,"redirect-cancelled-by-user"))},e5))}function _(){(document==null?void 0:document.visibilityState)==="visible"&&p()}e.addPassiveListener(f),document.addEventListener("resume",p,!1),$d()&&document.addEventListener("visibilitychange",_,!1),a=()=>{e.removePassiveListener(f),document.removeEventListener("resume",p,!1),document.removeEventListener("visibilitychange",_,!1),h&&window.clearTimeout(h)}})}finally{a()}}function s5(n){var e,t,r,a,l,u,h,f,p,_;const v=il();oe(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof((t=v==null?void 0:v.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe(typeof((l=(a=(r=v==null?void 0:v.cordova)===null||r===void 0?void 0:r.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof((f=(h=(u=v==null?void 0:v.cordova)===null||u===void 0?void 0:u.plugins)===null||h===void 0?void 0:h.browsertab)===null||f===void 0?void 0:f.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof((_=(p=v==null?void 0:v.cordova)===null||p===void 0?void 0:p.InAppBrowser)===null||_===void 0?void 0:_.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function a5(n){const e=o5(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function o5(n){if(zr(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=20;class u5 extends XD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function c5(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:f5(),postBody:null,tenantId:n.tenantId,error:Zt(n,"no-auth-event")}}function h5(n,e){return xv()._set(Vv(n),e)}async function uS(n){const e=await xv()._get(Vv(n));return e&&await xv()._remove(Vv(n)),e}function d5(n,e){var t,r;const a=p5(e);if(a.includes("/__/auth/callback")){const l=Ym(a),u=l.firebaseError?m5(decodeURIComponent(l.firebaseError)):null,h=(r=(t=u==null?void 0:u.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],f=h?Zt(h):null;return f?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:f,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:a,postBody:null}}return null}function f5(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<l5;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function xv(){return ir(IT)}function Vv(n){return Go("authEvent",n.config.apiKey,n.name)}function m5(n){try{return JSON.parse(n)}catch{return null}}function p5(n){const e=Ym(n),t=e.link?decodeURIComponent(e.link):void 0,r=Ym(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Ym(a).link||a||r||t||n}function Ym(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return pu(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=500;class y5{constructor(){this._redirectPersistence=nl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mg,this._overrideRedirectResult=DT}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new u5(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){vn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){s5(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),hF(),await this._originValidation(e);const u=c5(e,r,a);await h5(e,u);const h=await t5(e,u,t),f=await r5(h);return i5(e,l,f)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=n5(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:l}=il(),u=setTimeout(async()=>{await uS(e),t.onEvent(cS())},g5),h=async _=>{clearTimeout(u);const v=await uS(e);let w=null;v&&(_!=null&&_.url)&&(w=d5(v,_.url)),t.onEvent(w||cS())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,h);const f=a,p=`${l.packageName.toLowerCase()}://`;il().handleOpenURL=async _=>{if(_.toLowerCase().startsWith(p)&&h({url:_}),typeof f=="function")try{f(_)}catch(v){console.error(v)}}}}const _5=y5;function cS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Zt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(n,e){St(n)._logFramework(e)}var E5="@firebase/auth-compat",T5="0.5.19";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=1e3;function Jh(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function b5(){return Jh()==="http:"||Jh()==="https:"}function tP(n=At()){return!!((Jh()==="file:"||Jh()==="ionic:"||Jh()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function I5(){return Xv()||Yv()}function A5(){return lR()&&(document==null?void 0:document.documentMode)===11}function S5(n=At()){return/Edge\/\d+/.test(n)}function R5(n=At()){return A5()||S5(n)}function nP(){try{const n=self.localStorage,e=Zd();if(n)return n.setItem(e,"1"),n.removeItem(e),R5()?td():!0}catch{return OT()&&td()}return!1}function OT(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function j_(){return(b5()||oR()||tP())&&!I5()&&nP()&&!OT()}function rP(){return tP()&&typeof document<"u"}async function C5(){return rP()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},w5);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function D5(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr={LOCAL:"local",NONE:"none",SESSION:"session"},xh=oe,iP="persistence";function P5(n,e){if(xh(Object.values(rr).includes(e),n,"invalid-persistence-type"),Xv()){xh(e!==rr.SESSION,n,"unsupported-persistence-type");return}if(Yv()){xh(e===rr.NONE,n,"unsupported-persistence-type");return}if(OT()){xh(e===rr.NONE||e===rr.LOCAL&&td(),n,"unsupported-persistence-type");return}xh(e===rr.NONE||nP(),n,"unsupported-persistence-type")}async function kv(n){await n._initializationPromise;const e=sP(),t=Go(iP,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function O5(n,e){const t=sP();if(!t)return[];const r=Go(iP,n,e);switch(t.getItem(r)){case rr.NONE:return[Zu];case rr.LOCAL:return[Ad,nl];case rr.SESSION:return[nl];default:return[]}}function sP(){var n;try{return((n=D5())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=oe;class _a{constructor(){this.browserResolver=ir(QF),this.cordovaResolver=ir(_5),this.underlyingResolver=null,this._redirectPersistence=nl,this._completeRedirectFn=mg,this._overrideRedirectResult=DT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return rP()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return N5(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await C5();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(n){return n.unwrap()}function x5(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(n){return oP(n)}function k5(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const a=e;a.resolver=new M5(n,Sz(n,e))}else if(r){const a=oP(e),l=e;a&&(l.credential=a,l.tenantId=r.tenantId||void 0,l.email=r.email||void 0,l.phoneNumber=r.phoneNumber||void 0)}}function oP(n){const{_tokenResponse:e}=n instanceof Un?n.customData:n;if(!e)return null;if(!(n instanceof Un)&&"temporaryProof"in e&&"phoneNumber"in e)return rl.credentialFromResult(n);const t=e.providerId;if(!t||t===Oh.PASSWORD)return null;let r;switch(t){case Oh.GOOGLE:r=ci;break;case Oh.FACEBOOK:r=ui;break;case Oh.GITHUB:r=hi;break;case Oh.TWITTER:r=di;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:u,pendingToken:h,nonce:f}=e;return!l&&!u&&!a&&!h?null:h?t.startsWith("saml.")?Ju._create(t,h):wi._fromParams({providerId:t,signInMethod:t,pendingToken:h,idToken:a,accessToken:l}):new Eu(t).credential({idToken:a,accessToken:l,rawNonce:f})}return n instanceof Un?r.credentialFromError(n):r.credentialFromResult(n)}function Gn(n,e){return e.catch(t=>{throw t instanceof Un&&k5(n,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:V5(t),additionalUserInfo:Az(t),user:ns.getOrCreate(a)}})}async function Mv(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Gn(n,t.confirm(r))}}class M5{constructor(e,t){this.resolver=t,this.auth=x5(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Gn(aP(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this._delegate=e,this.multiFactor=Dz(e)}static getOrCreate(e){return ns.USER_MAP.has(e)||ns.USER_MAP.set(e,new ns(e)),ns.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Gn(this.auth,MD(this._delegate,e))}async linkWithPhoneNumber(e,t){return Mv(this.auth,Zz(this._delegate,e,t))}async linkWithPopup(e){return Gn(this.auth,oF(this._delegate,e,_a))}async linkWithRedirect(e){return await kv(St(this.auth)),gF(this._delegate,e,_a)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Gn(this.auth,LD(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Mv(this.auth,Jz(this._delegate,e,t))}reauthenticateWithPopup(e){return Gn(this.auth,aF(this._delegate,e,_a))}async reauthenticateWithRedirect(e){return await kv(St(this.auth)),mF(this._delegate,e,_a)}sendEmailVerification(e){return mz(this._delegate,e)}async unlink(e){return await ez(this._delegate,e),this}updateEmail(e){return _z(this._delegate,e)}updatePassword(e){return vz(this._delegate,e)}updatePhoneNumber(e){return eF(this._delegate,e)}updateProfile(e){return yz(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return pz(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ns.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=oe;class Lv{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Vh(r,"invalid-api-key",{appName:e.name}),Vh(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?_a:void 0;this._delegate=t.initialize({options:{persistence:L5(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(H4),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ns.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){O6(this._delegate,e,t)}applyActionCode(e){return sz(this._delegate,e)}checkActionCode(e){return UD(this._delegate,e)}confirmPasswordReset(e,t){return iz(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Gn(this._delegate,oz(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return fz(this._delegate,e)}isSignInWithEmailLink(e){return cz(this._delegate,e)}async getRedirectResult(){Vh(j_(),this._delegate,"operation-not-supported-in-this-environment");const e=await _F(this._delegate,_a);return e?Gn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){v5(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:l,complete:u}=hS(e,t,r);return this._delegate.onAuthStateChanged(a,l,u)}onIdTokenChanged(e,t,r){const{next:a,error:l,complete:u}=hS(e,t,r);return this._delegate.onIdTokenChanged(a,l,u)}sendSignInLinkToEmail(e,t){return uz(this._delegate,e,t)}sendPasswordResetEmail(e,t){return rz(this._delegate,e,t||void 0)}async setPersistence(e){P5(this._delegate,e);let t;switch(e){case rr.SESSION:t=nl;break;case rr.LOCAL:t=await ir(Ad)._isAvailable()?Ad:IT;break;case rr.NONE:t=Zu;break;default:return vn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Gn(this._delegate,J6(this._delegate))}signInWithCredential(e){return Gn(this._delegate,ug(this._delegate,e))}signInWithCustomToken(e){return Gn(this._delegate,nz(this._delegate,e))}signInWithEmailAndPassword(e,t){return Gn(this._delegate,lz(this._delegate,e,t))}signInWithEmailLink(e,t){return Gn(this._delegate,hz(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Mv(this._delegate,Xz(this._delegate,e,t))}async signInWithPopup(e){return Vh(j_(),this._delegate,"operation-not-supported-in-this-environment"),Gn(this._delegate,sF(this._delegate,e,_a))}async signInWithRedirect(e){return Vh(j_(),this._delegate,"operation-not-supported-in-this-environment"),await kv(this._delegate),dF(this._delegate,e,_a)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return az(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Lv.Persistence=rr;function hS(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const a=r;return{next:u=>a(u&&ns.getOrCreate(u)),error:e,complete:t}}function L5(n,e){const t=O5(n,e);if(typeof self<"u"&&!t.includes(Ad)&&t.push(Ad),typeof window<"u")for(const r of[IT,nl])t.includes(r)||t.push(r);return t.includes(Zu)||t.push(Zu),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{static credential(e,t){return rl.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new rl(aP(fs.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}NT.PHONE_SIGN_IN_METHOD=rl.PHONE_SIGN_IN_METHOD;NT.PROVIDER_ID=rl.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5=oe;class z5{constructor(e,t,r=fs.app()){var a;U5((a=r.options)===null||a===void 0?void 0:a.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new Wz(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="auth-compat";function B5(n){n.INTERNAL.registerComponent(new _i(F5,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Lv(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lu.EMAIL_SIGNIN,PASSWORD_RESET:lu.PASSWORD_RESET,RECOVER_EMAIL:lu.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:lu.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:lu.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:lu.VERIFY_EMAIL}},EmailAuthProvider:ja,FacebookAuthProvider:ui,GithubAuthProvider:hi,GoogleAuthProvider:ci,OAuthProvider:Eu,SAMLAuthProvider:Ip,PhoneAuthProvider:NT,PhoneMultiFactorGenerator:eP,RecaptchaVerifier:z5,TwitterAuthProvider:di,Auth:Lv,AuthCredential:pc,Error:Un}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(E5,T5)}B5(fs);const q5={apiKey:"AIzaSyDC5_FmT3C61uoHQ5Luo-2x1-SUrJQ-bsU",authDomain:"requirements-d7c6c.firebaseapp.com",projectId:"requirements-d7c6c",storageBucket:"requirements-d7c6c.firebasestorage.app",messagingSenderId:"29631359360",appId:"1:529631359360:web:7595186f69d9143a221165",measurementId:"G-T383H31PB3"};fs.initializeApp(q5);const j5=fs.firestore(),kh=fs.auth();var lP=(n=>(n.USERS="teamusers",n.MATCHING="teammatching",n.MYTEAM="myteam",n.CHATING="chating",n.MY="my",n))(lP||{});const uu=j5.collection(lP.USERS),H5=({children:n})=>{const[e,t]=Q.useState(jS.user),[r,a]=Q.useState(!1),[l,u]=Q.useTransition(),h=Q.useCallback(C=>{u(async()=>{const V=(await uu.doc(C).get()).data();t(V||null)})},[]);Q.useEffect(()=>{//! Listener
return kh.onAuthStateChanged(N=>{if(N){//! 유저 정보 가져오기
h(N.uid)}else{//! 유저가 없을 때의 로직
t(null)}setTimeout(()=>{a(!0)},2e3)})},[h]);const f=Q.useCallback(()=>new Promise(C=>u(async()=>{try{await kh.signOut(),t(null),C({success:!0})}catch(N){C(N)}})),[]),p=Q.useCallback((C,N)=>new Promise(V=>u(async()=>{try{const z=await kh.signInWithEmailAndPassword(C,N);if(!z.user)return V({message:"No Such User"});if(!(await uu.doc(z.user.uid).get()).data())return V({message:"통합회원입니다. 간략한 정보를 입력해주세요.",data:z.user});V({success:!0})}catch(z){V(z)}})),[]),_=Q.useCallback((C,N,V)=>new Promise(z=>u(async()=>{try{let Y="";if(V)Y=V;else{const ue=await kh.createUserWithEmailAndPassword(C.email,N);if(!ue.user)return z({message:"회원가입에 실패했습니다."});Y=ue.user.uid}const K={...C,uid:Y};await uu.doc(Y).set(K),t(K),z({success:!0})}catch(Y){z(Y)}})),[]),v=Q.useCallback(async()=>new Promise(C=>u(async()=>{try{const N=new fs.auth.GoogleAuthProvider,V=await kh.signInWithPopup(N);if(!V.user)return C({message:"No such User"});const Y=(await uu.doc(V.user.uid).get()).data();if(Y)return t(Y),C({message:"통합회원입니다. 기본정보를 입력해주세요.",success:!0});C({message:"기본정보를 입력해야합니다.",data:V.user})}catch(N){console.log({error:N}),C(N)}})),[]),w=Q.useCallback(async C=>new Promise(N=>u(async()=>{try{await uu.doc(e==null?void 0:e.uid).update(C),t(C),N({success:!0})}catch(V){N(V)}})),[e]),R=Q.useCallback(async(C,N)=>new Promise(V=>u(async()=>{try{await uu.doc(e==null?void 0:e.uid).update({[C]:N}),t(z=>z&&{...z,[C]:N}),V({success:!0})}catch(z){V(z)}})),[e]);return Ae.jsx(HS.Provider,{value:{initialized:r,signout:f,isPending:l,signin:p,signup:_,user:e,signinWithProvider:v,updateUser:w,updateUserDetail:R},children:n})};var pg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gg=typeof window>"u"||"Deno"in globalThis;function xr(){}function G5(n,e){return typeof n=="function"?n(e):n}function K5(n){return typeof n=="number"&&n>=0&&n!==1/0}function Q5(n,e){return Math.max(n+(e||0)-Date.now(),0)}function dS(n,e){return typeof n=="function"?n(e):n}function $5(n,e){return typeof n=="function"?n(e):n}function fS(n,e){const{type:t="all",exact:r,fetchStatus:a,predicate:l,queryKey:u,stale:h}=n;if(u){if(r){if(e.queryHash!==xT(u,e.options))return!1}else if(!Rd(e.queryKey,u))return!1}if(t!=="all"){const f=e.isActive();if(t==="active"&&!f||t==="inactive"&&f)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||a&&a!==e.state.fetchStatus||l&&!l(e))}function mS(n,e){const{exact:t,status:r,predicate:a,mutationKey:l}=n;if(l){if(!e.options.mutationKey)return!1;if(t){if(Sd(e.options.mutationKey)!==Sd(l))return!1}else if(!Rd(e.options.mutationKey,l))return!1}return!(r&&e.state.status!==r||a&&!a(e))}function xT(n,e){return((e==null?void 0:e.queryKeyHashFn)||Sd)(n)}function Sd(n){return JSON.stringify(n,(e,t)=>Uv(t)?Object.keys(t).sort().reduce((r,a)=>(r[a]=t[a],r),{}):t)}function Rd(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Rd(n[t],e[t])):!1}function uP(n,e){if(n===e)return n;const t=pS(n)&&pS(e);if(t||Uv(n)&&Uv(e)){const r=t?n:Object.keys(n),a=r.length,l=t?e:Object.keys(e),u=l.length,h=t?[]:{};let f=0;for(let p=0;p<u;p++){const _=t?p:l[p];(!t&&r.includes(_)||t)&&n[_]===void 0&&e[_]===void 0?(h[_]=void 0,f++):(h[_]=uP(n[_],e[_]),h[_]===n[_]&&n[_]!==void 0&&f++)}return a===u&&f===a?n:h}return e}function xB(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function pS(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Uv(n){if(!gS(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!gS(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function gS(n){return Object.prototype.toString.call(n)==="[object Object]"}function W5(n){return new Promise(e=>{setTimeout(e,n)})}function Y5(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?uP(n,e):e}function X5(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Z5(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var VT=Symbol();function cP(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===VT?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Uo,ha,wu,vS,J5=(vS=class extends pg{constructor(){super();Je(this,Uo);Je(this,ha);Je(this,wu);Ve(this,wu,e=>{if(!gg&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ee(this,ha)||this.setEventListener(ee(this,wu))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,ha))==null||e.call(this),Ve(this,ha,void 0))}setEventListener(e){var t;Ve(this,wu,e),(t=ee(this,ha))==null||t.call(this),Ve(this,ha,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ee(this,Uo)!==e&&(Ve(this,Uo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ee(this,Uo)=="boolean"?ee(this,Uo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Uo=new WeakMap,ha=new WeakMap,wu=new WeakMap,vS),hP=new J5,bu,da,Iu,ES,eB=(ES=class extends pg{constructor(){super();Je(this,bu,!0);Je(this,da);Je(this,Iu);Ve(this,Iu,e=>{if(!gg&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ee(this,da)||this.setEventListener(ee(this,Iu))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,da))==null||e.call(this),Ve(this,da,void 0))}setEventListener(e){var t;Ve(this,Iu,e),(t=ee(this,da))==null||t.call(this),Ve(this,da,e(this.setOnline.bind(this)))}setOnline(e){ee(this,bu)!==e&&(Ve(this,bu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ee(this,bu)}},bu=new WeakMap,da=new WeakMap,Iu=new WeakMap,ES),Cp=new eB;function tB(){let n,e;const t=new Promise((a,l)=>{n=a,e=l});t.status="pending",t.catch(()=>{});function r(a){Object.assign(t,a),delete t.resolve,delete t.reject}return t.resolve=a=>{r({status:"fulfilled",value:a}),n(a)},t.reject=a=>{r({status:"rejected",reason:a}),e(a)},t}function nB(n){return Math.min(1e3*2**n,3e4)}function dP(n){return(n??"online")==="online"?Cp.isOnline():!0}var fP=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function H_(n){return n instanceof fP}function mP(n){let e=!1,t=0,r=!1,a;const l=tB(),u=N=>{var V;r||(w(new fP(N)),(V=n.abort)==null||V.call(n))},h=()=>{e=!0},f=()=>{e=!1},p=()=>hP.isFocused()&&(n.networkMode==="always"||Cp.isOnline())&&n.canRun(),_=()=>dP(n.networkMode)&&n.canRun(),v=N=>{var V;r||(r=!0,(V=n.onSuccess)==null||V.call(n,N),a==null||a(),l.resolve(N))},w=N=>{var V;r||(r=!0,(V=n.onError)==null||V.call(n,N),a==null||a(),l.reject(N))},R=()=>new Promise(N=>{var V;a=z=>{(r||p())&&N(z)},(V=n.onPause)==null||V.call(n)}).then(()=>{var N;a=void 0,r||(N=n.onContinue)==null||N.call(n)}),C=()=>{if(r)return;let N;const V=t===0?n.initialPromise:void 0;try{N=V??n.fn()}catch(z){N=Promise.reject(z)}Promise.resolve(N).then(v).catch(z=>{var J;if(r)return;const Y=n.retry??(gg?0:3),K=n.retryDelay??nB,ue=typeof K=="function"?K(t,z):K,le=Y===!0||typeof Y=="number"&&t<Y||typeof Y=="function"&&Y(t,z);if(e||!le){w(z);return}t++,(J=n.onFail)==null||J.call(n,t,z),W5(ue).then(()=>p()?void 0:R()).then(()=>{e?w(z):C()})})};return{promise:l,cancel:u,continue:()=>(a==null||a(),l),cancelRetry:h,continueRetry:f,canStart:_,start:()=>(_()?C():R().then(C),l)}}function rB(){let n=[],e=0,t=h=>{h()},r=h=>{h()},a=h=>setTimeout(h,0);const l=h=>{e?n.push(h):a(()=>{t(h)})},u=()=>{const h=n;n=[],h.length&&a(()=>{r(()=>{h.forEach(f=>{t(f)})})})};return{batch:h=>{let f;e++;try{f=h()}finally{e--,e||u()}return f},batchCalls:h=>(...f)=>{l(()=>{h(...f)})},schedule:l,setNotifyFunction:h=>{t=h},setBatchNotifyFunction:h=>{r=h},setScheduler:h=>{a=h}}}var Ln=rB(),zo,TS,pP=(TS=class{constructor(){Je(this,zo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),K5(this.gcTime)&&Ve(this,zo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(gg?1/0:5*60*1e3))}clearGcTimeout(){ee(this,zo)&&(clearTimeout(ee(this,zo)),Ve(this,zo,void 0))}},zo=new WeakMap,TS),Au,Su,br,Fo,An,Cd,Bo,Vr,Xi,wS,iB=(wS=class extends pP{constructor(e){super();Je(this,Vr);Je(this,Au);Je(this,Su);Je(this,br);Je(this,Fo);Je(this,An);Je(this,Cd);Je(this,Bo);Ve(this,Bo,!1),Ve(this,Cd,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ve(this,Fo,e.client),Ve(this,br,ee(this,Fo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ve(this,Au,aB(this.options)),this.state=e.state??ee(this,Au),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ee(this,An))==null?void 0:e.promise}setOptions(e){this.options={...ee(this,Cd),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ee(this,br).remove(this)}setData(e,t){const r=Y5(this.state.data,e,this.options);return wn(this,Vr,Xi).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){wn(this,Vr,Xi).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,a;const t=(r=ee(this,An))==null?void 0:r.promise;return(a=ee(this,An))==null||a.cancel(e),t?t.then(xr).catch(xr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ee(this,Au))}isActive(){return this.observers.some(e=>$5(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===VT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Q5(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ee(this,An))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ee(this,An))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ee(this,br).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ee(this,An)&&(ee(this,Bo)?ee(this,An).cancel({revert:!0}):ee(this,An).cancelRetry()),this.scheduleGc()),ee(this,br).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wn(this,Vr,Xi).call(this,{type:"invalidate"})}fetch(e,t){var f,p,_;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ee(this,An))return ee(this,An).continueRetry(),ee(this,An).promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(w=>w.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,a=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(Ve(this,Bo,!0),r.signal)})},l=()=>{const v=cP(this.options,t),w={client:ee(this,Fo),queryKey:this.queryKey,meta:this.meta};return a(w),Ve(this,Bo,!1),this.options.persister?this.options.persister(v,w,this):v(w)},u={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:ee(this,Fo),state:this.state,fetchFn:l};a(u),(f=this.options.behavior)==null||f.onFetch(u,this),Ve(this,Su,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=u.fetchOptions)==null?void 0:p.meta))&&wn(this,Vr,Xi).call(this,{type:"fetch",meta:(_=u.fetchOptions)==null?void 0:_.meta});const h=v=>{var w,R,C,N;H_(v)&&v.silent||wn(this,Vr,Xi).call(this,{type:"error",error:v}),H_(v)||((R=(w=ee(this,br).config).onError)==null||R.call(w,v,this),(N=(C=ee(this,br).config).onSettled)==null||N.call(C,this.state.data,v,this)),this.scheduleGc()};return Ve(this,An,mP({initialPromise:t==null?void 0:t.initialPromise,fn:u.fetchFn,abort:r.abort.bind(r),onSuccess:v=>{var w,R,C,N;if(v===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(V){h(V);return}(R=(w=ee(this,br).config).onSuccess)==null||R.call(w,v,this),(N=(C=ee(this,br).config).onSettled)==null||N.call(C,v,this.state.error,this),this.scheduleGc()},onError:h,onFail:(v,w)=>{wn(this,Vr,Xi).call(this,{type:"failed",failureCount:v,error:w})},onPause:()=>{wn(this,Vr,Xi).call(this,{type:"pause"})},onContinue:()=>{wn(this,Vr,Xi).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),ee(this,An).start()}},Au=new WeakMap,Su=new WeakMap,br=new WeakMap,Fo=new WeakMap,An=new WeakMap,Cd=new WeakMap,Bo=new WeakMap,Vr=new WeakSet,Xi=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...sB(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return H_(a)&&a.revert&&ee(this,Su)?{...ee(this,Su),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Ln.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ee(this,br).notify({query:this,type:"updated",action:e})})},wS);function sB(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:dP(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function aB(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var si,bS,oB=(bS=class extends pg{constructor(e={}){super();Je(this,si);this.config=e,Ve(this,si,new Map)}build(e,t,r){const a=t.queryKey,l=t.queryHash??xT(a,t);let u=this.get(l);return u||(u=new iB({client:e,queryKey:a,queryHash:l,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(u)),u}add(e){ee(this,si).has(e.queryHash)||(ee(this,si).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ee(this,si).get(e.queryHash);t&&(e.destroy(),t===e&&ee(this,si).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ee(this,si).get(e)}getAll(){return[...ee(this,si).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>fS(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>fS(e,r)):t}notify(e){Ln.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ln.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ln.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},si=new WeakMap,bS),ai,kn,qo,oi,ua,IS,lB=(IS=class extends pP{constructor(e){super();Je(this,oi);Je(this,ai);Je(this,kn);Je(this,qo);this.mutationId=e.mutationId,Ve(this,kn,e.mutationCache),Ve(this,ai,[]),this.state=e.state||uB(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ee(this,ai).includes(e)||(ee(this,ai).push(e),this.clearGcTimeout(),ee(this,kn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ve(this,ai,ee(this,ai).filter(t=>t!==e)),this.scheduleGc(),ee(this,kn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ee(this,ai).length||(this.state.status==="pending"?this.scheduleGc():ee(this,kn).remove(this))}continue(){var e;return((e=ee(this,qo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,l,u,h,f,p,_,v,w,R,C,N,V,z,Y,K,ue,le,J,x;Ve(this,qo,mP({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,A)=>{wn(this,oi,ua).call(this,{type:"failed",failureCount:S,error:A})},onPause:()=>{wn(this,oi,ua).call(this,{type:"pause"})},onContinue:()=>{wn(this,oi,ua).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ee(this,kn).canRun(this)}));const t=this.state.status==="pending",r=!ee(this,qo).canStart();try{if(!t){wn(this,oi,ua).call(this,{type:"pending",variables:e,isPaused:r}),await((l=(a=ee(this,kn).config).onMutate)==null?void 0:l.call(a,e,this));const A=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,e));A!==this.state.context&&wn(this,oi,ua).call(this,{type:"pending",context:A,variables:e,isPaused:r})}const S=await ee(this,qo).start();return await((p=(f=ee(this,kn).config).onSuccess)==null?void 0:p.call(f,S,e,this.state.context,this)),await((v=(_=this.options).onSuccess)==null?void 0:v.call(_,S,e,this.state.context)),await((R=(w=ee(this,kn).config).onSettled)==null?void 0:R.call(w,S,null,this.state.variables,this.state.context,this)),await((N=(C=this.options).onSettled)==null?void 0:N.call(C,S,null,e,this.state.context)),wn(this,oi,ua).call(this,{type:"success",data:S}),S}catch(S){try{throw await((z=(V=ee(this,kn).config).onError)==null?void 0:z.call(V,S,e,this.state.context,this)),await((K=(Y=this.options).onError)==null?void 0:K.call(Y,S,e,this.state.context)),await((le=(ue=ee(this,kn).config).onSettled)==null?void 0:le.call(ue,void 0,S,this.state.variables,this.state.context,this)),await((x=(J=this.options).onSettled)==null?void 0:x.call(J,void 0,S,e,this.state.context)),S}finally{wn(this,oi,ua).call(this,{type:"error",error:S})}}finally{ee(this,kn).runNext(this)}}},ai=new WeakMap,kn=new WeakMap,qo=new WeakMap,oi=new WeakSet,ua=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ln.batch(()=>{ee(this,ai).forEach(r=>{r.onMutationUpdate(e)}),ee(this,kn).notify({mutation:this,type:"updated",action:e})})},IS);function uB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zi,kr,Dd,AS,cB=(AS=class extends pg{constructor(e={}){super();Je(this,Zi);Je(this,kr);Je(this,Dd);this.config=e,Ve(this,Zi,new Set),Ve(this,kr,new Map),Ve(this,Dd,0)}build(e,t,r){const a=new lB({mutationCache:this,mutationId:++wm(this,Dd)._,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){ee(this,Zi).add(e);const t=xm(e);if(typeof t=="string"){const r=ee(this,kr).get(t);r?r.push(e):ee(this,kr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ee(this,Zi).delete(e)){const t=xm(e);if(typeof t=="string"){const r=ee(this,kr).get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&ee(this,kr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=xm(e);if(typeof t=="string"){const r=ee(this,kr).get(t),a=r==null?void 0:r.find(l=>l.state.status==="pending");return!a||a===e}else return!0}runNext(e){var r;const t=xm(e);if(typeof t=="string"){const a=(r=ee(this,kr).get(t))==null?void 0:r.find(l=>l!==e&&l.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ln.batch(()=>{ee(this,Zi).forEach(e=>{this.notify({type:"removed",mutation:e})}),ee(this,Zi).clear(),ee(this,kr).clear()})}getAll(){return Array.from(ee(this,Zi))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>mS(t,r))}findAll(e={}){return this.getAll().filter(t=>mS(e,t))}notify(e){Ln.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ln.batch(()=>Promise.all(e.map(t=>t.continue().catch(xr))))}},Zi=new WeakMap,kr=new WeakMap,Dd=new WeakMap,AS);function xm(n){var e;return(e=n.options.scope)==null?void 0:e.id}function yS(n){return{onFetch:(e,t)=>{var _,v,w,R,C;const r=e.options,a=(w=(v=(_=e.fetchOptions)==null?void 0:_.meta)==null?void 0:v.fetchMore)==null?void 0:w.direction,l=((R=e.state.data)==null?void 0:R.pages)||[],u=((C=e.state.data)==null?void 0:C.pageParams)||[];let h={pages:[],pageParams:[]},f=0;const p=async()=>{let N=!1;const V=K=>{Object.defineProperty(K,"signal",{enumerable:!0,get:()=>(e.signal.aborted?N=!0:e.signal.addEventListener("abort",()=>{N=!0}),e.signal)})},z=cP(e.options,e.fetchOptions),Y=async(K,ue,le)=>{if(N)return Promise.reject();if(ue==null&&K.pages.length)return Promise.resolve(K);const J={client:e.client,queryKey:e.queryKey,pageParam:ue,direction:le?"backward":"forward",meta:e.options.meta};V(J);const x=await z(J),{maxPages:S}=e.options,A=le?Z5:X5;return{pages:A(K.pages,x,S),pageParams:A(K.pageParams,ue,S)}};if(a&&l.length){const K=a==="backward",ue=K?hB:_S,le={pages:l,pageParams:u},J=ue(r,le);h=await Y(le,J,K)}else{const K=n??l.length;do{const ue=f===0?u[0]??r.initialPageParam:_S(r,h);if(f>0&&ue==null)break;h=await Y(h,ue),f++}while(f<K)}return h};e.options.persister?e.fetchFn=()=>{var N,V;return(V=(N=e.options).persister)==null?void 0:V.call(N,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=p}}}function _S(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function hB(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Nt,fa,ma,Ru,Cu,pa,Du,Pu,SS,dB=(SS=class{constructor(n={}){Je(this,Nt);Je(this,fa);Je(this,ma);Je(this,Ru);Je(this,Cu);Je(this,pa);Je(this,Du);Je(this,Pu);Ve(this,Nt,n.queryCache||new oB),Ve(this,fa,n.mutationCache||new cB),Ve(this,ma,n.defaultOptions||{}),Ve(this,Ru,new Map),Ve(this,Cu,new Map),Ve(this,pa,0)}mount(){wm(this,pa)._++,ee(this,pa)===1&&(Ve(this,Du,hP.subscribe(async n=>{n&&(await this.resumePausedMutations(),ee(this,Nt).onFocus())})),Ve(this,Pu,Cp.subscribe(async n=>{n&&(await this.resumePausedMutations(),ee(this,Nt).onOnline())})))}unmount(){var n,e;wm(this,pa)._--,ee(this,pa)===0&&((n=ee(this,Du))==null||n.call(this),Ve(this,Du,void 0),(e=ee(this,Pu))==null||e.call(this),Ve(this,Pu,void 0))}isFetching(n){return ee(this,Nt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ee(this,fa).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ee(this,Nt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ee(this,Nt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(dS(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ee(this,Nt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),a=ee(this,Nt).get(r.queryHash),l=a==null?void 0:a.state.data,u=G5(e,l);if(u!==void 0)return ee(this,Nt).build(this,r).setData(u,{...t,manual:!0})}setQueriesData(n,e,t){return Ln.batch(()=>ee(this,Nt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ee(this,Nt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ee(this,Nt);Ln.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ee(this,Nt);return Ln.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Ln.batch(()=>ee(this,Nt).findAll(n).map(a=>a.cancel(t)));return Promise.all(r).then(xr).catch(xr)}invalidateQueries(n,e={}){return Ln.batch(()=>(ee(this,Nt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Ln.batch(()=>ee(this,Nt).findAll(n).filter(a=>!a.isDisabled()).map(a=>{let l=a.fetch(void 0,t);return t.throwOnError||(l=l.catch(xr)),a.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(r).then(xr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ee(this,Nt).build(this,e);return t.isStaleByTime(dS(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(xr).catch(xr)}fetchInfiniteQuery(n){return n.behavior=yS(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(xr).catch(xr)}ensureInfiniteQueryData(n){return n.behavior=yS(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Cp.isOnline()?ee(this,fa).resumePausedMutations():Promise.resolve()}getQueryCache(){return ee(this,Nt)}getMutationCache(){return ee(this,fa)}getDefaultOptions(){return ee(this,ma)}setDefaultOptions(n){Ve(this,ma,n)}setQueryDefaults(n,e){ee(this,Ru).set(Sd(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ee(this,Ru).values()],t={};return e.forEach(r=>{Rd(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ee(this,Cu).set(Sd(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ee(this,Cu).values()],t={};return e.forEach(r=>{Rd(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ee(this,ma).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=xT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===VT&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ee(this,ma).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ee(this,Nt).clear(),ee(this,fa).clear()}},Nt=new WeakMap,fa=new WeakMap,ma=new WeakMap,Ru=new WeakMap,Cu=new WeakMap,pa=new WeakMap,Du=new WeakMap,Pu=new WeakMap,SS),gP=Q.createContext(void 0),VB=n=>{const e=Q.useContext(gP);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},fB=({client:n,children:e})=>(Q.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),Ae.jsx(gP.Provider,{value:n,children:e}));XO.createRoot(document.getElementById("root")).render(Ae.jsx(Q.StrictMode,{children:Ae.jsx(fB,{client:new dB,children:Ae.jsx(H5,{children:Ae.jsx(xV,{})})})}));export{TV as A,hP as B,sB as C,Y5 as D,lP as F,nc as G,EV as L,jo as R,pg as S,_B as a,gB as b,ds as c,GS as d,Zm as e,VB as f,uB as g,Sd as h,j5 as i,Ae as j,zv as k,vB as l,pB as m,Ln as n,yB as o,tB as p,$5 as q,Q as r,xB as s,Mm as t,Bv as u,dS as v,xr as w,gg as x,K5 as y,Q5 as z};
